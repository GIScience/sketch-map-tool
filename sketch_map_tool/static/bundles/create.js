var nm=Object.create;var Cs=Object.defineProperty;var rm=Object.getOwnPropertyDescriptor;var sm=Object.getOwnPropertyNames;var om=Object.getPrototypeOf,am=Object.prototype.hasOwnProperty;var R=(n,t)=>()=>(n&&(t=n(n=0)),t);var Ho=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),We=(n,t)=>{for(var e in t)Cs(n,e,{get:t[e],enumerable:!0})},yc=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of sm(t))!am.call(n,r)&&r!==e&&Cs(n,r,{get:()=>t[r],enumerable:!(i=rm(t,r))||i.enumerable});return n};var yr=(n,t,e)=>(e=n!=null?nm(om(n)):{},yc(t||!n||!n.__esModule?Cs(e,"default",{value:n,enumerable:!0}):e,n)),de=n=>yc(Cs({},"__esModule",{value:!0}),n);var lm,qo,yn,Ts=R(()=>{lm={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"},qo=class extends Error{constructor(t){let e=lm[t];super(e),this.code=t,this.name="AssertionError",this.message=e}},yn=qo});var Jo,Rt,ve=R(()=>{Jo=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Rt=Jo});var Le,En=R(()=>{Le={PROPERTYCHANGE:"propertychange"}});var $o,Si,Er=R(()=>{$o=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},Si=$o});function Ec(n,t,e){let i,r;e=e||we;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+e(n[i],t),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function we(n,t){return n>t?1:n<t?-1:0}function Cn(n,t,e){let i=n.length;if(n[0]<=t)return 0;if(t<=n[i-1])return i-1;{let r;if(e>0){for(r=1;r<i;++r)if(n[r]<t)return r-1}else if(e<0){for(r=1;r<i;++r)if(n[r]<=t)return r}else for(r=1;r<i;++r){if(n[r]==t)return r;if(n[r]<t)return typeof e=="function"?e(t,n[r-1],n[r])>0?r-1:r:n[r-1]-t<t-n[r]?r-1:r}return i-1}}function Cc(n,t,e){for(;t<e;){let i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function ji(n,t){let e=Array.isArray(t)?t:[t],i=e.length;for(let r=0;r<i;r++)n[n.length]=e[r]}function Kt(n,t){let e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function Tc(n,t,e){let i=t||we;return n.every(function(r,s){if(s===0)return!0;let o=i(n[s-1],r);return!(o>0||e&&o===0)})}var vt=R(()=>{});function si(){return!0}function oi(){return!1}function se(){}function Rc(n){let t=!1,e,i,r;return function(){let s=Array.prototype.slice.call(arguments);return(!t||this!==r||!Kt(s,i))&&(t=!0,r=this,i=s,e=n.apply(this,arguments)),e}}var Bt=R(()=>{vt()});function ze(n){for(let t in n)delete n[t]}function ai(n){let t;for(t in n)return!1;return!t}var Be=R(()=>{});var Qo,Ye,Tn=R(()=>{Er();ve();Bt();Be();Qo=class extends Si{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;let i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){let e=typeof t=="string",i=e?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;let s=e?new Rt(t):t;s.target||(s.target=this.eventTarget_||this);let o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let h=0,c=r.length;h<c;++h)if("handleEvent"in r[h]?l=r[h].handleEvent(s):l=r[h].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,se);delete o[i]}return l}disposeInternal(){this.listeners_&&ze(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){let i=this.listeners_&&this.listeners_[t];if(i){let r=i.indexOf(e);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=se,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}},Ye=Qo});var G,ft=R(()=>{G={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}});function $(n,t,e,i,r){if(i&&i!==n&&(e=e.bind(i)),r){let o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}let s={target:n,type:t,listener:e};return n.addEventListener(t,e),s}function Rn(n,t,e,i){return $(n,t,e,i,!0)}function rt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),ze(n))}var oe=R(()=>{Be()});function hm(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)rt(n[t]);else rt(n)}var Sn,In,Rs=R(()=>{Tn();ft();oe();Sn=class extends Ye{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(G.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){let i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$(this,t[s],e);return r}else return $(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){let r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Rn(this,t[s],e)}else i=Rn(this,t,e);return e.ol_key=i,i}unInternal(t,e){let i=e.ol_key;if(i)hm(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}};Sn.prototype.on;Sn.prototype.once;Sn.prototype.un;In=Sn});function Q(){throw new Error("Unimplemented abstract method.")}function H(n){return n.ol_uid||(n.ol_uid=String(++cm))}var cm,Sc,gt=R(()=>{cm=0;Sc="7.1.0"});var Ss,ta,ut,Vt=R(()=>{ve();En();Rs();gt();Be();Ss=class extends Rt{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}},ta=class extends In{constructor(t){super(),this.on,this.once,this.un,H(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Ss(i,t,e)),i=Le.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Ss(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){let r=this.values_||(this.values_={});if(i)r[t]=e;else{let s=r[t];r[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(let i in t)this.set(i,t[i],e)}applyProperties(t){!t.values_||Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){let i=this.values_[t];delete this.values_[t],ai(this.values_)&&(this.values_=null),e||this.notify(t,i)}}},ut=ta});var Ot,Cr=R(()=>{Ot={ADD:"add",REMOVE:"remove"}});var Ic,vn,ea,Lt,Ii=R(()=>{Ts();Vt();Cr();ve();Ic={LENGTH:"length"},vn=class extends Rt{constructor(t,e,i){super(t),this.element=e,this.index=i}},ea=class extends ut{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){let e=this.array_;for(let i=0,r=e.length;i<r;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Ic.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new vn(Ot.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);let e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){let e=this.array_;for(let i=0,r=e.length;i<r;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;let e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new vn(Ot.REMOVE,e,t)),e}setAt(t,e){let i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);let r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new vn(Ot.REMOVE,r,t)),this.dispatchEvent(new vn(Ot.ADD,e,t))}updateLength_(){this.set(Ic.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new yn(58)}},Lt=ea});function K(n,t){if(!n)throw new yn(t)}var wt=R(()=>{Ts()});var Lc={};We(Lc,{createStyleFunction:()=>vc,default:()=>Rr});function vc(n){if(typeof n=="function")return n;{let t;return Array.isArray(n)?t=n:(K(typeof n.getZIndex=="function",41),t=[n]),function(){return t}}}var Tr,Rr,Is=R(()=>{Vt();ft();wt();oe();Tr=class extends ut{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){let e=t;this.setGeometry(e)}else{let e=t;this.setProperties(e)}}clone(){let t=new Tr(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let e=this.getGeometry();e&&t.setGeometry(e.clone());let i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(rt(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=$(t,G.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?vc(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};Rr=Tr});var vi,wc,um,E_,bc,Ac,vs,Ln,Mc,Ls,li=R(()=>{vi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",wc=vi.includes("firefox"),um=vi.includes("safari")&&!vi.includes("chrom"),E_=um&&(vi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(vi)),bc=vi.includes("webkit")&&!vi.includes("edge"),Ac=vi.includes("macintosh"),vs=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ln=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Mc=typeof Image<"u"&&Image.prototype.decode,Ls=function(){let n=!1;try{let t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n}()});function Ft(){return[1,0,0,1,0,0]}function Oc(n,t){let e=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=t[0],h=t[1],c=t[2],u=t[3],d=t[4],m=t[5];return n[0]=e*l+r*h,n[1]=i*l+s*h,n[2]=e*c+r*u,n[3]=i*c+s*u,n[4]=e*d+r*m+o,n[5]=i*d+s*m+a,n}function dm(n,t,e,i,r,s,o){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function Dc(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function _t(n,t){let e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function Fc(n,t,e){return dm(n,t,0,0,e,0,0)}function Yt(n,t,e,i,r,s,o,a){let l=Math.sin(s),h=Math.cos(s);return n[0]=i*h,n[1]=r*l,n[2]=-i*l,n[3]=r*h,n[4]=o*i*h-a*i*l+t,n[5]=o*r*l+a*r*h+e,n}function wn(n,t){let e=fm(t);K(e!==0,32);let i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return n[0]=o/e,n[1]=-r/e,n[2]=-s/e,n[3]=i/e,n[4]=(s*l-o*a)/e,n[5]=-(i*l-r*a)/e,n}function fm(n){return n[0]*n[3]-n[1]*n[2]}function ws(n){let t="matrix("+n.join(", ")+")";if(Ln)return t;let e=Pc||(Pc=document.createElement("div"));return e.style.transform=t,e.style.transform}var S_,Pc,be=R(()=>{li();wt();S_=new Array(6)});var St,ia=R(()=>{St={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}});function na(n){let t=bt();for(let e=0,i=n.length;e<i;++e)Ki(t,n[e]);return t}function gm(n,t,e){let i=Math.min.apply(null,n),r=Math.min.apply(null,t),s=Math.max.apply(null,n),o=Math.max.apply(null,t);return Ht(i,r,s,o,e)}function bn(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function As(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function An(n,t,e){let i,r;return t<n[0]?i=n[0]-t:n[2]<t?i=t-n[2]:i=0,e<n[1]?r=n[1]-e:n[3]<e?r=e-n[3]:r=0,i*i+r*r}function ae(n,t){return ra(n,t[0],t[1])}function Zt(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function ra(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function bs(n,t){let e=n[0],i=n[1],r=n[2],s=n[3],o=t[0],a=t[1],l=St.UNKNOWN;return o<e?l=l|St.LEFT:o>r&&(l=l|St.RIGHT),a<i?l=l|St.BELOW:a>s&&(l=l|St.ABOVE),l===St.UNKNOWN&&(l=St.INTERSECTING),l}function bt(){return[1/0,1/0,-1/0,-1/0]}function Ht(n,t,e,i,r){return r?(r[0]=n,r[1]=t,r[2]=e,r[3]=i,r):[n,t,e,i]}function Mn(n){return Ht(1/0,1/0,-1/0,-1/0,n)}function kc(n,t){let e=n[0],i=n[1];return Ht(e,i,e,i,t)}function Nc(n,t,e,i,r){let s=Mn(r);return sa(s,n,t,e,i)}function Ae(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function Gc(n,t,e){return Math.abs(n[0]-t[0])<e&&Math.abs(n[2]-t[2])<e&&Math.abs(n[1]-t[1])<e&&Math.abs(n[3]-t[3])<e}function Xc(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function Ki(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function sa(n,t,e,i,r){for(;e<i;e+=r)mm(n,t[e],t[e+1]);return n}function mm(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function Ms(n,t){let e;return e=t(Pn(n)),e||(e=t(On(n)),e)||(e=t(Dn(n)),e)||(e=t(fe(n)),e)?e:!1}function Sr(n){let t=0;return Vi(n)||(t=et(n)*At(n)),t}function Pn(n){return[n[0],n[1]]}function On(n){return[n[2],n[1]]}function qt(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Wc(n,t){let e;return t==="bottom-left"?e=Pn(n):t==="bottom-right"?e=On(n):t==="top-left"?e=fe(n):t==="top-right"?e=Dn(n):K(!1,13),e}function Ir(n,t,e,i,r){let[s,o,a,l,h,c,u,d]=Ps(n,t,e,i);return Ht(Math.min(s,a,h,u),Math.min(o,l,c,d),Math.max(s,a,h,u),Math.max(o,l,c,d),r)}function Ps(n,t,e,i){let r=t*i[0]/2,s=t*i[1]/2,o=Math.cos(e),a=Math.sin(e),l=r*o,h=r*a,c=s*o,u=s*a,d=n[0],m=n[1];return[d-l+u,m-h-c,d-l-u,m-h+c,d+l-u,m+h+c,d+l+u,m+h-c,d-l+u,m-h-c]}function At(n){return n[3]-n[1]}function Ue(n,t,e){let i=e||bt();return mt(n,t)?(n[0]>t[0]?i[0]=n[0]:i[0]=t[0],n[1]>t[1]?i[1]=n[1]:i[1]=t[1],n[2]<t[2]?i[2]=n[2]:i[2]=t[2],n[3]<t[3]?i[3]=n[3]:i[3]=t[3]):Mn(i),i}function fe(n){return[n[0],n[3]]}function Dn(n){return[n[2],n[3]]}function et(n){return n[2]-n[0]}function mt(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function Vi(n){return n[2]<n[0]||n[3]<n[1]}function zc(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function Bc(n,t,e){let i=!1,r=bs(n,t),s=bs(n,e);if(r===St.INTERSECTING||s===St.INTERSECTING)i=!0;else{let o=n[0],a=n[1],l=n[2],h=n[3],c=t[0],u=t[1],d=e[0],m=e[1],p=(m-u)/(d-c),x,f;!!(s&St.ABOVE)&&!(r&St.ABOVE)&&(x=d-(m-h)/p,i=x>=o&&x<=l),!i&&!!(s&St.RIGHT)&&!(r&St.RIGHT)&&(f=m-(d-l)*p,i=f>=a&&f<=h),!i&&!!(s&St.BELOW)&&!(r&St.BELOW)&&(x=d-(m-a)/p,i=x>=o&&x<=l),!i&&!!(s&St.LEFT)&&!(r&St.LEFT)&&(f=m-(d-o)*p,i=f>=a&&f<=h)}return i}function vr(n,t,e,i){let r=[];if(i>1){let a=n[2]-n[0],l=n[3]-n[1];for(let h=0;h<i;++h)r.push(n[0]+a*h/i,n[1],n[2],n[1]+l*h/i,n[2]-a*h/i,n[3],n[0],n[3]-l*h/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];t(r,r,2);let s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return gm(s,o,e)}function Lr(n,t){let e=t.getExtent(),i=qt(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){let r=et(e),o=Math.floor((i[0]-e[0])/r)*r;n[0]-=o,n[2]-=o}return n}function Yc(n,t){if(t.canWrapX()){let e=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[e[0],n[1],e[2],n[3]]];Lr(n,t);let i=et(e);if(et(n)>i)return[[e[0],n[1],e[2],n[3]]];if(n[0]<e[0])return[[n[0]+i,n[1],e[2],n[3]],[e[0],n[1],n[2],n[3]]];if(n[2]>e[2])return[[n[0],n[1],e[2],n[3]],[e[0],n[1],n[2]-i,n[3]]]}return[n]}var st=R(()=>{ia();wt()});var Jt,oa=R(()=>{Jt={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}});var aa,Fn,Os=R(()=>{oa();aa=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Jt[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Fn=aa});function Uc(n,t,e){let i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=e){t[r]=kn*n[r]/180;let s=wr*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>Ds?s=Ds:s<-Ds&&(s=-Ds),t[r+1]=s}return t}function jc(n,t,e){let i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=e)t[r]=180*n[r]/kn,t[r+1]=360*Math.atan(Math.exp(n[r+1]/wr))/Math.PI-90;return t}var wr,kn,pm,_m,Ds,Li,la,Kc=R(()=>{Os();wr=6378137,kn=Math.PI*wr,pm=[-kn,-kn,kn,kn],_m=[-180,-85,180,85],Ds=wr*Math.log(Math.tan(Math.PI/2)),Li=class extends Fn{constructor(t){super({code:t,units:"m",extent:pm,global:!0,worldExtent:_m,getPointResolution:function(e,i){return e/Math.cosh(i[1]/wr)}})}},la=[new Li("EPSG:3857"),new Li("EPSG:102100"),new Li("EPSG:102113"),new Li("EPSG:900913"),new Li("http://www.opengis.net/def/crs/EPSG/0/3857"),new Li("http://www.opengis.net/gml/srs/epsg.xml#3857")]});var xm,Vc,ym,hi,ha,Zc=R(()=>{Os();xm=6378137,Vc=[-180,-90,180,90],ym=Math.PI*xm/180,hi=class extends Fn{constructor(t,e){super({code:t,units:"degrees",extent:Vc,axisOrientation:e,global:!0,metersPerUnit:ym,worldExtent:Vc})}},ha=[new hi("CRS:84"),new hi("EPSG:4326","neu"),new hi("urn:ogc:def:crs:OGC:1.3:CRS84"),new hi("urn:ogc:def:crs:OGC:2:84"),new hi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new hi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new hi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")]});function Hc(){Fs={}}function qc(n){return Fs[n]||Fs[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Jc(n,t){Fs[n]=t}var Fs,$c=R(()=>{Fs={}});function Qc(){Zi={}}function Hi(n,t,e){let i=n.getCode(),r=t.getCode();i in Zi||(Zi[i]={}),Zi[i][r]=e}function tu(n,t){let e;return n in Zi&&t in Zi[n]&&(e=Zi[n][t]),e}var Zi,eu=R(()=>{Zi={}});function V(n,t,e){return Math.min(Math.max(n,t),e)}function ks(n,t,e,i,r,s){let o=r-e,a=s-i;if(o!==0||a!==0){let l=((n-e)*o+(t-i)*a)/(o*o+a*a);l>1?(e=r,i=s):l>0&&(e+=o*l,i+=a*l)}return ci(n,t,e,i)}function ci(n,t,e,i){let r=e-n,s=i-t;return r*r+s*s}function iu(n){let t=n.length;for(let i=0;i<t;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<t;a++){let l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;let o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<t;a++){let l=-n[a][i]/n[i][i];for(let h=i;h<t+1;h++)i==h?n[a][h]=0:n[a][h]+=l*n[i][h]}}let e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=n[i][t]/n[i][i];for(let r=i-1;r>=0;r--)n[r][t]-=n[r][i]*e[i]}return e}function Ns(n){return n*180/Math.PI}function $t(n){return n*Math.PI/180}function le(n,t){let e=n%t;return e*t<0?e+t:e}function ge(n,t,e){return n+e*(t-n)}function Gs(n,t){let e=Math.pow(10,t);return Math.round(n*e)/e}function br(n,t){return Math.floor(Gs(n,t))}function Ar(n,t){return Math.ceil(Gs(n,t))}var pt=R(()=>{});function ca(n,t,e){let i=e!==void 0?n.toFixed(e):""+n,r=i.indexOf(".");return r=r===-1?i.length:r,r>t?i:new Array(1+t-r).join("0")+i}var nu=R(()=>{});function ru(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function ua(n,t,e){let i=le(t+180,360)-180,r=Math.abs(3600*i),s=e||0,o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=Gs(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let h=o+"\xB0";return(a!==0||l!==0)&&(h+=" "+ca(a,2)+"\u2032"),l!==0&&(h+=" "+ca(l,2,s)+"\u2033"),i!==0&&(h+=" "+n.charAt(i<0?1:0)),h}function qi(n,t){let e=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function Nn(n,t){let e=Math.cos(t),i=Math.sin(t),r=n[0]*e-n[1]*i,s=n[1]*e+n[0]*i;return n[0]=r,n[1]=s,n}function su(n,t){return n[0]*=t,n[1]*=t,n}function Xs(n,t){if(t.canWrapX()){let e=et(t.getExtent()),i=da(n,t,e);i&&(n[0]-=i*e)}return n}function da(n,t,e){let i=t.getExtent(),r=0;return t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(e=e||et(i),r=Math.floor((n[0]-i[0])/e)),r}var wi=R(()=>{st();pt();nu()});var lu={};We(lu,{DEFAULT_RADIUS:()=>Mr,getArea:()=>au,getDistance:()=>Pr,getLength:()=>ou,offset:()=>ga});function Pr(n,t,e){e=e||Mr;let i=$t(n[1]),r=$t(t[1]),s=(r-i)/2,o=$t(t[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function fa(n,t){let e=0;for(let i=0,r=n.length;i<r-1;++i)e+=Pr(n[i],n[i+1],t);return e}function ou(n,t){t=t||{};let e=t.radius||Mr,i=t.projection||"EPSG:3857",r=n.getType();r!=="GeometryCollection"&&(n=n.clone().transform(i,"EPSG:4326"));let s=0,o,a,l,h,c,u;switch(r){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=n.getCoordinates(),s=fa(o,e);break}case"MultiLineString":case"Polygon":{for(o=n.getCoordinates(),l=0,h=o.length;l<h;++l)s+=fa(o[l],e);break}case"MultiPolygon":{for(o=n.getCoordinates(),l=0,h=o.length;l<h;++l)for(a=o[l],c=0,u=a.length;c<u;++c)s+=fa(a[c],e);break}case"GeometryCollection":{let d=n.getGeometries();for(l=0,h=d.length;l<h;++l)s+=ou(d[l],t);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function Ws(n,t){let e=0,i=n.length,r=n[i-1][0],s=n[i-1][1];for(let o=0;o<i;o++){let a=n[o][0],l=n[o][1];e+=$t(a-r)*(2+Math.sin($t(s))+Math.sin($t(l))),r=a,s=l}return e*t*t/2}function au(n,t){t=t||{};let e=t.radius||Mr,i=t.projection||"EPSG:3857",r=n.getType();r!=="GeometryCollection"&&(n=n.clone().transform(i,"EPSG:4326"));let s=0,o,a,l,h,c,u;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=n.getCoordinates(),s=Math.abs(Ws(o[0],e)),l=1,h=o.length;l<h;++l)s-=Math.abs(Ws(o[l],e));break}case"MultiPolygon":{for(o=n.getCoordinates(),l=0,h=o.length;l<h;++l)for(a=o[l],s+=Math.abs(Ws(a[0],e)),c=1,u=a.length;c<u;++c)s-=Math.abs(Ws(a[c],e));break}case"GeometryCollection":{let d=n.getGeometries();for(l=0,h=d.length;l<h;++l)s+=au(d[l],t);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function ga(n,t,e,i){i=i||Mr;let r=$t(n[1]),s=$t(n[0]),o=t/i,a=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(e)),l=s+Math.atan2(Math.sin(e)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(a));return[Ns(l),Ns(a)]}var Mr,zs=R(()=>{pt();Mr=63710088e-1});var Ca={};We(Ca,{METERS_PER_UNIT:()=>Jt,Projection:()=>Fn,addCommon:()=>gu,addCoordinateTransforms:()=>Cm,addEquivalentProjections:()=>pa,addEquivalentTransforms:()=>uu,addProjection:()=>hu,addProjections:()=>cu,clearAllProjections:()=>Em,clearUserProjection:()=>Sm,cloneTransform:()=>Ys,createProjection:()=>Dr,createSafeCoordinateTransform:()=>vm,createTransformFromCoordinateTransform:()=>_a,disableCoordinateWarning:()=>Bs,equivalent:()=>Me,fromLonLat:()=>xa,fromUserCoordinate:()=>me,fromUserExtent:()=>pe,fromUserResolution:()=>fu,get:()=>ct,getPointResolution:()=>Us,getTransform:()=>Qt,getTransformFromProjections:()=>Pe,getUserProjection:()=>$i,identityTransform:()=>Or,setUserProjection:()=>du,toLonLat:()=>Tm,toUserCoordinate:()=>Gn,toUserExtent:()=>Qi,toUserResolution:()=>Ea,transform:()=>Ji,transformExtent:()=>ya,transformWithProjections:()=>Rm,useGeographic:()=>Im});function Bs(n){ma=!(n===void 0?!0:n)}function Ys(n,t,e){if(t!==void 0){for(let i=0,r=n.length;i<r;++i)t[i]=n[i];t=t}else t=n.slice();return t}function Or(n,t,e){if(t!==void 0&&n!==t){for(let i=0,r=n.length;i<r;++i)t[i]=n[i];n=t}return n}function hu(n){Jc(n.getCode(),n),Hi(n,n,Ys)}function cu(n){n.forEach(hu)}function ct(n){return typeof n=="string"?qc(n):n||null}function Us(n,t,e,i){n=ct(n);let r,s=n.getPointResolutionFunc();if(s){if(r=s(t,e),i&&i!==n.getUnits()){let o=n.getMetersPerUnit();o&&(r=r*o/Jt[i])}}else{let o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=t;else{let a=Pe(n,ct("EPSG:4326"));if(a===Or&&o!=="degrees")r=t*n.getMetersPerUnit();else{let h=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];h=a(h,h,2);let c=Pr(h.slice(0,2),h.slice(2,4)),u=Pr(h.slice(4,6),h.slice(6,8));r=(c+u)/2}let l=i?Jt[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function pa(n){cu(n),n.forEach(function(t){n.forEach(function(e){t!==e&&Hi(t,e,Ys)})})}function uu(n,t,e,i){n.forEach(function(r){t.forEach(function(s){Hi(r,s,e),Hi(s,r,i)})})}function Em(){Hc(),Qc()}function Dr(n,t){return n?typeof n=="string"?ct(n):n:ct(t)}function _a(n){return function(t,e,i){let r=t.length;i=i!==void 0?i:2,e=e!==void 0?e:new Array(r);for(let s=0;s<r;s+=i){let o=n(t.slice(s,s+i)),a=o.length;for(let l=0,h=i;l<h;++l)e[s+l]=l>=a?t[s+l]:o[l]}return e}}function Cm(n,t,e,i){let r=ct(n),s=ct(t);Hi(r,s,_a(e)),Hi(s,r,_a(i))}function xa(n,t){return Bs(),Ji(n,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function Tm(n,t){let e=Ji(n,t!==void 0?t:"EPSG:3857","EPSG:4326"),i=e[0];return(i<-180||i>180)&&(e[0]=le(i+180,360)-180),e}function Me(n,t){if(n===t)return!0;let e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||Pe(n,t)===Ys)&&e}function Pe(n,t){let e=n.getCode(),i=t.getCode(),r=tu(e,i);return r||(r=Or),r}function Qt(n,t){let e=ct(n),i=ct(t);return Pe(e,i)}function Ji(n,t,e){return Qt(t,e)(n,void 0,n.length)}function ya(n,t,e,i){let r=Qt(t,e);return vr(n,r,void 0,i)}function Rm(n,t,e){return Pe(t,e)(n)}function du(n){Ut=ct(n)}function Sm(){Ut=null}function $i(){return Ut}function Im(){du("EPSG:4326")}function Gn(n,t){return Ut?Ji(n,t,Ut):n}function me(n,t){return Ut?Ji(n,Ut,t):(ma&&!qi(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(ma=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n)}function Qi(n,t){return Ut?ya(n,t,Ut):n}function pe(n,t){return Ut?ya(n,Ut,t):n}function Ea(n,t){if(!Ut)return n;let e=ct(t).getUnits(),i=Ut.getUnits();return e&&i?n*Jt[e]/Jt[i]:n}function fu(n,t){if(!Ut)return n;let e=ct(t).getUnits(),i=Ut.getUnits();return e&&i?n*Jt[i]/Jt[e]:n}function vm(n,t,e){return function(i){let r,s;if(n.canWrapX()){let o=n.getExtent(),a=et(o);i=i.slice(0),s=da(i,n,a),s&&(i[0]=i[0]-s*a),i[0]=V(i[0],o[0],o[2]),i[1]=V(i[1],o[1],o[3]),r=e(i)}else r=e(i);return s&&t.canWrapX()&&(r[0]+=s*et(t.getExtent())),r}}function gu(){pa(la),pa(ha),uu(ha,la,Uc,jc)}var ma,Ut,It=R(()=>{Os();Kc();Zc();oa();$c();eu();st();pt();wi();zs();ma=!0;Ut=null;gu()});function _e(n,t,e,i,r,s){s=s||[];let o=0;for(let a=t;a<e;a+=i){let l=n[a],h=n[a+1];s[o++]=r[0]*l+r[2]*h+r[4],s[o++]=r[1]*l+r[3]*h+r[5]}return s&&s.length!=o&&(s.length=o),s}function js(n,t,e,i,r,s,o){o=o||[];let a=Math.cos(r),l=Math.sin(r),h=s[0],c=s[1],u=0;for(let d=t;d<e;d+=i){let m=n[d]-h,p=n[d+1]-c;o[u++]=h+m*a-p*l,o[u++]=c+m*l+p*a;for(let x=d+2;x<d+i;++x)o[u++]=n[x]}return o&&o.length!=u&&(o.length=u),o}function mu(n,t,e,i,r,s,o,a){a=a||[];let l=o[0],h=o[1],c=0;for(let u=t;u<e;u+=i){let d=n[u]-l,m=n[u+1]-h;a[c++]=l+r*d,a[c++]=h+s*m;for(let p=u+2;p<u+i;++p)a[c++]=n[p]}return a&&a.length!=c&&(a.length=c),a}function pu(n,t,e,i,r,s,o){o=o||[];let a=0;for(let l=t;l<e;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let h=l+2;h<l+i;++h)o[a++]=n[h]}return o&&o.length!=a&&(o.length=a),o}var tn=R(()=>{});var _u,Ta,xu,yu=R(()=>{Vt();gt();be();st();It();Bt();tn();_u=Ft(),Ta=class extends ut{constructor(){super(),this.extent_=bt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Rc(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);let r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Q()}closestPointXY(t,e,i,r){return Q()}containsXY(t,e){let i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Q()}getExtent(t){if(this.extentRevision_!=this.getRevision()){let e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Mn(e),this.extentRevision_=this.getRevision()}return zc(this.extent_,t)}rotate(t,e){Q()}scale(t,e,i){Q()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Q()}getType(){return Q()}applyTransform(t){Q()}intersectsExtent(t){return Q()}translate(t,e){Q()}transform(t,e){let i=ct(t),r=i.getUnits()=="tile-pixels"?function(s,o,a){let l=i.getExtent(),h=i.getWorldExtent(),c=At(h)/At(l);return Yt(_u,h[0],h[3],c,-c,0,0,0),_e(s,0,s.length,a,_u,o),Qt(i,e)(s,o,a)}:Qt(i,e);return this.applyTransform(r),this}},xu=Ta});function Lm(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function Eu(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}function Cu(n,t,e){let i=n.getFlatCoordinates();if(i){let r=n.getStride();return _e(i,0,i.length,r,t,e)}else return null}var Ra,bi,Xn=R(()=>{yu();gt();st();tn();Ra=class extends xu{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Nc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Q()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Eu(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Q()}setLayout(t,e,i){let r;if(t)r=Eu(t);else{for(let s=0;s<i;++s)if(e.length===0){this.layout="XY",this.stride=2;return}else e=e[0];r=e.length,t=Lm(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){let i=this.getFlatCoordinates();if(i){let r=this.getStride();js(i,0,i.length,r,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=qt(this.getExtent()));let r=this.getFlatCoordinates();if(r){let s=this.getStride();mu(r,0,r.length,s,t,e,i,r),this.changed()}}translate(t,e){let i=this.getFlatCoordinates();if(i){let r=this.getStride();pu(i,0,i.length,r,t,e,i),this.changed()}}};bi=Ra});function Tu(n,t,e,i,r,s,o){let a=n[t],l=n[t+1],h=n[e]-a,c=n[e+1]-l,u;if(h===0&&c===0)u=t;else{let d=((r-a)*h+(s-l)*c)/(h*h+c*c);if(d>1)u=e;else if(d>0){for(let m=0;m<i;++m)o[m]=ge(n[t+m],n[e+m],d);o.length=i;return}else u=t}for(let d=0;d<i;++d)o[d]=n[u+d];o.length=i}function Fr(n,t,e,i,r){let s=n[t],o=n[t+1];for(t+=i;t<e;t+=i){let a=n[t],l=n[t+1],h=ci(s,o,a,l);h>r&&(r=h),s=a,o=l}return r}function Ru(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){let a=e[s];r=Fr(n,t,a,i,r),t=a}return r}function kr(n,t,e,i,r,s,o,a,l,h,c){if(t==e)return h;let u,d;if(r===0)if(d=ci(o,a,n[t],n[t+1]),d<h){for(u=0;u<i;++u)l[u]=n[t+u];return l.length=i,d}else return h;c=c||[NaN,NaN];let m=t+i;for(;m<e;)if(Tu(n,m-i,m,i,o,a,c),d=ci(o,a,c[0],c[1]),d<h){for(h=d,u=0;u<i;++u)l[u]=c[u];l.length=i,m+=i}else m+=i*Math.max((Math.sqrt(d)-Math.sqrt(h))/r|0,1);if(s&&(Tu(n,e-i,t,i,o,a,c),d=ci(o,a,c[0],c[1]),d<h)){for(h=d,u=0;u<i;++u)l[u]=c[u];l.length=i}return h}function Su(n,t,e,i,r,s,o,a,l,h,c){c=c||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){let m=e[u];h=kr(n,t,m,i,r,s,o,a,l,h,c),t=m}return h}var Ks=R(()=>{pt()});function Iu(n,t,e,i){for(let r=0,s=e.length;r<s;++r)n[t++]=e[r];return t}function Nr(n,t,e,i){for(let r=0,s=e.length;r<s;++r){let o=e[r];for(let a=0;a<i;++a)n[t++]=o[a]}return t}function vu(n,t,e,i,r){r=r||[];let s=0;for(let o=0,a=e.length;o<a;++o){let l=Nr(n,t,e[o],i);r[s++]=l,t=l}return r.length=s,r}var Gr=R(()=>{});function Vs(n,t,e,i,r,s,o){let a=(e-t)/i;if(a<3){for(;t<e;t+=i)s[o++]=n[t],s[o++]=n[t+1];return o}let l=new Array(a);l[0]=1,l[a-1]=1;let h=[t,e-i],c=0;for(;h.length>0;){let u=h.pop(),d=h.pop(),m=0,p=n[d],x=n[d+1],f=n[u],g=n[u+1];for(let _=d+i;_<u;_+=i){let y=n[_],E=n[_+1],C=ks(y,E,p,x,f,g);C>m&&(c=_,m=C)}m>r&&(l[(c-t)/i]=1,d+i<c&&h.push(d,c),c+i<u&&h.push(c,u))}for(let u=0;u<a;++u)l[u]&&(s[o++]=n[t+u*i],s[o++]=n[t+u*i+1]);return o}function Ai(n,t){return t*Math.round(n/t)}function wm(n,t,e,i,r,s,o){if(t==e)return o;let a=Ai(n[t],r),l=Ai(n[t+1],r);t+=i,s[o++]=a,s[o++]=l;let h,c;do if(h=Ai(n[t],r),c=Ai(n[t+1],r),t+=i,t==e)return s[o++]=h,s[o++]=c,o;while(h==a&&c==l);for(;t<e;){let u=Ai(n[t],r),d=Ai(n[t+1],r);if(t+=i,u==h&&d==c)continue;let m=h-a,p=c-l,x=u-a,f=d-l;if(m*f==p*x&&(m<0&&x<m||m==x||m>0&&x>m)&&(p<0&&f<p||p==f||p>0&&f>p)){h=u,c=d;continue}s[o++]=h,s[o++]=c,a=h,l=c,h=u,c=d}return s[o++]=h,s[o++]=c,o}function Lu(n,t,e,i,r,s,o,a){for(let l=0,h=e.length;l<h;++l){let c=e[l];o=wm(n,t,c,i,r,s,o),a.push(o),t=c}return o}var Xr=R(()=>{pt()});function je(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<e;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function Wn(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=e.length;o<a;++o){let l=e[o];r[s++]=je(n,t,l,i,r[s]),t=l}return r.length=s,r}function Sa(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=e.length;o<a;++o){let l=e[o];r[s++]=l.length===1&&l[0]===t?[]:Wn(n,t,l,i,r[s]),t=l[l.length-1]}return r.length=s,r}var Wr=R(()=>{});function Ia(n,t,e,i){let r=0,s=n[e-i],o=n[e-i+1];for(;t<e;t+=i){let a=n[t],l=n[t+1];r+=o*a-s*l,s=a,o=l}return r/2}function wu(n,t,e,i){let r=0;for(let s=0,o=e.length;s<o;++s){let a=e[s];r+=Ia(n,t,a,i),t=a}return r}var va=R(()=>{});var zn,La,bu=R(()=>{Xn();Ks();st();Gr();Xr();Wr();va();zn=class extends bi{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new zn(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,r){return r<An(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))}getArea(){return Ia(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return je(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let e=[];return e.length=Vs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new zn(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Nr(this.flatCoordinates,0,t,this.stride),this.changed()}},La=zn});var Au={};We(Au,{default:()=>Bn});var zr,Bn,Zs=R(()=>{Xn();st();Gr();pt();zr=class extends bi{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){let t=new zr(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){let s=this.flatCoordinates,o=ci(t,e,s[0],s[1]);if(o<r){let a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}else return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return kc(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return ra(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Iu(this.flatCoordinates,0,t,this.stride),this.changed()}},Bn=zr});function Mu(n,t,e,i,r){return!Ms(r,function(o){return!Mi(n,t,e,i,o[0],o[1])})}function Mi(n,t,e,i,r,s){let o=0,a=n[e-i],l=n[e-i+1];for(;t<e;t+=i){let h=n[t],c=n[t+1];l<=s?c>s&&(h-a)*(s-l)-(r-a)*(c-l)>0&&o++:c<=s&&(h-a)*(s-l)-(r-a)*(c-l)<0&&o--,a=h,l=c}return o!==0}function Hs(n,t,e,i,r,s){if(e.length===0||!Mi(n,t,e[0],i,r,s))return!1;for(let o=1,a=e.length;o<a;++o)if(Mi(n,e[o-1],e[o],i,r,s))return!1;return!0}var qs=R(()=>{st()});function Pu(n,t,e,i,r,s,o){let a,l,h,c,u,d,m,p=r[s+1],x=[];for(let _=0,y=e.length;_<y;++_){let E=e[_];for(c=n[E-i],d=n[E-i+1],a=t;a<E;a+=i)u=n[a],m=n[a+1],(p<=d&&m<=p||d<=p&&p<=m)&&(h=(p-d)/(m-d)*(u-c)+c,x.push(h)),c=u,d=m}let f=NaN,g=-1/0;for(x.sort(we),c=x[0],a=1,l=x.length;a<l;++a){u=x[a];let _=Math.abs(u-c);_>g&&(h=(c+u)/2,Hs(n,t,e,i,h,p)&&(f=h,g=_)),c=u}return isNaN(f)&&(f=r[s]),o?(o.push(f,p,g),o):[f,p,g]}var Ou=R(()=>{qs();vt()});function Js(n,t,e,i,r){let s;for(t+=i;t<e;t+=i)if(s=r(n.slice(t-i,t),n.slice(t,t+i)),s)return s;return!1}var wa=R(()=>{});function $s(n,t,e,i,r){let s=sa(bt(),n,t,e,i);return mt(r,s)?Zt(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:Js(n,t,e,i,function(o,a){return Bc(r,o,a)}):!1}function ba(n,t,e,i,r){return!!($s(n,t,e,i,r)||Mi(n,t,e,i,r[0],r[1])||Mi(n,t,e,i,r[0],r[3])||Mi(n,t,e,i,r[2],r[1])||Mi(n,t,e,i,r[2],r[3]))}function Du(n,t,e,i,r){if(!ba(n,t,e[0],i,r))return!1;if(e.length===1)return!0;for(let s=1,o=e.length;s<o;++s)if(Mu(n,e[s-1],e[s],i,r)&&!$s(n,e[s-1],e[s],i,r))return!1;return!0}var Qs=R(()=>{st();wa();qs()});function Fu(n,t,e,i){for(;t<e-i;){for(let r=0;r<i;++r){let s=n[t+r];n[t+r]=n[e-i+r],n[e-i+r]=s}t+=i,e-=i}}var ku=R(()=>{});function Nu(n,t,e,i){let r=0,s=n[e-i],o=n[e-i+1];for(;t<e;t+=i){let a=n[t],l=n[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function Gu(n,t,e,i,r){r=r!==void 0?r:!1;for(let s=0,o=e.length;s<o;++s){let a=e[s],l=Nu(n,t,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function Aa(n,t,e,i,r){r=r!==void 0?r:!1;for(let s=0,o=e.length;s<o;++s){let a=e[s],l=Nu(n,t,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&Fu(n,t,a,i),t=a}return t}var Xu=R(()=>{ku()});function zu(n,t,e,i){e=e||32;let r=[];for(let s=0;s<e;++s)ji(r,ga(n,t,2*Math.PI*s/e,i));return r.push(r[0],r[1]),new Pi(r,"XY",[r.length])}function Ma(n){let t=n[0],e=n[1],i=n[2],r=n[3],s=[t,e,t,r,i,r,i,e,t,e];return new Pi(s,"XY",[s.length])}var Pi,Wu,to=R(()=>{bu();Zs();Xn();Ks();st();Gr();vt();Ou();Wr();Qs();Xu();va();qs();Xr();zs();Pi=class extends bi{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ji(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new Pi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<An(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ru(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Su(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return Hs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return wu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Aa(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Wn(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let t=qt(this.getExtent());this.flatInteriorPoint_=Pu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Bn(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new La(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){let t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],s=0;for(let o=0,a=i.length;o<a;++o){let l=i[o],h=new La(e.slice(s,l),t);r.push(h),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;Gu(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Aa(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let e=[],i=[];return e.length=Lu(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Pi(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return Du(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let i=vu(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}},Wu=Pi});var yt,Pa,Oa,Bu,Yu=R(()=>{ve();Vt();ft();to();It();pt();yt={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Pa=class extends Rt{constructor(t){super(G.ERROR),this.code=t.code,this.message=t.message}},Oa=class extends ut{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=Or,this.watchId_=void 0,this.addChangeListener(yt.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(yt.TRACKING,this.handleTrackingChanged_),t.projection!==void 0&&this.setProjection(t.projection),t.trackingOptions!==void 0&&this.setTrackingOptions(t.trackingOptions),this.setTracking(t.tracking!==void 0?t.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){let t=this.getProjection();t&&(this.transform_=Pe(ct("EPSG:4326"),t),this.position_&&this.set(yt.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){let t=this.getTracking();t&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!t&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){let e=t.coords;this.set(yt.ACCURACY,e.accuracy),this.set(yt.ALTITUDE,e.altitude===null?void 0:e.altitude),this.set(yt.ALTITUDE_ACCURACY,e.altitudeAccuracy===null?void 0:e.altitudeAccuracy),this.set(yt.HEADING,e.heading===null?void 0:$t(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];let i=this.transform_(this.position_);this.set(yt.POSITION,i),this.set(yt.SPEED,e.speed===null?void 0:e.speed);let r=zu(this.position_,e.accuracy);r.applyTransform(this.transform_),this.set(yt.ACCURACY_GEOMETRY,r),this.changed()}positionError_(t){this.dispatchEvent(new Pa(t))}getAccuracy(){return this.get(yt.ACCURACY)}getAccuracyGeometry(){return this.get(yt.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(yt.ALTITUDE)}getAltitudeAccuracy(){return this.get(yt.ALTITUDE_ACCURACY)}getHeading(){return this.get(yt.HEADING)}getPosition(){return this.get(yt.POSITION)}getProjection(){return this.get(yt.PROJECTION)}getSpeed(){return this.get(yt.SPEED)}getTracking(){return this.get(yt.TRACKING)}getTrackingOptions(){return this.get(yt.TRACKING_OPTIONS)}setProjection(t){this.set(yt.PROJECTION,ct(t))}setTracking(t){this.set(yt.TRACKING,t)}setTrackingOptions(t){this.set(yt.TRACKING_OPTIONS,t)}},Bu=Oa});var te,Yn=R(()=>{te={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}});var Br,Oe,Yr=R(()=>{Br=class{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){let t=this.getColor();return new Br({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}},Oe=Br});function Uu(n,t,e,i,r,s,o){let a,l,h=(e-t)/i;if(h===1)a=t;else if(h===2)a=t,l=r;else if(h!==0){let c=n[t],u=n[t+1],d=0,m=[0];for(let f=t+i;f<e;f+=i){let g=n[f],_=n[f+1];d+=Math.sqrt((g-c)*(g-c)+(_-u)*(_-u)),m.push(d),c=g,u=_}let p=r*d,x=Ec(m,p);x<0?(l=(p-m[-x-2])/(m[-x-1]-m[-x-2]),a=t+(-x-2)*i):a=t+x*i}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=a===void 0?NaN:l===void 0?n[a+c]:ge(n[a+c],n[a+i+c],l);return s}function ju(n,t,e,i,r,s){if(e==t)return null;let o;if(r<n[t+i-1])return s?(o=n.slice(t,t+i),o[i-1]=r,o):null;if(n[e-1]<r)return s?(o=n.slice(e-i,e),o[i-1]=r,o):null;if(r==n[t+i-1])return n.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){let d=a+l>>1;r<n[(d+1)*i-1]?l=d:a=d+1}let h=n[a*i-1];if(r==h)return n.slice((a-1)*i,(a-1)*i+i);let c=n[(a+1)*i-1],u=(r-h)/(c-h);o=[];for(let d=0;d<i-1;++d)o.push(ge(n[(a-1)*i+d],n[a*i+d],u));return o.push(r),o}var Ku=R(()=>{vt();pt()});function eo(n,t,e,i){let r=n[t],s=n[t+1],o=0;for(let a=t+i;a<e;a+=i){let l=n[a],h=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(h-s)*(h-s)),r=l,s=h}return o}var Da=R(()=>{});var Un,Fa,Vu=R(()=>{Xn();Ks();st();Gr();Xr();vt();wa();Wr();Ku();Qs();Da();Un=class extends bi{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?ji(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){let t=new Un(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<An(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))}forEachSegment(t){return Js(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,ju(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return je(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Uu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){let e=[];return e.length=Vs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Un(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return $s(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Nr(this.flatCoordinates,0,t,this.stride),this.changed()}},Fa=Un});var Ur,De,io=R(()=>{Ur=class{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){let t=this.getColor();return new Ur({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}},De=Ur});var it,Oi=R(()=>{it={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}});function ka(n){return n[0]>0&&n[1]>0}function Zu(n,t,e){return e===void 0&&(e=[0,0]),e[0]=n[0]*t+.5|0,e[1]=n[1]*t+.5|0,e}function Mt(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}var Di=R(()=>{});var jr,no,Na=R(()=>{gt();Di();jr=class{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Mt(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new jr({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Q()}getImage(t){return Q()}getHitDetectionImage(){return Q()}getPixelRatio(t){return 1}getImageState(){return Q()}getImageSize(){return Q()}getOrigin(){return Q()}getSize(){return Q()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Mt(t)}listenImageChange(t){Q()}load(){Q()}unlistenImageChange(t){Q()}},no=jr});function ro(n){return typeof n=="string"?n:Ga(n)}function Mm(n){let t=document.createElement("div");if(t.style.color=n,t.style.color!==""){document.body.appendChild(t);let e=getComputedStyle(t).color;return document.body.removeChild(t),e}else return""}function en(n){return Array.isArray(n)?n:Pm(n)}function Om(n){let t,e,i,r,s;if(Am.exec(n)&&(n=Mm(n)),bm.exec(n)){let o=n.length-1,a;o<=4?a=1:a=2;let l=o===4||o===8;t=parseInt(n.substr(1+0*a,a),16),e=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),l?r=parseInt(n.substr(1+3*a,a),16):r=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[t,e,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),Hu(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),Hu(s)):K(!1,14);return s}function Hu(n){return n[0]=V(n[0]+.5|0,0,255),n[1]=V(n[1]+.5|0,0,255),n[2]=V(n[2]+.5|0,0,255),n[3]=V(n[3],0,1),n}function Ga(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);let r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+t+","+e+","+i+","+r+")"}var bm,Am,Pm,nn=R(()=>{wt();pt();bm=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Am=/^([a-z]*)$|^hsla?\(.*\)$/i;Pm=function(){let t={},e=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){let s=0;for(let o in t)(s++&3)===0&&(delete t[o],--e)}r=Om(i),t[i]=r,++e}return r}}()});function ee(n){return Array.isArray(n)?Ga(n):n}var Kr=R(()=>{nn()});function xt(n,t,e,i){let r;return e&&e.length?r=e.shift():Ln?r=new OffscreenCanvas(n||300,t||300):r=document.createElement("canvas"),n&&(r.width=n),t&&(r.height=t),r.getContext("2d",i)}function jn(n){let t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function qu(n){let t=n.offsetWidth,e=getComputedStyle(n);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function Ju(n){let t=n.offsetHeight,e=getComputedStyle(n);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function Xa(n,t){let e=t.parentNode;e&&e.replaceChild(n,t)}function rn(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function so(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function $u(n,t){let e=n.childNodes;for(let i=0;;++i){let r=e[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}var kt=R(()=>{li()});var Vr,td,Fi,Kn,Wa,Dm,Qu,za,sn=R(()=>{Vr="ol-hidden",td="ol-selectable",Fi="ol-unselectable",Kn="ol-control",Wa="ol-collapsed",Dm=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Qu=["style","variant","weight","size","lineHeight","family"],za=function(n){let t=n.match(Dm);if(!t)return null;let e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Qu.length;i<r;++i){let s=t[i+1];s!==void 0&&(e[Qu[i]]=s)}return e.families=e.family.split(/,\s?/),e}});function id(n,t){return Vn||(Vn=xt(1,1)),n!=Ba&&(Vn.font=n,Ba=Vn.font),Vn.measureText(t)}function oo(n,t){return id(n,t).width}function Ua(n,t,e){if(t in e)return e[t];let i=t.split(`
`).reduce((r,s)=>Math.max(r,oo(n,s)),0);return e[t]=i,i}function nd(n,t){let e=[],i=[],r=[],s=0,o=0,a=0,l=0;for(let h=0,c=t.length;h<=c;h+=2){let u=t[h];if(u===`
`||h===c){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}let d=t[h+1]||n.font,m=oo(d,u);e.push(m),o+=m;let p=Fm(d);i.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:e,heights:i,lineWidths:r}}function rd(n,t,e,i,r,s,o,a,l,h,c){n.save(),e!==1&&(n.globalAlpha*=e),t&&n.setTransform.apply(n,t),i.contextInstructions?(n.translate(l,h),n.scale(c[0],c[1]),km(i,n)):c[0]<0||c[1]<0?(n.translate(l,h),n.scale(c[0],c[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,h,o*c[0],a*c[1]),n.restore()}function km(n,t){let e=n.contextInstructions;for(let i=0,r=e.length;i<r;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}var ao,ie,on,ui,di,Ve,fi,gi,ki,an,mi,pi,Ke,Vn,Ba,Ya,ed,Fm,_i=R(()=>{Vt();li();Be();kt();sn();ao="10px sans-serif",ie="#000",on="round",ui=[],di=0,Ve="round",fi=10,gi="#000",ki="center",an="middle",mi=[0,0,0,0],pi=1,Ke=new ut,Vn=null,Ya={},ed=function(){let t="32px ",e=["monospace","serif"],i=e.length,r="wmytzilWMYTZIL@#/&?$%10\uF013",s,o;function a(h,c,u){let d=!0;for(let m=0;m<i;++m){let p=e[m];if(o=oo(h+" "+c+" "+t+p,r),u!=p){let x=oo(h+" "+c+" "+t+u+","+p,r);d=d&&x!=o}}return!!d}function l(){let h=!0,c=Ke.getKeys();for(let u=0,d=c.length;u<d;++u){let m=c[u];Ke.get(m)<100&&(a.apply(this,m.split(`
`))?(ze(Ya),Vn=null,Ba=void 0,Ke.set(m,100)):(Ke.set(m,Ke.get(m)+1,!0),h=!1))}h&&(clearInterval(s),s=void 0)}return function(h){let c=za(h);if(!c)return;let u=c.families;for(let d=0,m=u.length;d<m;++d){let p=u[d],x=c.style+`
`+c.weight+`
`+p;Ke.get(x)===void 0&&(Ke.set(x,100,!0),a(c.style,c.weight,p)||(Ke.set(x,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),Fm=function(){let n;return function(t){let e=Ya[t];if(e==null){if(Ln){let i=za(t),r=id(t,"\u017Dg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);Ya[t]=e}return e}}()});var Zr,lo,ja=R(()=>{Oi();Na();nn();Kr();kt();_i();Zr=class extends no{constructor(t){let e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){let t=this.getScale(),e=new Zr({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){let t=this.size_;if(!t)return null;let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){let i=this.renderOptions_,r=xt(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return it.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){let v=r;r=s,s=v}let o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),h=Math.sqrt(s*s-l*l),c=r-h,u=Math.sqrt(l*l+c*c),d=u/l;if(t==="miter"&&d<=i)return d*e;let m=e/2/d,p=e/2*(c/u),f=Math.sqrt((r+m)*(r+m)+p*p)-r;if(this.radius2_===void 0||t==="bevel")return f*2;let g=r*Math.sin(a),_=Math.sqrt(r*r-g*g),y=s-_,C=Math.sqrt(g*g+y*y)/g;if(C<=i){let v=C*e/2-s-r;return 2*Math.max(f,v)}return f*2}createRenderOptions(){let t=Ve,e=0,i=null,r=0,s,o=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=gi),s=ee(s),o=this.stroke_.getWidth(),o===void 0&&(o=pi),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Ve),e=this.stroke_.getMiterLimit(),e===void 0&&(e=fi));let a=this.calculateLineJoinSize_(t,o,e),l=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*l+a);return{strokeStyle:s,strokeWidth:o,size:h,lineDash:i,lineDashOffset:r,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let r=this.fill_.getColor();r===null&&(r=ie),e.fillStyle=ee(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=en(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){let r=xt(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{let r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);let s=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){let l=s+a*o,h=a%2===0?i:r;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=ie,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},lo=Zr});var Hr,qr,Ka=R(()=>{ja();Hr=class extends lo{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){let t=this.getScale(),e=new Hr({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}},qr=Hr});var od={};We(od,{createDefaultStyle:()=>Ha,createEditingStyle:()=>Nm,default:()=>He,toFunction:()=>Za});function Za(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(K(typeof n.getZIndex=="function",41),e=[n]),t=function(){return e}}return t}function Ha(n,t){if(!Va){let e=new Oe({color:"rgba(255,255,255,0.4)"}),i=new De({color:"#3399CC",width:1.25});Va=[new Ze({image:new qr({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return Va}function Nm(){let n={},t=[255,255,255,1],e=[0,153,255,1],i=3;return n.Polygon=[new Ze({fill:new Oe({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new Ze({stroke:new De({color:t,width:i+2})}),new Ze({stroke:new De({color:e,width:i})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new Ze({image:new qr({radius:i*2,fill:new Oe({color:e}),stroke:new De({color:t,width:i/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function sd(n){return n.getGeometry()}var Ze,Va,He,Jr=R(()=>{Ka();Yr();io();wt();Ze=class{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=sd,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Ze({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=sd,this.geometry_=t}setZIndex(t){this.zIndex_=t}};Va=null;He=Ze});var Gm,$r,Qr,qa=R(()=>{Yr();Di();Gm="#333",$r=class{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Mt(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Oe({color:Gm}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){let t=this.getScale();return new $r({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Mt(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}},Qr=$r});var ht,Ja=R(()=>{ht={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}});var $a,ho,Qa=R(()=>{Vt();Ja();gt();wt();pt();$a=class extends ut{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;let e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[ht.OPACITY]=t.opacity!==void 0?t.opacity:1,K(typeof e[ht.OPACITY]=="number",64),e[ht.VISIBLE]=t.visible!==void 0?t.visible:!0,e[ht.Z_INDEX]=t.zIndex,e[ht.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[ht.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[ht.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[ht.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){let e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=V(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Q()}getLayerStatesArray(t){return Q()}getExtent(){return this.get(ht.EXTENT)}getMaxResolution(){return this.get(ht.MAX_RESOLUTION)}getMinResolution(){return this.get(ht.MIN_RESOLUTION)}getMinZoom(){return this.get(ht.MIN_ZOOM)}getMaxZoom(){return this.get(ht.MAX_ZOOM)}getOpacity(){return this.get(ht.OPACITY)}getSourceState(){return Q()}getVisible(){return this.get(ht.VISIBLE)}getZIndex(){return this.get(ht.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(ht.EXTENT,t)}setMaxResolution(t){this.set(ht.MAX_RESOLUTION,t)}setMinResolution(t){this.set(ht.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(ht.MAX_ZOOM,t)}setMinZoom(t){this.set(ht.MIN_ZOOM,t)}setOpacity(t){K(typeof t=="number",64),this.set(ht.OPACITY,t)}setVisible(t){this.set(ht.VISIBLE,t)}setZIndex(t){this.set(ht.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},ho=$a});function Zn(n,t){if(!n.visible)return!1;let e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;let i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}var tl,ln,hn=R(()=>{Qa();ft();Ja();Yn();wt();oe();tl=class extends ho{constructor(t){let e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(ht.SOURCE,this.handleSourcePropertyChange_);let i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(ht.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(rt(this.sourceChangeKey_),this.sourceChangeKey_=null);let t=this.getSource();t&&(this.sourceChangeKey_=$(t,G.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(e=>e([]))}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}render(t,e){let i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(ht.MAP,t)}getMapInternal(){return this.get(ht.MAP)}setMap(t){this.mapPrecomposeKey_&&(rt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(rt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=$(t,te.PRECOMPOSE,function(e){let r=e.frameState.layerStatesArray,s=this.getLayerState(!1);K(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=$(this,G.CHANGE,t.render,t),this.changed())}setSource(t){this.set(ht.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};ln=tl});var nl=Ho((el,il)=>{(function(n,t){typeof el=="object"&&typeof il<"u"?il.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self).RBush=t()})(el,function(){"use strict";function n(f,g,_,y,E){(function C(v,w,P,O,k){for(;O>P;){if(O-P>600){var N=O-P+1,z=w-P+1,X=Math.log(N),at=.5*Math.exp(2*X/3),Z=.5*Math.sqrt(X*at*(N-at)/N)*(z-N/2<0?-1:1),b=Math.max(P,Math.floor(w-z*at/N+Z)),T=Math.min(O,Math.floor(w+(N-z)*at/N+Z));C(v,w,b,T,k)}var L=v[w],M=P,D=O;for(t(v,P,w),k(v[O],L)>0&&t(v,P,O);M<D;){for(t(v,M,D),M++,D--;k(v[M],L)<0;)M++;for(;k(v[D],L)>0;)D--}k(v[P],L)===0?t(v,P,D):t(v,++D,O),D<=w&&(P=D+1),w<=D&&(O=D-1)}})(f,g,_||0,y||f.length-1,E||e)}function t(f,g,_){var y=f[g];f[g]=f[_],f[_]=y}function e(f,g){return f<g?-1:f>g?1:0}var i=function(f){f===void 0&&(f=9),this._maxEntries=Math.max(4,f),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(f,g,_){if(!_)return g.indexOf(f);for(var y=0;y<g.length;y++)if(_(f,g[y]))return y;return-1}function s(f,g){o(f,0,f.children.length,g,f)}function o(f,g,_,y,E){E||(E=p(null)),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0;for(var C=g;C<_;C++){var v=f.children[C];a(E,f.leaf?y(v):v)}return E}function a(f,g){return f.minX=Math.min(f.minX,g.minX),f.minY=Math.min(f.minY,g.minY),f.maxX=Math.max(f.maxX,g.maxX),f.maxY=Math.max(f.maxY,g.maxY),f}function l(f,g){return f.minX-g.minX}function h(f,g){return f.minY-g.minY}function c(f){return(f.maxX-f.minX)*(f.maxY-f.minY)}function u(f){return f.maxX-f.minX+(f.maxY-f.minY)}function d(f,g){return f.minX<=g.minX&&f.minY<=g.minY&&g.maxX<=f.maxX&&g.maxY<=f.maxY}function m(f,g){return g.minX<=f.maxX&&g.minY<=f.maxY&&g.maxX>=f.minX&&g.maxY>=f.minY}function p(f){return{children:f,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(f,g,_,y,E){for(var C=[g,_];C.length;)if(!((_=C.pop())-(g=C.pop())<=y)){var v=g+Math.ceil((_-g)/y/2)*y;n(f,v,g,_,E),C.push(g,v,v,_)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(f){var g=this.data,_=[];if(!m(f,g))return _;for(var y=this.toBBox,E=[];g;){for(var C=0;C<g.children.length;C++){var v=g.children[C],w=g.leaf?y(v):v;m(f,w)&&(g.leaf?_.push(v):d(f,w)?this._all(v,_):E.push(v))}g=E.pop()}return _},i.prototype.collides=function(f){var g=this.data;if(!m(f,g))return!1;for(var _=[];g;){for(var y=0;y<g.children.length;y++){var E=g.children[y],C=g.leaf?this.toBBox(E):E;if(m(f,C)){if(g.leaf||d(f,C))return!0;_.push(E)}}g=_.pop()}return!1},i.prototype.load=function(f){if(!f||!f.length)return this;if(f.length<this._minEntries){for(var g=0;g<f.length;g++)this.insert(f[g]);return this}var _=this._build(f.slice(),0,f.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var y=this.data;this.data=_,_=y}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},i.prototype.insert=function(f){return f&&this._insert(f,this.data.height-1),this},i.prototype.clear=function(){return this.data=p([]),this},i.prototype.remove=function(f,g){if(!f)return this;for(var _,y,E,C=this.data,v=this.toBBox(f),w=[],P=[];C||w.length;){if(C||(C=w.pop(),y=w[w.length-1],_=P.pop(),E=!0),C.leaf){var O=r(f,C.children,g);if(O!==-1)return C.children.splice(O,1),w.push(C),this._condense(w),this}E||C.leaf||!d(C,v)?y?(_++,C=y.children[_],E=!1):C=null:(w.push(C),P.push(_),_=0,y=C,C=C.children[0])}return this},i.prototype.toBBox=function(f){return f},i.prototype.compareMinX=function(f,g){return f.minX-g.minX},i.prototype.compareMinY=function(f,g){return f.minY-g.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(f){return this.data=f,this},i.prototype._all=function(f,g){for(var _=[];f;)f.leaf?g.push.apply(g,f.children):_.push.apply(_,f.children),f=_.pop();return g},i.prototype._build=function(f,g,_,y){var E,C=_-g+1,v=this._maxEntries;if(C<=v)return s(E=p(f.slice(g,_+1)),this.toBBox),E;y||(y=Math.ceil(Math.log(C)/Math.log(v)),v=Math.ceil(C/Math.pow(v,y-1))),(E=p([])).leaf=!1,E.height=y;var w=Math.ceil(C/v),P=w*Math.ceil(Math.sqrt(v));x(f,g,_,P,this.compareMinX);for(var O=g;O<=_;O+=P){var k=Math.min(O+P-1,_);x(f,O,k,w,this.compareMinY);for(var N=O;N<=k;N+=w){var z=Math.min(N+w-1,k);E.children.push(this._build(f,N,z,y-1))}}return s(E,this.toBBox),E},i.prototype._chooseSubtree=function(f,g,_,y){for(;y.push(g),!g.leaf&&y.length-1!==_;){for(var E=1/0,C=1/0,v=void 0,w=0;w<g.children.length;w++){var P=g.children[w],O=c(P),k=(N=f,z=P,(Math.max(z.maxX,N.maxX)-Math.min(z.minX,N.minX))*(Math.max(z.maxY,N.maxY)-Math.min(z.minY,N.minY))-O);k<C?(C=k,E=O<E?O:E,v=P):k===C&&O<E&&(E=O,v=P)}g=v||g.children[0]}var N,z;return g},i.prototype._insert=function(f,g,_){var y=_?f:this.toBBox(f),E=[],C=this._chooseSubtree(y,this.data,g,E);for(C.children.push(f),a(C,y);g>=0&&E[g].children.length>this._maxEntries;)this._split(E,g),g--;this._adjustParentBBoxes(y,E,g)},i.prototype._split=function(f,g){var _=f[g],y=_.children.length,E=this._minEntries;this._chooseSplitAxis(_,E,y);var C=this._chooseSplitIndex(_,E,y),v=p(_.children.splice(C,_.children.length-C));v.height=_.height,v.leaf=_.leaf,s(_,this.toBBox),s(v,this.toBBox),g?f[g-1].children.push(v):this._splitRoot(_,v)},i.prototype._splitRoot=function(f,g){this.data=p([f,g]),this.data.height=f.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(f,g,_){for(var y,E,C,v,w,P,O,k=1/0,N=1/0,z=g;z<=_-g;z++){var X=o(f,0,z,this.toBBox),at=o(f,z,_,this.toBBox),Z=(E=X,C=at,v=void 0,w=void 0,P=void 0,O=void 0,v=Math.max(E.minX,C.minX),w=Math.max(E.minY,C.minY),P=Math.min(E.maxX,C.maxX),O=Math.min(E.maxY,C.maxY),Math.max(0,P-v)*Math.max(0,O-w)),b=c(X)+c(at);Z<k?(k=Z,y=z,N=b<N?b:N):Z===k&&b<N&&(N=b,y=z)}return y||_-g},i.prototype._chooseSplitAxis=function(f,g,_){var y=f.leaf?this.compareMinX:l,E=f.leaf?this.compareMinY:h;this._allDistMargin(f,g,_,y)<this._allDistMargin(f,g,_,E)&&f.children.sort(y)},i.prototype._allDistMargin=function(f,g,_,y){f.children.sort(y);for(var E=this.toBBox,C=o(f,0,g,E),v=o(f,_-g,_,E),w=u(C)+u(v),P=g;P<_-g;P++){var O=f.children[P];a(C,f.leaf?E(O):O),w+=u(C)}for(var k=_-g-1;k>=g;k--){var N=f.children[k];a(v,f.leaf?E(N):N),w+=u(v)}return w},i.prototype._adjustParentBBoxes=function(f,g,_){for(var y=_;y>=0;y--)a(g[y],f)},i.prototype._condense=function(f){for(var g=f.length-1,_=void 0;g>=0;g--)f[g].children.length===0?g>0?(_=f[g-1].children).splice(_.indexOf(f[g]),1):this.clear():s(f[g],this.toBBox)},i})});function ad(n,t,e){let i=e?ro(e):"null";return t+":"+n+":"+i}var rl,Hn,sl=R(()=>{nn();rl=class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(let e in this.cache_){let i=this.cache_[e];(t++&3)===0&&!i.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){let r=ad(t,e,i);return r in this.cache_?this.cache_[r]:null}set(t,e,i,r){let s=ad(t,e,i);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};Hn=new rl});var ol,qn,co=R(()=>{Tn();ft();gt();ol=class extends Ye{constructor(t,e,i,r){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=r}changed(){this.dispatchEvent(G.CHANGE)}getExtent(){return this.extent}getImage(){return Q()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){Q()}},qn=ol});function ts(n,t,e){let i=n,r=!0,s=!1,o=!1,a=[Rn(i,G.LOAD,function(){o=!0,s||t()})];return i.src&&Mc?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():e())})):a.push(Rn(i,G.ERROR,e)),function(){r=!1,a.forEach(rt)}}var al,ld,uo=R(()=>{ft();co();Oi();li();st();oe();al=class extends qn{constructor(t,e,i,r,s,o){super(t,e,i,it.IDLE),this.src_=r,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.state=it.IDLE,this.imageLoadFunction_=o}getImage(){return this.image_}handleImageError_(){this.state=it.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){this.resolution===void 0&&(this.resolution=At(this.extent)/this.image_.height),this.state=it.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==it.IDLE||this.state==it.ERROR)&&(this.state=it.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=ts(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=At(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};ld=al});function hd(n,t,e,i,r,s){let o=Hn.get(t,i,s);return o||(o=new ll(n,t,e,i,r,s),Hn.set(t,i,s,o)),o}var es,ll,cd=R(()=>{Tn();ft();Oi();nn();kt();sl();uo();es=null,ll=class extends Ye{constructor(t,e,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===it.LOADED){es||(es=xt(1,1)),es.drawImage(this.image_,0,0);try{es.getImageData(0,0,1,1),this.tainted_=!1}catch{es=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(G.CHANGE)}handleImageError_(){this.imageState_=it.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=it.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let t=this.size_[0],e=this.size_[1],i=xt(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===it.IDLE){this.image_||this.initializeImage_(),this.imageState_=it.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=ts(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==it.LOADED)return;let e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);let r=i.getContext("2d");r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=ro(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}});var ud={};We(ud,{default:()=>Jn});var is,Jn,fo=R(()=>{ft();Oi();Na();nn();wt();cd();gt();is=class extends no{constructor(t){t=t||{};let e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;let o=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let a=t.src;K(!(a!==void 0&&o),4),K(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||H(o)),K(a!==void 0&&a.length>0,6);let l=t.src!==void 0?it.IDLE:it.LOADED;this.color_=t.color!==void 0?en(t.color):null,this.iconImage_=hd(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null}clone(){let t=this.getScale();return new is({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){let e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(G.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(G.CHANGE,t)}},Jn=is});function hl(n){return new He({fill:ns(n,""),stroke:rs(n,""),text:Xm(n),image:Wm(n)})}function ns(n,t){let e=n[t+"fill-color"];if(!!e)return new Oe({color:e})}function rs(n,t){let e=n[t+"stroke-width"],i=n[t+"stroke-color"];if(!(!e&&!i))return new De({width:e,color:i,lineCap:n[t+"stroke-line-cap"],lineJoin:n[t+"stroke-line-join"],lineDash:n[t+"stroke-line-dash"],lineDashOffset:n[t+"stroke-line-dash-offset"],miterLimit:n[t+"stroke-miter-limit"]})}function Xm(n){let t=n["text-value"];return t?new Qr({text:t,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:ns(n,"text-"),backgroundFill:ns(n,"text-background-"),stroke:rs(n,"text-"),backgroundStroke:rs(n,"text-background-")}):void 0}function Wm(n){let t=n["icon-src"],e=n["icon-img"];if(t||e)return new Jn({src:t,img:e,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});let i=n["shape-points"];if(i){let s="shape-";return new lo({points:i,fill:ns(n,s),stroke:rs(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}let r=n["circle-radius"];if(r){let s="circle-";return new qr({radius:r,fill:ns(n,s),stroke:rs(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}var dd=R(()=>{Ka();Yr();fo();ja();io();Jr();qa()});var gd,fd,cl,md,pd=R(()=>{hn();gd=yr(nl(),1);Jr();dd();fd={RENDER_ORDER:"renderOrder"},cl=class extends ln{constructor(t){t=t||{};let e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(fd.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new gd.default(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(fd.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=Ha;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof He)e=t;else if(Array.isArray(t)){let i=t.length,r=new Array(i);for(let s=0;s<i;++s){let o=t[s];o instanceof He?r[s]=o:r[s]=hl(o)}e=r}else e=hl(t);this.style_=e,this.styleFunction_=t===null?void 0:Za(this.style_),this.changed()}},md=cl});var ss,os,qe,xi,ul,j,cn=R(()=>{ss={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},os=[ss.FILL],qe=[ss.STROKE],xi=[ss.BEGIN_PATH],ul=[ss.CLOSE_PATH],j=ss});var dl,go,fl=R(()=>{dl=class{drawCustom(t,e,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}},go=dl});var gl,Je,$n=R(()=>{cn();ia();fl();Kr();st();_i();vt();Wr();gl=class extends go{constructor(t,e,i,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){let e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){let i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates,o=s.length;for(let a=0,l=t.length;a<l;a+=e)r[0]=t[a],r[1]=t[a+1],ae(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,e,i,r,s,o){let a=this.coordinates,l=a.length,h=this.getBufferedMaxExtent();o&&(e+=r);let c=t[e],u=t[e+1],d=this.tmpCoordinate_,m=!0,p,x,f;for(p=e+r;p<i;p+=r)d[0]=t[p],d[1]=t[p+1],f=bs(h,d),f!==x?(m&&(a[l++]=c,a[l++]=u,m=!1),a[l++]=d[0],a[l++]=d[1]):f===St.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],m=!1):m=!0,c=d[0],u=d[1],x=f;return(s&&m||p===e+r)&&(a[l++]=c,a[l++]=u),l}drawCustomCoordinates_(t,e,i,r,s){for(let o=0,a=i.length;o<a;++o){let l=i[o],h=this.appendFlatLineCoordinates(t,e,l,r,!1,!1);s.push(h),e=l}return e}drawCustom(t,e,i,r){this.beginGeometry(t,e);let s=t.getType(),o=t.getStride(),a=this.coordinates.length,l,h,c,u,d;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),u=[];let m=t.getEndss();d=0;for(let p=0,x=m.length;p<x;++p){let f=[];d=this.drawCustomCoordinates_(l,d,m[p],o,f),u.push(f)}this.instructions.push([j.CUSTOM,a,u,t,i,Sa]),this.hitDetectionInstructions.push([j.CUSTOM,a,u,t,r||i,Sa]);break;case"Polygon":case"MultiLineString":c=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),o,c),this.instructions.push([j.CUSTOM,a,c,t,i,Wn]),this.hitDetectionInstructions.push([j.CUSTOM,a,c,t,r||i,Wn]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([j.CUSTOM,a,h,t,i,je]),this.hitDetectionInstructions.push([j.CUSTOM,a,h,t,r||i,je]);break;case"MultiPoint":l=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(l,o),h>a&&(this.instructions.push([j.CUSTOM,a,h,t,i,je]),this.hitDetectionInstructions.push([j.CUSTOM,a,h,t,r||i,je]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),h=this.coordinates.length,this.instructions.push([j.CUSTOM,a,h,t,i]),this.hitDetectionInstructions.push([j.CUSTOM,a,h,t,r||i]);break;default:}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[j.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[j.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t=this.hitDetectionInstructions;t.reverse();let e,i=t.length,r,s,o=-1;for(e=0;e<i;++e)r=t[e],s=r[0],s==j.END_GEOMETRY?o=e:s==j.BEGIN_GEOMETRY&&(r[2]=e,Cc(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){let i=this.state;if(t){let r=t.getColor();i.fillStyle=ee(r||ie)}else i.fillStyle=void 0;if(e){let r=e.getColor();i.strokeStyle=ee(r||gi);let s=e.getLineCap();i.lineCap=s!==void 0?s:on;let o=e.getLineDash();i.lineDash=o?o.slice():ui;let a=e.getLineDashOffset();i.lineDashOffset=a||di;let l=e.getLineJoin();i.lineJoin=l!==void 0?l:Ve;let h=e.getWidth();i.lineWidth=h!==void 0?h:pi;let c=e.getMiterLimit();i.miterLimit=c!==void 0?c:fi,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){let e=t.fillStyle,i=[j.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[j.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){let i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){let i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!Kt(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let e=[j.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=As(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;bn(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},Je=gl});var ml,_d,xd=R(()=>{$n();cn();ml=class extends Je{constructor(t,e,i,r){super(t,e,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([j.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([j.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([j.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([j.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){let i=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},_d=ml});var pl,yd,Ed=R(()=>{$n();cn();_i();pl=class extends Je{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinates_(t,e,i,r){let s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,r,!1,!1),a=[j.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){let i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ui,di],xi);let o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(qe),this.endGeometry(e)}drawMultiLineString(t,e){let i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],xi);let o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride(),h=0;for(let c=0,u=o.length;c<u;++c)h=this.drawFlatCoordinates_(a,h,o[c],l);this.hitDetectionInstructions.push(qe),this.endGeometry(e)}finish(){let t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(qe),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(qe),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(xi)}},yd=pl});var _l,xl,Cd=R(()=>{$n();cn();_i();Xr();_l=class extends Je{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinatess_(t,e,i,r){let s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(xi),this.hitDetectionInstructions.push(xi);for(let h=0;h<l;++h){let c=i[h],u=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,c,r,!0,!a),m=[j.MOVE_TO_LINE_TO,u,d];this.instructions.push(m),this.hitDetectionInstructions.push(m),a&&(this.instructions.push(ul),this.hitDetectionInstructions.push(ul)),e=c}return o&&(this.instructions.push(os),this.hitDetectionInstructions.push(os)),a&&(this.instructions.push(qe),this.hitDetectionInstructions.push(qe)),e}drawCircle(t,e){let i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([j.SET_FILL_STYLE,ie]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);let h=[j.CIRCLE,l];this.instructions.push(xi,h),this.hitDetectionInstructions.push(xi,h),i.fillStyle!==void 0&&(this.instructions.push(os),this.hitDetectionInstructions.push(os)),i.strokeStyle!==void 0&&(this.instructions.push(qe),this.hitDetectionInstructions.push(qe)),this.endGeometry(e)}drawPolygon(t,e){let i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([j.SET_FILL_STYLE,ie]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e){let i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([j.SET_FILL_STYLE,ie]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([j.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride(),h=0;for(let c=0,u=o.length;c<u;++c)h=this.drawFlatCoordinatess_(a,h,o[c],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(t!==0){let e=this.coordinates;for(let i=0,r=e.length;i<r;++i)e[i]=Ai(e[i],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}},xl=_l});function Td(n,t,e,i,r){let s=e,o=e,a=0,l=0,h=e,c,u,d,m,p,x,f,g,_,y;for(u=e;u<i;u+=r){let E=t[u],C=t[u+1];p!==void 0&&(_=E-p,y=C-x,m=Math.sqrt(_*_+y*y),f!==void 0&&(l+=d,c=Math.acos((f*_+g*y)/(d*m)),c>n&&(l>a&&(a=l,s=h,o=u),l=0,h=u-r)),d=m,f=_,g=y),p=E,x=C}return l+=m,l>a?[h,u]:[s,o]}var Rd=R(()=>{});var Qn,yl,Sd,El=R(()=>{$n();cn();Kr();_i();gt();st();Rd();Qn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},yl=class extends Je{constructor(t,e,i,r){super(t,e,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){let i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;let o=this.coordinates,a=o.length,l=t.getType(),h=null,c=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!mt(this.getBufferedMaxExtent(),t.getExtent()))return;let u;if(h=t.getFlatCoordinates(),l=="LineString")u=[h.length];else if(l=="MultiLineString")u=t.getEnds();else if(l=="Polygon")u=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){let x=t.getEndss();u=[];for(let f=0,g=x.length;f<g;++f)u.push(x[f][0])}this.beginGeometry(t,e);let d=s.textAlign,m=0,p;for(let x=0,f=u.length;x<f;++x){if(d==null){let _=Td(s.maxAngle,h,m,u[x],c);m=_[0],p=_[1]}else p=u[x];for(let _=m;_<p;_+=c)o.push(h[_],h[_+1]);let g=o.length;m=u[x],this.drawChars_(a,g),a=g}this.endGeometry(e)}else{let u=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),s.overflow||u.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":let f=t.getFlatInteriorPoints();h=[];for(let g=0,_=f.length;g<_;g+=3)s.overflow||u.push(f[g+2]/this.resolution),h.push(f[g],f[g+1]);if(h.length===0)return;c=2;break;default:}let d=this.appendFlatPointCoordinates(h,c);if(d===a)return;if(u&&(d-a)/2!==h.length/c){let f=a/2;u=u.filter((g,_)=>{let y=o[(f+_)*2]===h[_*c]&&o[(f+_)*2+1]===h[_*c+1];return y||--f,y})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let m=s.padding;if(m!=mi&&(s.scale[0]<0||s.scale[1]<0)){let f=s.padding[0],g=s.padding[1],_=s.padding[2],y=s.padding[3];s.scale[0]<0&&(g=-g,y=-y),s.scale[1]<0&&(f=-f,_=-_),m=[f,g,_,y]}let p=this.pixelRatio;this.instructions.push([j.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,m==mi?mi:m.map(function(f){return f*p}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);let x=1/p;this.hitDetectionInstructions.push([j.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[x,x],NaN,void 0,this.declutterImageWithText_,m,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),this.endGeometry(e)}}saveTextStates_(){let t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));let s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||ki,justify:e.justify,textBaseline:e.textBaseline||an,scale:e.scale});let o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){let i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();let l=this.pixelRatio,h=Qn[r.textBaseline],c=this.textOffsetY_*l,u=this.text_,d=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([j.DRAW_CHARS,t,e,h,r.overflow,a,r.maxAngle,l,c,s,d*l,u,o,1]),this.hitDetectionInstructions.push([j.DRAW_CHARS,t,e,h,r.overflow,a,r.maxAngle,1,c,s,d,u,o,1/l])}setTextStyle(t,e){let i,r,s;if(!t)this.text_="";else{let o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=ee(o.getColor()||ie)):(r=null,this.textFillState_=r);let a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);let p=a.getLineDash(),x=a.getLineDashOffset(),f=a.getWidth(),g=a.getMiterLimit();s.lineCap=a.getLineCap()||on,s.lineDash=p?p.slice():ui,s.lineDashOffset=x===void 0?di:x,s.lineJoin=a.getLineJoin()||Ve,s.lineWidth=f===void 0?pi:f,s.miterLimit=g===void 0?fi:g,s.strokeStyle=ee(a.getColor()||gi)}i=this.textState_;let l=t.getFont()||ao;ed(l);let h=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||an,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||mi,i.scale=h===void 0?[1,1]:h;let c=t.getOffsetX(),u=t.getOffsetY(),d=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=m===void 0?0:m,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:H(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+H(r.fillStyle):""}this.declutterImageWithText_=e}},Sd=yl});var zm,Cl,Tl,Id=R(()=>{$n();xd();Ed();Cd();El();zm={Circle:xl,Default:Je,Image:_d,LineString:yd,Polygon:xl,Text:Sd},Cl=class{constructor(t,e,i,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){let t={};for(let e in this.buildersByZIndex_){t[e]=t[e]||{};let i=this.buildersByZIndex_[e];for(let r in i){let s=i[r].finish();t[e][r]=s}}return t}getBuilder(t,e){let i=t!==void 0?t.toString():"0",r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[e];if(s===void 0){let o=zm[e];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=s}return s}},Tl=Cl});var Rl,vd,Ld=R(()=>{ft();Oi();Rs();gt();Rl=class extends In{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Q()}getData(t){return null}prepareFrame(t){return Q()}renderFrame(t,e){return Q()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return function(r,s){let o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(e,r,s,o)}.bind(this)}forEachFeatureAtCoordinate(t,e,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===it.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=it.LOADED&&e!=it.ERROR&&t.addEventListener(G.CHANGE,this.boundHandleImageChange_),e==it.IDLE&&(t.load(),e=t.getState()),e==it.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},vd=Rl});var Sl,mo,Il=R(()=>{ve();Sl=class extends Rt{constructor(t,e,i,r){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=r}},mo=Sl});function Bm(){let n=document.createElement("canvas");n.width=1,n.height=1,tr=n.getContext("2d")}var Ll,tr,vl,po,wl=R(()=>{Ld();Il();Yn();be();nn();kt();vt();st();Ll=[],tr=null;vl=class extends vd{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Ft(),this.pixelTransform=Ft(),this.inversePixelTransform=Ft(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){tr||Bm(),tr.clearRect(0,0,1,1);let r;try{tr.drawImage(t,e,i,1,1,0,0,1,1),r=tr.getImageData(0,0,1,1).data}catch{return tr=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){let r=this.getLayer().getClassName(),s,o;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&Kt(en(t.style.backgroundColor),en(i)))){let a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=xt();let l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){let r=fe(i),s=Dn(i),o=On(i),a=Pn(i);_t(e.coordinateToPixelTransform,r),_t(e.coordinateToPixelTransform,s),_t(e.coordinateToPixelTransform,o),_t(e.coordinateToPixelTransform,a);let l=this.inversePixelTransform;_t(l,r),_t(l,s),_t(l,o),_t(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){let r=this.getLayer();if(r.hasListener(t)){let s=new mo(t,this.inversePixelTransform,i,e);r.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(te.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(te.POSTRENDER,t,e)}getRenderTransform(t,e,i,r,s,o,a){let l=s/2,h=o/2,c=r/e,u=-c,d=-t[0]+a,m=-t[1];return Yt(this.tempTransform,l,h,c,u,-i,d,m)}disposeInternal(){delete this.frameState,super.disposeInternal()}},po=vl});function wd(n,t,e,i,r,s,o,a,l,h,c,u){let d=n[t],m=n[t+1],p=0,x=0,f=0,g=0;function _(){p=d,x=m,t+=i,d=n[t],m=n[t+1],g+=f,f=Math.sqrt((d-p)*(d-p)+(m-x)*(m-x))}do _();while(t<e-i&&g+f<s);let y=f===0?0:(s-g)/f,E=ge(p,d,y),C=ge(x,m,y),v=t-i,w=g,P=s+a*l(h,r,c);for(;t<e-i&&g+f<P;)_();y=f===0?0:(P-g)/f;let O=ge(p,d,y),k=ge(x,m,y),N;if(u){let b=[E,C,O,k];js(b,0,4,2,u,b,b),N=b[0]>b[2]}else N=E>O;let z=Math.PI,X=[],at=v+i===t;t=v,f=0,g=w,d=n[t],m=n[t+1];let Z;if(at){_(),Z=Math.atan2(m-x,d-p),N&&(Z+=Z>0?-z:z);let b=(O+E)/2,T=(k+C)/2;return X[0]=[b,T,(P-s)/2,Z,r],X}r=r.replace(/\n/g," ");for(let b=0,T=r.length;b<T;){_();let L=Math.atan2(m-x,d-p);if(N&&(L+=L>0?-z:z),Z!==void 0){let q=L-Z;if(q+=q>z?-2*z:q<-z?2*z:0,Math.abs(q)>o)return null}Z=L;let M=b,D=0;for(;b<T;++b){let q=N?T-b-1:b,tt=a*l(h,r[q],c);if(t+i<e&&g+f<s+D+tt/2)break;D+=tt}if(b===M)continue;let Y=N?r.substring(T-M,T-b):r.substring(M,b);y=f===0?0:(s+D/2-g)/f;let A=ge(p,d,y),lt=ge(x,m,y);X.push([A,lt,D/2,L,Y]),s+=D}return X}var bd=R(()=>{pt();tn()});function Ad(n){return n[3].declutterBox}function Md(n,t){return(t==="start"||t==="end")&&!Ym.test(n)&&(t=t==="start"?"left":"right"),Qn[t]}function Um(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}var er,Ni,yi,Ei,Gi,Ym,bl,Pd,Od=R(()=>{cn();El();be();st();_i();bd();vt();Da();tn();er=bt(),Ni=[],yi=[],Ei=[],Gi=[];Ym=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");bl=class{constructor(t,e,i,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ft(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,r){let s=t+e+i+r;if(this.labels_[s])return this.labels_[s];let o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],h=this.pixelRatio,c=[l.scale[0]*h,l.scale[1]*h],u=Array.isArray(t),d=l.justify?Qn[l.justify]:Md(Array.isArray(t)?t[0]:t,l.textAlign||ki),m=r&&o.lineWidth?o.lineWidth:0,p=u?t:t.split(`
`).reduce(Um,[]),{width:x,height:f,widths:g,heights:_,lineWidths:y}=nd(l,p),E=x+m,C=[],v=(E+2)*c[0],w=(f+m)*c[1],P={width:v<0?Math.floor(v):Math.ceil(v),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:C};(c[0]!=1||c[1]!=1)&&C.push("scale",c),r&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",m),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),i&&C.push("fillStyle",a.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");let O=.5-d,k=d*E+O*m,N=[],z=[],X=0,at=0,Z=0,b=0,T;for(let L=0,M=p.length;L<M;L+=2){let D=p[L];if(D===`
`){at+=X,X=0,k=d*E+O*m,++b;continue}let Y=p[L+1]||l.font;Y!==T&&(r&&N.push("font",Y),i&&z.push("font",Y),T=Y),X=Math.max(X,_[Z]);let A=[D,k+O*g[Z]+d*(g[Z]-y[b]),.5*(m+X)+at];k+=g[Z],r&&N.push("strokeText",A),i&&z.push("fillText",A),++Z}return Array.prototype.push.apply(C,N),Array.prototype.push.apply(C,z),this.labels_[s]=P,P}replayTextBackground_(t,e,i,r,s,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,r,s,o,a,l,h,c,u,d,m,p,x,f){a*=d[0],l*=d[1];let g=i-a,_=r-l,y=s+h>t?t-h:s,E=o+c>e?e-c:o,C=p[3]+y*d[0]+p[1],v=p[0]+E*d[1]+p[2],w=g-p[3],P=_-p[0];(x||u!==0)&&(Ni[0]=w,Gi[0]=w,Ni[1]=P,yi[1]=P,yi[0]=w+C,Ei[0]=yi[0],Ei[1]=P+v,Gi[1]=Ei[1]);let O;return u!==0?(O=Yt(Ft(),i,r,1,1,u,-i,-r),_t(O,Ni),_t(O,yi),_t(O,Ei),_t(O,Gi),Ht(Math.min(Ni[0],yi[0],Ei[0],Gi[0]),Math.min(Ni[1],yi[1],Ei[1],Gi[1]),Math.max(Ni[0],yi[0],Ei[0],Gi[0]),Math.max(Ni[1],yi[1],Ei[1],Gi[1]),er)):Ht(Math.min(w,w+C),Math.min(P,P+v),Math.max(w,w+C),Math.max(P,P+v),er),m&&(g=Math.round(g),_=Math.round(_)),{drawImageX:g,drawImageY:_,drawImageW:y,drawImageH:E,originX:h,originY:c,declutterBox:{minX:er[0],minY:er[1],maxX:er[2],maxY:er[3],value:f},canvasTransform:O,scale:d}}replayImageOrLabel_(t,e,i,r,s,o,a){let l=!!(o||a),h=r.declutterBox,c=t.canvas,u=a?a[2]*r.scale[0]/2:0;return h.minX-u<=c.width/e&&h.maxX+u>=0&&h.minY-u<=c.height/e&&h.maxY+u>=0&&(l&&this.replayTextBackground_(t,Ni,yi,Ei,Gi,o,a),rd(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){let e=_t(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,r){let s=this.textStates[e],o=this.createLabel(t,e,r,i),a=this.strokeStates[i],l=this.pixelRatio,h=Md(Array.isArray(t)?t[0]:t,s.textAlign||ki),c=Qn[s.textBaseline||an],u=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],m=h*d+2*(.5-h)*u,p=c*o.height/l+2*(.5-c)*u;return{label:o,anchorX:m,anchorY:p}}execute_(t,e,i,r,s,o,a,l){let h;this.pixelCoordinates_&&Kt(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=_e(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Dc(this.renderedTransform_,i));let c=0,u=r.length,d=0,m,p,x,f,g,_,y,E,C,v,w,P,O=0,k=0,N=null,z=null,X=this.coordinateCache_,at=this.viewRotation_,Z=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,b={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:at},T=this.instructions!=r||this.overlaps?0:200,L,M,D,Y;for(;c<u;){let A=r[c];switch(A[0]){case j.BEGIN_GEOMETRY:L=A[1],Y=A[3],L.getGeometry()?a!==void 0&&!mt(a,Y.getExtent())?c=A[2]+1:++c:c=A[2];break;case j.BEGIN_PATH:O>T&&(this.fill_(t),O=0),k>T&&(t.stroke(),k=0),!O&&!k&&(t.beginPath(),f=NaN,g=NaN),++c;break;case j.CIRCLE:d=A[1];let q=h[d],tt=h[d+1],Dt=h[d+2],Wt=h[d+3],Et=Dt-q,he=Wt-tt,ot=Math.sqrt(Et*Et+he*he);t.moveTo(q+ot,tt),t.arc(q,tt,ot,0,2*Math.PI,!0),++c;break;case j.CLOSE_PATH:t.closePath(),++c;break;case j.CUSTOM:d=A[1],m=A[2];let Se=A[3],Ci=A[4],pn=A.length==6?A[5]:void 0;b.geometry=Se,b.feature=L,c in X||(X[c]=[]);let Ge=X[c];pn?pn(h,d,m,2,Ge):(Ge[0]=h[d],Ge[1]=h[d+1],Ge.length=2),Ci(Ge,b),++c;break;case j.DRAW_IMAGE:d=A[1],m=A[2],E=A[3],p=A[4],x=A[5];let Yi=A[6],Xe=A[7],_n=A[8],Ui=A[9],Tt=A[10],Ti=A[11],Ri=A[12],F=A[13],S=A[14],I=A[15];if(!E&&A.length>=20){C=A[19],v=A[20],w=A[21],P=A[22];let ne=this.drawLabelWithPointPlacement_(C,v,w,P);E=ne.label,A[3]=E;let xn=A[23];p=(ne.anchorX-xn)*this.pixelRatio,A[4]=p;let ce=A[24];x=(ne.anchorY-ce)*this.pixelRatio,A[5]=x,Yi=E.height,A[6]=Yi,F=E.width,A[13]=F}let B;A.length>25&&(B=A[25]);let U,J,Ct;A.length>17?(U=A[16],J=A[17],Ct=A[18]):(U=mi,J=!1,Ct=!1),Tt&&Z?Ti+=at:!Tt&&!Z&&(Ti-=at);let zt=0;for(;d<m;d+=2){if(B&&B[zt++]<F/this.pixelRatio)continue;let ne=this.calculateImageOrLabelDimensions_(E.width,E.height,h[d],h[d+1],F,Yi,p,x,_n,Ui,Ti,Ri,s,U,J||Ct,L),xn=[t,e,E,ne,Xe,J?N:null,Ct?z:null];if(l){if(S==="none")continue;if(S==="obstacle"){l.insert(ne.declutterBox);continue}else{let ce,ni;if(I){let re=m-d;if(!I[re]){I[re]=xn;continue}if(ce=I[re],delete I[re],ni=Ad(ce),l.collides(ni))continue}if(l.collides(ne.declutterBox))continue;ce&&(l.insert(ni),this.replayImageOrLabel_.apply(this,ce)),l.insert(ne.declutterBox)}}this.replayImageOrLabel_.apply(this,xn)}++c;break;case j.DRAW_CHARS:let Gt=A[1],nt=A[2],Ie=A[3],fr=A[4];P=A[5];let Vo=A[6],xs=A[7],gr=A[8];w=A[9];let mr=A[10];C=A[11],v=A[12];let pc=[A[13],A[13]],Zo=this.textStates[v],pr=Zo.font,_r=[Zo.scale[0]*xs,Zo.scale[1]*xs],xr;pr in this.widths_?xr=this.widths_[pr]:(xr={},this.widths_[pr]=xr);let _c=eo(h,Gt,nt,2),xc=Math.abs(_r[0])*Ua(pr,C,xr);if(fr||xc<=_c){let ne=this.textStates[v].textAlign,xn=(_c-xc)*Qn[ne],ce=wd(h,Gt,nt,2,C,xn,Vo,Math.abs(_r[0]),Ua,pr,xr,Z?0:this.viewRotation_);t:if(ce){let ni=[],re,ys,Es,jt,ue;if(w)for(re=0,ys=ce.length;re<ys;++re){ue=ce[re],Es=ue[4],jt=this.createLabel(Es,v,"",w),p=ue[2]+(_r[0]<0?-mr:mr),x=Ie*jt.height+(.5-Ie)*2*mr*_r[1]/_r[0]-gr;let ri=this.calculateImageOrLabelDimensions_(jt.width,jt.height,ue[0],ue[1],jt.width,jt.height,p,x,0,0,ue[3],pc,!1,mi,!1,L);if(l&&l.collides(ri.declutterBox))break t;ni.push([t,e,jt,ri,1,null,null])}if(P)for(re=0,ys=ce.length;re<ys;++re){ue=ce[re],Es=ue[4],jt=this.createLabel(Es,v,P,""),p=ue[2],x=Ie*jt.height-gr;let ri=this.calculateImageOrLabelDimensions_(jt.width,jt.height,ue[0],ue[1],jt.width,jt.height,p,x,0,0,ue[3],pc,!1,mi,!1,L);if(l&&l.collides(ri.declutterBox))break t;ni.push([t,e,jt,ri,1,null,null])}l&&l.load(ni.map(Ad));for(let ri=0,im=ni.length;ri<im;++ri)this.replayImageOrLabel_.apply(this,ni[ri])}}++c;break;case j.END_GEOMETRY:if(o!==void 0){L=A[1];let ne=o(L,Y);if(ne)return ne}++c;break;case j.FILL:T?O++:this.fill_(t),++c;break;case j.MOVE_TO_LINE_TO:for(d=A[1],m=A[2],M=h[d],D=h[d+1],_=M+.5|0,y=D+.5|0,(_!==f||y!==g)&&(t.moveTo(M,D),f=_,g=y),d+=2;d<m;d+=2)M=h[d],D=h[d+1],_=M+.5|0,y=D+.5|0,(d==m-2||_!==f||y!==g)&&(t.lineTo(M,D),f=_,g=y);++c;break;case j.SET_FILL_STYLE:N=A,this.alignFill_=A[2],O&&(this.fill_(t),O=0,k&&(t.stroke(),k=0)),t.fillStyle=A[1],++c;break;case j.SET_STROKE_STYLE:z=A,k&&(t.stroke(),k=0),this.setStrokeStyle_(t,A),++c;break;case j.STROKE:T?k++:t.stroke(),++c;break;default:++c;break}}O&&this.fill_(t),k&&t.stroke()}execute(t,e,i,r,s,o){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,e,i,r,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,s)}},Pd=bl});function jm(n){if(Ml[n]!==void 0)return Ml[n];let t=n*2+1,e=n*n,i=new Array(e+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){let a=s*s+o*o;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+s)*t+(n+o))*4+3),s>0&&l.push(((n-s)*t+(n+o))*4+3),o>0&&(l.push(((n+s)*t+(n-o))*4+3),s>0&&l.push(((n-s)*t+(n-o))*4+3))}let r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return Ml[n]=r,r}var Al,Pl,Ml,Ol,Dd=R(()=>{Od();st();be();kt();Be();vt();tn();Al=["Polygon","Circle","LineString","Image","Text","Default"],Pl=class{constructor(t,e,i,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ft(),this.createExecutors_(s)}clip(t,e){let i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(let e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);let r=t[e];for(let s in r){let o=r[s];i[s]=new Pd(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(let e in this.executorsByZIndex_){let i=this.executorsByZIndex_[e];for(let r=0,s=t.length;r<s;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,r,s,o){r=Math.round(r);let a=r*2+1,l=Yt(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=xt(a,a));let c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):h||c.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=bt(),Ki(u,t),bn(u,e*(this.renderBuffer_+r),u));let d=jm(r),m;function p(C,v){let w=c.getImageData(0,0,a,a).data;for(let P=0,O=d.length;P<O;P++)if(w[d[P]]>0){if(!o||m!=="Image"&&m!=="Text"||o.includes(C)){let k=(d[P]-3)/4,N=r-k%a,z=r-(k/a|0),X=s(C,v,N*N+z*z);if(X)return X}c.clearRect(0,0,a,a);break}}let x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(we);let f,g,_,y,E;for(f=x.length-1;f>=0;--f){let C=x[f].toString();for(_=this.executorsByZIndex_[C],g=Al.length-1;g>=0;--g)if(m=Al[g],y=_[m],y!==void 0&&(E=y.executeHitDetection(c,l,i,p,u),E))return E}}getClipCoords(t){let e=this.maxExtent_;if(!e)return null;let i=e[0],r=e[1],s=e[2],o=e[3],a=[i,r,i,o,s,o,s,r];return _e(a,0,8,2,t,a),a}isEmpty(){return ai(this.executorsByZIndex_)}execute(t,e,i,r,s,o,a){let l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(we),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||Al;let h,c,u,d,m,p;for(a&&l.reverse(),h=0,c=l.length;h<c;++h){let x=l[h].toString();for(m=this.executorsByZIndex_[x],u=0,d=o.length;u<d;++u){let f=o[u];p=m[f],p!==void 0&&p.execute(t,e,i,r,s,a)}}this.maxExtent_&&t.restore()}},Ml={};Ol=Pl});var Pt,_o=R(()=>{Pt={ANIMATING:0,INTERACTING:1}});var Dl,xo,Fl=R(()=>{fl();Kr();be();_i();vt();st();tn();Xn();Dl=class extends go{constructor(t,e,i,r,s,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=r,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ft()}drawImages_(t,e,i,r){if(!this.image_)return;let s=_e(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,u=s.length;c<u;c+=2){let d=s[c]-this.imageAnchorX_,m=s[c+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let p=d+this.imageAnchorX_,x=m+this.imageAnchorY_;Yt(a,p,x,1,1,h,-p,-x),o.setTransform.apply(o,a),o.translate(p,x),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,m,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let s=_e(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=r){let l=s[e]+this.textOffsetX_,h=s[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,h-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,h),this.textFillState_&&o.fillText(this.text_,l,h))}}moveToLineTo_(t,e,i,r,s){let o=this.context_,a=_e(t,e,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let h=2;h<l;h+=2)o.lineTo(a[h],a[h+1]);return s&&o.closePath(),i}drawRings_(t,e,i,r){for(let s=0,o=i.length;s<o;++s)e=this.moveToLineTo_(t,e,i[s],r,!0);return e}drawCircle(t){if(!!mt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=Cu(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,e){let i=e.getGeometryFunction()(t);!i||!mt(this.extent_,i.getExtent())||(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){let e=t.getGeometriesArray();for(let i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!mt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){let e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getExtent();if(!!mt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let i=this.context_,r=t.getFlatCoordinates(),s=0,o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,h=o.length;l<h;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){let i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!mt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!mt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,s=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=s.length;a<l;++a){let h=s[a];r=this.drawRings_(i,r,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){let e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),Kt(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:ki;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{let i=t.getColor();this.fillState_={fillStyle:ee(i||ie)}}if(!e)this.strokeState_=null;else{let i=e.getColor(),r=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),c=s||ui;this.strokeState_={lineCap:r!==void 0?r:on,lineDash:this.pixelRatio_===1?c:c.map(u=>u*this.pixelRatio_),lineDashOffset:(o||di)*this.pixelRatio_,lineJoin:a!==void 0?a:Ve,lineWidth:(l!==void 0?l:pi)*this.pixelRatio_,miterLimit:h!==void 0?h:fi,strokeStyle:ee(i||gi)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}let i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{let e=t.getFill();if(!e)this.textFillState_=null;else{let m=e.getColor();this.textFillState_={fillStyle:ee(m||ie)}}let i=t.getStroke();if(!i)this.textStrokeState_=null;else{let m=i.getColor(),p=i.getLineCap(),x=i.getLineDash(),f=i.getLineDashOffset(),g=i.getLineJoin(),_=i.getWidth(),y=i.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:on,lineDash:x||ui,lineDashOffset:f||di,lineJoin:g!==void 0?g:Ve,lineWidth:_!==void 0?_:pi,miterLimit:y!==void 0?y:fi,strokeStyle:ee(m||gi)}}let r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),c=t.getText(),u=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:r!==void 0?r:ao,textAlign:u!==void 0?u:ki,textBaseline:d!==void 0?d:an},this.text_=c!==void 0?Array.isArray(c)?c.reduce((m,p,x)=>m+=x%2?" ":p,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}},xo=Dl});var Fd=R(()=>{fo()});function kd(n,t,e,i,r,s,o){let a=n[0]*Fe,l=n[1]*Fe,h=xt(a,l);h.imageSmoothingEnabled=!1;let c=h.canvas,u=new xo(h,Fe,r,null,o),d=e.length,m=Math.floor((256*256*256-1)/d),p={};for(let f=1;f<=d;++f){let g=e[f-1],_=g.getStyleFunction()||i;if(!i)continue;let y=_(g,s);if(!y)continue;Array.isArray(y)||(y=[y]);let C="#"+("000000"+(f*m).toString(16)).slice(-6);for(let v=0,w=y.length;v<w;++v){let P=y[v],O=P.getGeometryFunction()(g);if(!O||!mt(r,O.getExtent()))continue;let k=P.clone(),N=k.getFill();N&&N.setColor(C);let z=k.getStroke();z&&(z.setColor(C),z.setLineDash(null)),k.setText(void 0);let X=P.getImage();if(X&&X.getOpacity()!==0){let b=X.getImageSize();if(!b)continue;let T=xt(b[0],b[1],void 0,{alpha:!1}),L=T.canvas;T.fillStyle=C,T.fillRect(0,0,L.width,L.height),k.setImage(new Jn({img:L,imgSize:b,anchor:X.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:X.getOrigin(),opacity:1,size:X.getSize(),scale:X.getScale(),rotation:X.getRotation(),rotateWithView:X.getRotateWithView()}))}let at=k.getZIndex()||0,Z=p[at];Z||(Z={},p[at]=Z,Z.Polygon=[],Z.Circle=[],Z.LineString=[],Z.Point=[]),Z[O.getType().replace("Multi","")].push(O,k)}}let x=Object.keys(p).map(Number).sort(we);for(let f=0,g=x.length;f<g;++f){let _=p[x[f]];for(let y in _){let E=_[y];for(let C=0,v=E.length;C<v;C+=2){u.setStyle(E[C+1]);for(let w=0,P=t.length;w<P;++w)u.setTransform(t[w]),u.drawGeometry(E[C])}}}return h.getImageData(0,0,c.width,c.height)}function Nd(n,t,e){let i=[];if(e){let r=Math.floor(Math.round(n[0])*Fe),s=Math.floor(Math.round(n[1])*Fe),o=(V(r,0,e.width-1)+V(s,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],c=e.data[o+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/t.length);c&&c%u===0&&i.push(t[c/u-1])}return i}var Fe,Gd=R(()=>{Fl();Fd();pt();kt();st();vt();Fe=.5});function Wd(n,t){return parseInt(H(n),10)-parseInt(H(t),10)}function yo(n,t){let e=Eo(n,t);return e*e}function Eo(n,t){return Km*n/t}function Vm(n,t,e,i,r){let s=e.getFill(),o=e.getStroke();if(s||o){let l=n.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i)}let a=e.getText();if(a&&a.getText()){let l=(r||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function kl(n,t,e,i,r,s,o){let a=!1,l=e.getImage();if(l){let h=l.getImageState();h==it.LOADED||h==it.ERROR?l.unlistenImageChange(r):(h==it.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return Zm(n,t,e,i,s,o),a}function Zm(n,t,e,i,r,s){let o=e.getGeometryFunction()(t);if(!o)return;let a=o.simplifyTransformed(i,r);if(e.getRenderer())zd(n,a,e,t);else{let h=Xd[a.getType()];h(n,a,e,t,s)}}function zd(n,t,e,i){if(t.getType()=="GeometryCollection"){let s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)zd(n,s[o],e,i);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function Hm(n,t,e,i,r){let s=t.getGeometriesArray(),o,a;for(o=0,a=s.length;o<a;++o){let l=Xd[s[o].getType()];l(n,s[o],e,i,r)}}function qm(n,t,e,i,r){let s=e.getStroke();if(s){let a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i)}let o=e.getText();if(o&&o.getText()){let a=(r||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function Jm(n,t,e,i,r){let s=e.getStroke();if(s){let a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i)}let o=e.getText();if(o&&o.getText()){let a=(r||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function $m(n,t,e,i,r){let s=e.getFill(),o=e.getStroke();if(o||s){let l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i)}let a=e.getText();if(a&&a.getText()){let l=(r||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Qm(n,t,e,i,r){let s=e.getImage(),o=e.getText(),a;if(s){if(s.getImageState()!=it.LOADED)return;let l=n;if(r){let c=s.getDeclutterMode();if(c!=="none")if(l=r,c==="obstacle"){let u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawPoint(t,i)}else o&&o.getText()&&(a={})}let h=l.getBuilder(e.getZIndex(),"Image");h.setImageStyle(s,a),h.drawPoint(t,i)}if(o&&o.getText()){let l=n;r&&(l=r);let h=l.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(t,i)}}function tp(n,t,e,i,r){let s=e.getImage(),o=e.getText(),a;if(s){if(s.getImageState()!=it.LOADED)return;let l=n;if(r){let c=s.getDeclutterMode();if(c!=="none")if(l=r,c==="obstacle"){let u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}let h=l.getBuilder(e.getZIndex(),"Image");h.setImageStyle(s,a),h.drawMultiPoint(t,i)}if(o&&o.getText()){let l=n;r&&(l=r);let h=l.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(t,i)}}function ep(n,t,e,i,r){let s=e.getFill(),o=e.getStroke();if(s||o){let l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i)}let a=e.getText();if(a&&a.getText()){let l=(r||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}var Km,Xd,Nl=R(()=>{Oi();gt();Km=.5,Xd={Point:Qm,LineString:qm,Polygon:ep,MultiPoint:tp,MultiLineString:Jm,MultiPolygon:$m,GeometryCollection:Hm,Circle:Vm}});var Gl,Bd,Yd=R(()=>{Id();wl();Dd();_o();Gd();be();st();kt();Nl();vt();It();gt();wi();Gl=class extends po{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=bt(),this.wrappedRenderedExtent_=bt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){let r=e.extent,s=e.viewState,o=s.center,a=s.resolution,l=s.projection,h=s.rotation,c=l.getExtent(),u=this.getLayer().getSource(),d=e.pixelRatio,m=e.viewHints,p=!(m[Pt.ANIMATING]||m[Pt.INTERACTING]),x=this.compositionContext_,f=Math.round(e.size[0]*d),g=Math.round(e.size[1]*d),_=u.getWrapX()&&l.canWrapX(),y=_?et(c):null,E=_?Math.ceil((r[2]-c[2])/y)+1:1,C=_?Math.floor((r[0]-c[0])/y):0;do{let v=this.getRenderTransform(o,a,h,d,f,g,C*y);t.execute(x,1,v,h,p,void 0,i)}while(++C<E)}setupCompositionContext_(){if(this.opacity_!==1){let t=xt(this.context.canvas.width,this.context.canvas.height,Ll);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){let t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,jn(this.compositionContext_),Ll.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){let i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];Fc(this.pixelTransform,1/i,1/i),wn(this.inversePixelTransform,this.pixelTransform);let s=ws(this.pixelTransform);this.useContainer(e,s,this.getBackground(t));let o=this.context,a=o.canvas,l=this.replayGroup_,h=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!h||h.isEmpty()))return null;let c=Math.round(t.size[0]*i),u=Math.round(t.size[1]*i);a.width!=c||a.height!=u?(a.width=c,a.height=u,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,c,u),this.preRender(o,t);let d=t.viewState,m=d.projection;this.opacity_=r.opacity,this.setupCompositionContext_();let p=!1,x=!0;if(r.extent&&this.clipping){let f=pe(r.extent,m);x=mt(f,t.extent),p=x&&!Zt(f,t.extent),p&&this.clipUnrotated(this.compositionContext_,t,f)}return x&&this.renderWorlds(l,t),p&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let i=[this.context.canvas.width,this.context.canvas.height];_t(this.pixelTransform,i);let r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,h=this.getLayer(),c=[],u=i[0]*Fe,d=i[1]*Fe;c.push(this.getRenderTransform(r,s,o,Fe,u,d,0).slice());let m=h.getSource(),p=a.getExtent();if(m.getWrapX()&&a.canWrapX()&&!Zt(p,l)){let x=l[0],f=et(p),g=0,_;for(;x<p[0];)--g,_=f*g,c.push(this.getRenderTransform(r,s,o,Fe,u,d,_).slice()),x+=f;for(g=0,x=l[2];x>p[2];)++g,_=f*g,c.push(this.getRenderTransform(r,s,o,Fe,u,d,_).slice()),x-=f}this.hitDetectionImageData_=kd(i,c,this.renderedFeatures_,h.getStyleFunction(),l,s,o)}e(Nd(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,i,r,s){if(!this.replayGroup_)return;let o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),h={},c=function(m,p,x){let f=H(m),g=h[f];if(g){if(g!==!0&&x<g.distanceSq){if(x===0)return h[f]=!0,s.splice(s.lastIndexOf(g),1),r(m,l,p);g.geometry=p,g.distanceSq=x}}else{if(x===0)return h[f]=!0,r(m,l,p);s.push(h[f]={feature:m,layer:l,geometry:p,distanceSq:x,callback:r})}},u,d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(m=>u=m.forEachFeatureAtCoordinate(t,o,a,i,c,m===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(p=>p.value):null)),u}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){let e=this.getLayer(),i=e.getSource();if(!i)return!1;let r=t.viewHints[Pt.ANIMATING],s=t.viewHints[Pt.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let l=t.extent,h=t.viewState,c=h.projection,u=h.resolution,d=t.pixelRatio,m=e.getRevision(),p=e.getRenderBuffer(),x=e.getRenderOrder();x===void 0&&(x=Wd);let f=h.center.slice(),g=bn(l,p*u),_=g.slice(),y=[g.slice()],E=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!Zt(E,t.extent)){let b=et(E),T=Math.max(et(g)/2,b);g[0]=E[0]-T,g[2]=E[2]+T,Xs(f,c);let L=Lr(y[0],c);L[0]<E[0]&&L[2]<E[2]?y.push([L[0]+b,L[1],L[2]+b,L[3]]):L[0]>E[0]&&L[2]>E[2]&&y.push([L[0]-b,L[1],L[2]-b,L[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==m&&this.renderedRenderOrder_==x&&Zt(this.wrappedRenderedExtent_,g))return Kt(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=f,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let C=new Tl(Eo(u,d),g,u,d),v;this.getLayer().getDeclutter()&&(v=new Tl(Eo(u,d),g,u,d));let w=$i(),P;if(w){for(let b=0,T=y.length;b<T;++b){let L=y[b],M=Qi(L,c);i.loadFeatures(M,Ea(u,c),w)}P=Pe(w,c)}else for(let b=0,T=y.length;b<T;++b)i.loadFeatures(y[b],u,c);let O=yo(u,d),k=!0,N=function(b){let T,L=b.getStyleFunction()||e.getStyleFunction();if(L&&(T=L(b,u)),T){let M=this.renderFeature(b,O,T,C,P,v);k=k&&!M}}.bind(this),z=Qi(g,c),X=i.getFeaturesInExtent(z);x&&X.sort(x);for(let b=0,T=X.length;b<T;++b)N(X[b]);this.renderedFeatures_=X,this.ready=k;let at=C.finish(),Z=new Ol(g,u,d,i.getOverlaps(),at,e.getRenderBuffer());return v&&(this.declutterExecutorGroup=new Ol(g,u,d,i.getOverlaps(),v.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=m,this.renderedRenderOrder_=x,this.renderedExtent_=_,this.wrappedRenderedExtent_=g,this.renderedCenter_=f,this.renderedProjection_=c,this.replayGroup_=Z,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,h=i.length;l<h;++l)a=kl(r,t,i[l],e,this.boundHandleStyleImageChange_,s,o)||a;else a=kl(r,t,i,e,this.boundHandleStyleImageChange_,s,o);return a}},Bd=Gl});var Ud={};We(Ud,{default:()=>Wl});var Xl,Wl,zl=R(()=>{pd();Yd();Xl=class extends md{constructor(t){super(t)}createRenderer(){return new Bd(this)}},Wl=Xl});var jd,Bl,Yl,Kd=R(()=>{jd=yr(nl(),1);st();gt();Be();Bl=class{constructor(t){this.rbush_=new jd.default(t),this.items_={}}insert(t,e){let i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[H(e)]=i}load(t,e){let i=new Array(e.length);for(let r=0,s=e.length;r<s;r++){let o=t[r],a=e[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[H(a)]=l}this.rbush_.load(i)}remove(t){let e=H(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){let i=this.items_[H(e)],r=[i.minX,i.minY,i.maxX,i.maxY];Ae(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){let e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let r=0,s=t.length;r<s;r++)if(i=e(t[r]),i)return i;return i}isEmpty(){return ai(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let e=this.rbush_.toJSON();return Ht(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(let e in t.items_)this.items_[e]=t.items_[e]}},Yl=Bl});function Vd(n){return n?Array.isArray(n)?function(t){return n}:typeof n=="function"?n:function(t){return[n]}:null}var Ul,Co,jl=R(()=>{Vt();gt();It();Ul=class extends ut{constructor(t){super(),this.projection=ct(t.projection),this.attributions_=Vd(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;let e=this;this.viewPromise_=new Promise(function(i,r){e.viewResolver=i,e.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return Q()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Vd(t),this.changed()}setState(t){this.state_=t,this.changed()}};Co=Ul});var xe,Zd=R(()=>{xe={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}});function Hd(n,t){return[[-1/0,-1/0,1/0,1/0]]}var qd=R(()=>{It()});function np(n,t,e,i,r,s,o){let a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(e,i,r):n,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=ip,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){let h=t.getType(),c;h=="json"||h=="text"?c=a.responseText:h=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):h=="arraybuffer"&&(c=a.response),c?s(t.readFeatures(c,{extent:e,featureProjection:r}),t.readProjection(c)):o()}else o()},a.onerror=o,a.send()}function Kl(n,t){return function(e,i,r,s,o){let a=this;np(n,t,e,i,r,function(l,h){a.addFeatures(l),s!==void 0&&s(l)},o||se)}}var ip,Jd=R(()=>{Bt();ip=!1});var $d={};We($d,{VectorSourceEvent:()=>ke,default:()=>Zl});var ke,Vl,Zl,Hl=R(()=>{Ii();Cr();ve();ft();En();Kd();jl();Zd();Bt();qd();wt();st();vt();gt();Be();oe();Jd();ke=class extends Rt{constructor(t,e,i){super(t),this.feature=e,this.features=i}},Vl=class extends Co{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=se,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(K(this.format_,7),this.loader_=Kl(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Hd;let e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new Yl:null,this.loadedExtentsRtree_=new Yl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!e&&i===void 0&&(i=new Lt(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let e=H(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);let i=t.getGeometry();if(i){let r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new ke(xe.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[$(e,G.CHANGE,this.handleFeatureChange_,this),$(e,Le.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0,r=e.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e),i&&(K(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let e=[],i=[],r=[];for(let s=0,o=t.length;s<o;s++){let a=t[s],l=H(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){let a=i[s],l=H(a);this.setupChangeEvents_(l,a);let h=a.getGeometry();if(h){let c=h.getExtent();e.push(c),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(xe.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new ke(xe.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(xe.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(xe.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(Ot.ADD,function(i){e||(e=!0,this.addFeature(i.element),e=!1)}.bind(this)),t.addEventListener(Ot.REMOVE,function(i){e||(e=!0,this.removeFeature(i.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(let i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(rt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let i=function(r){this.removeFeatureInternal(r)}.bind(this);this.featuresRtree_.forEach(i);for(let r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let e=new ke(xe.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){let i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(t))return e(r)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){let s=e(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),ai(this.nullGeometryFeatures_)||ji(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);let r=Yc(t,e);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){let i=t[0],r=t[1],s=null,o=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0];return e=e||si,this.featuresRtree_.forEachInExtent(l,function(h){if(e(h)){let c=h.getGeometry(),u=a;if(a=c.closestPointXY(i,r,o,a),a<u){s=h;let d=Math.sqrt(a);l[0]=i-d,l[1]=r-d,l[2]=i+d,l[3]=r+d}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){let e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let e=t.target,i=H(e),r=e.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{let o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}let s=e.getId();if(s!==void 0){let o=s.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new ke(xe.CHANGEFEATURE,e))}hasFeature(t){let e=t.getId();return e!==void 0?e in this.idIndex_:H(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ai(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){let r=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let o=0,a=s.length;o<a;++o){let l=s[o];r.forEachInExtent(l,function(c){return Zt(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ke(xe.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,function(c){--this.loadingExtentsCount_,this.dispatchEvent(new ke(xe.FEATURESLOADEND,void 0,c))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new ke(xe.FEATURESLOADERROR))}.bind(this)),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let e=this.loadedExtentsRtree_,i;e.forEachInExtent(t,function(r){if(Ae(r.extent,t))return i=r,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;let e=H(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let e=H(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(rt),delete this.featureChangeKeys_[e];let r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new ke(xe.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(let i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){K(this.format_,7),this.url_=t,this.setLoader(Kl(t,this.format_))}},Zl=Vl});function Qd(n){if(!(n.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");let t=n.inversePixelTransform[0],e=n.frameState,i=Oc(n.inversePixelTransform.slice(),e.coordinateToPixelTransform),r=yo(e.viewState.resolution,t),s,o=$i();return o&&(s=Pe(o,e.viewState.projection)),new xo(n.context,t,e.extent,i,e.viewState.rotation,r,s)}var tf=R(()=>{Fl();be();Nl();It()});function ef(n,t,e){let i=[],r=n(0),s=n(1),o=t(r),a=t(s),l=[s,r],h=[a,o],c=[1,0],u={},d=1e5,m,p,x,f,g,_;for(;--d>0&&c.length>0;)x=c.pop(),r=l.pop(),o=h.pop(),_=x.toString(),_ in u||(i.push(o[0],o[1]),u[_]=!0),f=c.pop(),s=l.pop(),a=h.pop(),g=(x+f)/2,m=n(g),p=t(m),ks(p[0],p[1],o[0],o[1],a[0],a[1])<e?(i.push(a[0],a[1]),_=f.toString(),u[_]=!0):(c.push(f,g,g,x),h.push(a,p,p,o),l.push(s,m,m,r));return i}function nf(n,t,e,i,r){let s=ct("EPSG:4326");return ef(function(o){return[n,t+(e-t)*o]},Qt(s,i),r)}function rf(n,t,e,i,r){let s=ct("EPSG:4326");return ef(function(o){return[t+(e-t)*o,n]},Qt(s,i),r)}var sf=R(()=>{It();pt()});var rp,sp,ql,of,af=R(()=>{Ii();Yn();Is();Yr();Vu();Zs();io();Jr();qa();zl();Hl();st();pt();wi();It();tf();sf();rp=new De({color:"rgba(0,0,0,0.2)"}),sp=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],ql=class extends Wl{constructor(t){t=t||{};let e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=t.targetSize!==void 0?t.targetSize:100,this.maxLines_=t.maxLines!==void 0?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=t.strokeStyle!==void 0?t.strokeStyle:rp,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=t.lonLabelFormatter==null?ua.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=t.latLabelFormatter==null?ua.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=t.lonLabelPosition==null?0:t.lonLabelPosition,this.latLabelPosition_=t.latLabelPosition==null?1:t.latLabelPosition,this.lonLabelStyleBase_=new He({text:t.lonLabelStyle!==void 0?t.lonLabelStyle.clone():new Qr({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Oe({color:"rgba(0,0,0,1)"}),stroke:new De({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=function(i){let r=i.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(r),this.lonLabelStyleBase_}.bind(this),this.latLabelStyleBase_=new He({text:t.latLabelStyle!==void 0?t.latLabelStyle.clone():new Qr({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Oe({color:"rgba(0,0,0,1)"}),stroke:new De({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=function(i){let r=i.get("graticule_label");return this.latLabelStyleBase_.getText().setText(r),this.latLabelStyleBase_}.bind(this),this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(te.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=t.intervals!==void 0?t.intervals:sp,this.setSource(new Zl({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new Lt,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new He({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let i=t.slice();return this.projection_&&this.getSource().getWrapX()&&Lr(i,this.projection_),this.loadedExtent_&&(Gc(this.loadedExtent_,i,e)?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]}loaderFunction(t,e,i){this.loadedExtent_=t;let r=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=Ue(s,t);if(this.renderedExtent_&&Ae(this.renderedExtent_,o)&&this.renderedResolution_===e||(this.renderedExtent_=o,this.renderedResolution_=e,Vi(o)))return;let a=qt(o),l=e*e/4;(!this.projection_||!Me(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(o,a,e,l);let c=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);let u;for(;c>this.featurePool_.length;)u=new Rr,this.featurePool_.push(u);let d=r.getFeaturesCollection();d.clear();let m=0,p,x;for(p=0,x=this.meridians_.length;p<x;++p)u=this.featurePool_[m++],u.setGeometry(this.meridians_[p]),u.setStyle(this.lineStyle_),d.push(u);for(p=0,x=this.parallels_.length;p<x;++p)u=this.featurePool_[m++],u.setGeometry(this.parallels_[p]),u.setStyle(this.lineStyle_),d.push(u)}addMeridian_(t,e,i,r,s,o){let a=this.getMeridian_(t,e,i,r,o);if(mt(a.getExtent(),s)){if(this.meridiansLabels_){let l=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new Bn([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(t,e,i,r,s,o){let a=this.getParallel_(t,e,i,r,o);if(mt(a.getExtent(),s)){if(this.parallelsLabels_){let l=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new Bn([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(t){let e=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,r=t.frameState.size,s=t.frameState.extent,o=qt(s),a=s;if(e){let p=r[0]*i,x=r[1]*i;a=[o[0]-p/2,o[1]-x/2,o[0]+p/2,o[1]+x/2]}let l=0,h=0,c=this.latLabelPosition_<.5,u=this.projection_.getExtent(),d=et(u);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Zt(u,s)){l=Math.floor((s[0]-u[0])/d),h=Math.ceil((s[2]-u[2])/d);let p=Math.abs(e)>Math.PI/2;c=c!==p}let m=Qd(t);for(let p=l;p<=h;++p){let x=this.meridians_.length+this.parallels_.length,f,g,_,y;if(this.meridiansLabels_)for(g=0,_=this.meridiansLabels_.length;g<_;++g){let E=this.meridians_[g];if(!e&&p===0)y=this.getMeridianPoint_(E,s,g);else{let C=E.clone();C.translate(p*d,0),C.rotate(-e,o),y=this.getMeridianPoint_(C,a,g),y.rotate(e,o)}f=this.featurePool_[x++],f.setGeometry(y),f.set("graticule_label",this.meridiansLabels_[g].text),m.drawFeature(f,this.lonLabelStyle_(f))}if(this.parallelsLabels_&&(p===l&&c||p===h&&!c))for(g=0,_=this.parallels_.length;g<_;++g){let E=this.parallels_[g];if(!e&&p===0)y=this.getParallelPoint_(E,s,g);else{let C=E.clone();C.translate(p*d,0),C.rotate(-e,o),y=this.getParallelPoint_(C,a,g),y.rotate(e,o)}f=this.featurePool_[x++],f.setGeometry(y),f.set("graticule_label",this.parallelsLabels_[g].text),m.drawFeature(f,this.latLabelStyle_(f))}}}createGraticule_(t,e,i,r){let s=this.getInterval_(i);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1,a=this.projection_.getExtent(),l=et(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Zt(a,t)&&(et(t)>=l?(t[0]=a[0],t[2]=a[2]):o=!0);let h=[V(e[0],this.minX_,this.maxX_),V(e[1],this.minY_,this.maxY_)],c=this.toLonLatTransform_(h);isNaN(c[1])&&(c[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let u=V(c[0],this.minLon_,this.maxLon_),d=V(c[1],this.minLat_,this.maxLat_),m=this.maxLines_,p,x,f,g,_=t;o||(_=[V(t[0],this.minX_,this.maxX_),V(t[1],this.minY_,this.maxY_),V(t[2],this.minX_,this.maxX_),V(t[3],this.minY_,this.maxY_)]);let y=vr(_,this.toLonLatTransform_,void 0,8),E=y[3],C=y[2],v=y[1],w=y[0];if(o||(ae(_,this.bottomLeft_)&&(w=this.minLon_,v=this.minLat_),ae(_,this.bottomRight_)&&(C=this.maxLon_,v=this.minLat_),ae(_,this.topLeft_)&&(w=this.minLon_,E=this.maxLat_),ae(_,this.topRight_)&&(C=this.maxLon_,E=this.maxLat_),E=V(E,d,this.maxLat_),C=V(C,u,this.maxLon_),v=V(v,this.minLat_,d),w=V(w,this.minLon_,u)),u=Math.floor(u/s)*s,g=V(u,this.minLon_,this.maxLon_),x=this.addMeridian_(g,v,E,r,t,0),p=0,o)for(;(g-=s)>=w&&p++<m;)x=this.addMeridian_(g,v,E,r,t,x);else for(;g!=this.minLon_&&p++<m;)g=Math.max(g-s,this.minLon_),x=this.addMeridian_(g,v,E,r,t,x);if(g=V(u,this.minLon_,this.maxLon_),p=0,o)for(;(g+=s)<=C&&p++<m;)x=this.addMeridian_(g,v,E,r,t,x);else for(;g!=this.maxLon_&&p++<m;)g=Math.min(g+s,this.maxLon_),x=this.addMeridian_(g,v,E,r,t,x);for(this.meridians_.length=x,this.meridiansLabels_&&(this.meridiansLabels_.length=x),d=Math.floor(d/s)*s,f=V(d,this.minLat_,this.maxLat_),x=this.addParallel_(f,w,C,r,t,0),p=0;f!=this.minLat_&&p++<m;)f=Math.max(f-s,this.minLat_),x=this.addParallel_(f,w,C,r,t,x);for(f=V(d,this.minLat_,this.maxLat_),p=0;f!=this.maxLat_&&p++<m;)f=Math.min(f+s,this.maxLat_),x=this.addParallel_(f,w,C,r,t,x);this.parallels_.length=x,this.parallelsLabels_&&(this.parallelsLabels_.length=x)}getInterval_(t){let e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1],r=-1,s=Math.pow(this.targetSize_*t,2),o=[],a=[];for(let l=0,h=this.intervals_.length;l<h;++l){let c=V(this.intervals_[l]/2,0,90),u=V(i,-90+c,90-c);if(o[0]=e-c,o[1]=u-c,a[0]=e+c,a[1]=u+c,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;r=this.intervals_[l]}return r}getMeridian_(t,e,i,r,s){let o=nf(t,e,i,this.projection_,r),a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new Fa(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(t,e,i){let r=t.getFlatCoordinates(),s=1,o=r.length-1;r[s]>r[o]&&(s=o,o=1);let a=Math.max(e[1],r[s]),l=Math.min(e[3],r[o]),h=V(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,l),u=[r[s-1]+(r[o-1]-r[s-1])*(h-r[s])/(r[o]-r[s]),h],d=this.meridiansLabels_[i].geom;return d.setCoordinates(u),d}getMeridians(){return this.meridians_}getParallel_(t,e,i,r,s){let o=rf(t,e,i,this.projection_,r),a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new Fa(o,"XY"),a}getParallelPoint_(t,e,i){let r=t.getFlatCoordinates(),s=0,o=r.length-2;r[s]>r[o]&&(s=o,o=0);let a=Math.max(e[0],r[s]),l=Math.min(e[2],r[o]),h=V(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,l),c=r[s+1]+(r[o+1]-r[s+1])*(h-r[s])/(r[o]-r[s]),u=[h,c],d=this.parallelsLabels_[i].geom;return d.setCoordinates(u),d}getParallels(){return this.parallels_}updateProjectionInfo_(t){let e=ct("EPSG:4326"),i=t.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];let r=Qt(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=r;else{let o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,h){h=h||2;let c=r(a,l,h);for(let u=0,d=c.length;u<d;u+=h)c[u]<o&&(c[u]+=360);return c}}this.fromLonLatTransform_=Qt(e,t);let s=vr([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(qt(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}},of=ql});var Jl,lf,hf=R(()=>{co();Oi();Jl=class extends qn{constructor(t,e,i,r,s){let o=s!==void 0?it.IDLE:it.LOADED;super(t,e,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=it.ERROR):this.state=it.LOADED,this.changed()}load(){this.state==it.IDLE&&(this.state=it.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}},lf=Jl});var W,$e=R(()=>{W={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}});function $l(n){return Math.pow(n,3)}function ye(n){return 1-$l(1-n)}function cf(n){return 3*n*n-2*n*n*n}function uf(n){return n}var Xi=R(()=>{});var Ql,Qe,ir=R(()=>{Tn();ft();$e();gt();Xi();Ql=class extends Ye{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(G.CHANGE)}release(){this.state===W.ERROR&&this.setState(W.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==W.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==W.LOADED){t.interimTile=null;break}else t.getState()==W.LOADING?e=t:t.getState()==W.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==W.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Q()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;let r=e-i+1e3/60;return r>=this.transition_?1:$l(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}},Qe=Ql});function op(){let n=xt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var th,nr,To=R(()=>{ir();$e();kt();uo();th=class extends Qe{constructor(t,e,i,r,s,o){super(t,e,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=W.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=W.ERROR,this.unlistenImage_(),this.image_=op(),this.changed()}handleImageLoad_(){let t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=W.LOADED:this.state=W.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==W.ERROR&&(this.state=W.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==W.IDLE&&(this.state=W.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ts(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};nr=th});var eh,Ro,ih=R(()=>{eh=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;let t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;let r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;let s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},Ro=eh});function ap(n,t){Hn.expire()}var nh,df,ff=R(()=>{Er();Bt();gt();be();st();sl();hn();wi();nh=class extends Si{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Q()}calculateMatrices2D(t){let e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Yt(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),wn(r,i)}forEachFeatureAtCoordinate(t,e,i,r,s,o,a,l){let h,c=e.viewState;function u(E,C,v,w){return s.call(o,C,E?v:null,w)}let d=c.projection,m=Xs(t.slice(),d),p=[[0,0]];if(d.canWrapX()&&r){let E=d.getExtent(),C=et(E);p.push([-C,0],[C,0])}let x=e.layerStatesArray,f=x.length,g=[],_=[];for(let E=0;E<p.length;E++)for(let C=f-1;C>=0;--C){let v=x[C],w=v.layer;if(w.hasRenderer()&&Zn(v,c)&&a.call(l,w)){let P=w.getRenderer(),O=w.getSource();if(P&&O){let k=O.getWrapX()?m:t,N=u.bind(null,v.managed);_[0]=k[0]+p[E][0],_[1]=k[1]+p[E][1],h=P.forEachFeatureAtCoordinate(_,e,i,N,g)}if(h)return h}}if(g.length===0)return;let y=1/g.length;return g.forEach((E,C)=>E.distanceSq+=C*y),g.sort((E,C)=>E.distanceSq-C.distanceSq),g.some(E=>h=E.callback(E.feature,E.layer,E.geometry)),h}hasFeatureAtCoordinate(t,e,i,r,s,o){return this.forEachFeatureAtCoordinate(t,e,i,r,si,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){Q()}scheduleExpireIconCache(t){Hn.canExpireCache()&&t.postRenderFunctions.push(ap)}};df=nh});var rh,gf,mf=R(()=>{ff();En();Il();Yn();sn();_i();hn();oe();kt();rh=class extends df{constructor(t){super(t),this.fontChangeListenerKey_=$(Ke,Le.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");let e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Fi+" ol-layers";let i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){let i=this.getMap();if(i.hasListener(t)){let r=new mo(t,void 0,e);i.dispatchEvent(r)}}disposeInternal(){rt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(te.PRECOMPOSE,t);let e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;let r=[],s=null;for(let o=0,a=e.length;o<a;++o){let l=e[o];t.layerIndex=o;let h=l.layer,c=h.getSourceState();if(!Zn(l,i)||c!="ready"&&c!="undefined"){h.unrender();continue}let u=h.render(t,s);!u||(u!==s&&(this.children_.push(u),s=u),"getDeclutter"in h&&r.push(h))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);$u(this.element_,this.children_),this.dispatchRenderEvent(te.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}},gf=rh});var Ne,sh,as,ls,pf=R(()=>{Qa();Ii();Cr();ve();ft();En();wt();Be();st();gt();oe();Ne=class extends Rt{constructor(t,e){super(t),this.layer=e}},sh={LAYERS:"layers"},as=class extends ho{constructor(t){t=t||{};let e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(sh.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Lt(i.slice(),{unique:!0}):K(typeof i.getArray=="function",43):i=new Lt(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(rt),this.layersListenerKeys_.length=0;let t=this.getLayers();this.layersListenerKeys_.push($(t,Ot.ADD,this.handleLayersAdd_,this),$(t,Ot.REMOVE,this.handleLayersRemove_,this));for(let i in this.listenerKeys_)this.listenerKeys_[i].forEach(rt);ze(this.listenerKeys_);let e=t.getArray();for(let i=0,r=e.length;i<r;i++){let s=e[i];this.registerLayerListeners_(s),this.dispatchEvent(new Ne("addlayer",s))}this.changed()}registerLayerListeners_(t){let e=[$(t,Le.PROPERTYCHANGE,this.handleLayerChange_,this),$(t,G.CHANGE,this.handleLayerChange_,this)];t instanceof as&&e.push($(t,"addlayer",this.handleLayerGroupAdd_,this),$(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[H(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Ne("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ne("removelayer",t.layer))}handleLayersAdd_(t){let e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Ne("addlayer",e)),this.changed()}handleLayersRemove_(t){let e=t.element,i=H(e);this.listenerKeys_[i].forEach(rt),delete this.listenerKeys_[i],this.dispatchEvent(new Ne("removelayer",e)),this.changed()}getLayers(){return this.get(sh.LAYERS)}setLayers(t){let e=this.getLayers();if(e){let i=e.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Ne("removelayer",i[r]))}this.set(sh.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){let e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});let r=this.getLayerState(),s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=i,a=e.length;o<a;o++){let l=e[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Ue(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return e}getSourceState(){return"ready"}},ls=as});var oh,ti,So=R(()=>{ve();oh=class extends Rt{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}},ti=oh});var ah,Ee,Io=R(()=>{So();ah=class extends ti{constructor(t,e,i,r,s,o){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Ee=ah});var dt,hs=R(()=>{ft();dt={SINGLECLICK:"singleclick",CLICK:G.CLICK,DBLCLICK:G.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}});var cs,lh=R(()=>{cs={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}});var hh,vo,ch=R(()=>{ft();Io();hs();lh();Tn();li();Bt();oe();hh=class extends Ye{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;let i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=$(i,cs.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=$(i,cs.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(G.TOUCHMOVE,this.boundHandleTouchMove_,Ls?{passive:!1}:!1)}emulateClick_(t){let e=new Ee(dt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Ee(dt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;let i=new Ee(dt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(t){let e=t,i=e.pointerId;if(e.type==dt.POINTERUP||e.type==dt.POINTERCANCEL){delete this.trackedTouches_[i];for(let r in this.trackedTouches_)if(this.trackedTouches_[r].target!==e.target){delete this.trackedTouches_[r];break}}else(e.type==dt.POINTERDOWN||e.type==dt.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);let e=new Ee(dt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(rt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);let e=new Ee(dt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(let i in t){let r=t[i];this.down_[i]=typeof r=="function"?se:r}if(this.dragListenerKeys_.length===0){let i=this.map_.getOwnerDocument();this.dragListenerKeys_.push($(i,dt.POINTERMOVE,this.handlePointerMove_,this),$(i,dt.POINTERUP,this.handlePointerUp_,this),$(this.element_,dt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push($(this.element_.getRootNode(),dt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;let e=new Ee(dt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;let e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Ee(dt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){let e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(rt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(G.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(rt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(rt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},vo=hh});var Ce,Lo=R(()=>{Ce={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}});var Nt,_f=R(()=>{Nt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}});var us,uh,xf,yf=R(()=>{wt();Be();us=1/0,uh=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ze(this.queuedElements_)}dequeue(){let t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));let r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){K(!(this.keyFunction_(t)in this.queuedElements_),31);let e=this.priorityFunction_(t);return e!=us?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){let e=this.elements_,i=this.priorities_,r=e.length,s=e[t],o=i[t],a=t;for(;t<r>>1;){let l=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),c=h<r&&i[h]<i[l]?h:l;e[t]=e[c],i[t]=i[c],t=c}e[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,e){let i=this.elements_,r=this.priorities_,s=i[e],o=r[e];for(;e>t;){let a=this.getParentIndex_(e);if(r[a]>o)i[e]=i[a],r[e]=r[a],e=a;else break}i[e]=s,r[e]=o}reprioritize(){let t=this.priorityFunction_,e=this.elements_,i=this.priorities_,r=0,s=e.length,o,a,l;for(a=0;a<s;++a)o=e[a],l=t(o),l==us?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,e[r++]=o);e.length=r,i.length=r,this.heapify_()}},xf=uh});function Ef(n,t,e,i,r){if(!n||!(e in n.wantedTiles))return us;if(!n.wantedTiles[e][t.getKey()])return us;let s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}var dh,wo,fh=R(()=>{ft();yf();$e();dh=class extends xf{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){let e=super.enqueue(t);return e&&t[0].addEventListener(G.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){let e=t.target,i=e.getState();if(i===W.LOADED||i===W.ERROR||i===W.EMPTY){i!==W.ERROR&&e.removeEventListener(G.CHANGE,this.boundHandleTileChange_);let r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0,r,s,o;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===W.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}},wo=dh});var Te,Cf=R(()=>{Te={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}});function gh(n,t,e){return function(i,r,s,o,a){if(!i)return;if(!r&&!t)return i;let l=t?0:s[0]*r,h=t?0:s[1]*r,c=a?a[0]:0,u=a?a[1]:0,d=n[0]+l/2+c,m=n[2]-l/2+c,p=n[1]+h/2+u,x=n[3]-h/2+u;d>m&&(d=(m+d)/2,m=d),p>x&&(p=(x+p)/2,x=p);let f=V(i[0],d,m),g=V(i[1],p,x);if(o&&e&&r){let _=30*r;f+=-_*Math.log(1+Math.max(0,d-i[0])/_)+_*Math.log(1+Math.max(0,i[0]-m)/_),g+=-_*Math.log(1+Math.max(0,p-i[1])/_)+_*Math.log(1+Math.max(0,i[1]-x)/_)}return[f,g]}}function Tf(n){return n}var Rf=R(()=>{pt()});function mh(n,t,e,i){let r=et(t)/e[0],s=At(t)/e[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function ph(n,t,e){let i=Math.min(n,t),r=50;return i*=Math.log(1+r*Math.max(0,n/t-1))/r+1,e&&(i=Math.max(i,e),i/=Math.log(1+r*Math.max(0,e/n-1))/r+1),V(i,e/2,t*2)}function Sf(n,t,e,i){return t=t!==void 0?t:!0,function(r,s,o,a){if(r!==void 0){let l=n[0],h=n[n.length-1],c=e?mh(l,e,o,i):l;if(a)return t?ph(r,c,h):V(r,h,c);let u=Math.min(c,r),d=Math.floor(Cn(n,u,s));return n[d]>c&&d<n.length-1?n[d+1]:n[d]}else return}}function If(n,t,e,i,r,s){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(o,a,l,h){if(o!==void 0){let c=r?mh(t,r,l,s):t;if(h)return i?ph(o,c,e):V(o,e,c);let u=1e-9,d=Math.ceil(Math.log(t/c)/Math.log(n)-u),m=-a*(.5-u)+.5,p=Math.min(c,o),x=Math.floor(Math.log(t/p)/Math.log(n)+m),f=Math.max(d,x),g=t/Math.pow(n,f);return V(g,e,c)}else return}}function _h(n,t,e,i,r){return e=e!==void 0?e:!0,function(s,o,a,l){if(s!==void 0){let h=i?mh(n,i,a,r):n;return!e||!l?V(s,t,h):ph(s,h,t)}else return}}var vf=R(()=>{pt();st();vt()});function rr(n){if(n!==void 0)return 0}function xh(n){if(n!==void 0)return n}function Lf(n){let t=2*Math.PI/n;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function wf(n){return n=n||$t(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=n?0:t}}var bo=R(()=>{pt()});function Ao(n,t){setTimeout(function(){n(t)},0)}function lp(n){if(n.extent!==void 0){let e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return gh(n.extent,n.constrainOnlyCenter,e)}let t=Dr(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){let e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,gh(e,!1,!1)}return Tf}function hp(n){let t,e,i,o=n.minZoom!==void 0?n.minZoom:yh,a=n.maxZoom!==void 0?n.maxZoom:28,l=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,c=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,u=n.showFullExtent!==void 0?n.showFullExtent:!1,d=Dr(n.projection,"EPSG:3857"),m=d.getExtent(),p=n.constrainOnlyCenter,x=n.extent;if(!h&&!x&&d.isGlobal()&&(p=!1,x=m),n.resolutions!==void 0){let f=n.resolutions;e=f[o],i=f[a]!==void 0?f[a]:f[f.length-1],n.constrainResolution?t=Sf(f,c,!p&&x,u):t=_h(e,i,c,!p&&x,u)}else{let g=(m?Math.max(et(m),At(m)):360*Jt.degrees/d.getMetersPerUnit())/256/Math.pow(2,yh),_=g/Math.pow(2,28-yh);e=n.maxResolution,e!==void 0?o=0:e=g/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=e/Math.pow(l,a):i=g/Math.pow(l,a):i=_),a=o+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,a-o),n.constrainResolution?t=If(l,e,i,c,!p&&x,u):t=_h(e,i,c,!p&&x,u)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:o,zoomFactor:l}}function cp(n){if(n.enableRotation!==void 0?n.enableRotation:!0){let e=n.constrainRotation;return e===void 0||e===!0?wf():e===!1?xh:typeof e=="number"?Lf(e):xh}else return rr}function up(n){return!(n.sourceCenter&&n.targetCenter&&!qi(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Eh(n,t,e,i,r){let s=Math.cos(-r),o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,o=-o;let h=a*s-l*o,c=l*s+a*o;return[h,c]}var yh,Ch,Re,Th=R(()=>{Vt();_o();Cf();It();Bt();wi();wt();Rf();pt();vf();bo();Xi();st();vt();to();yh=0,Ch=class extends ut{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Dr(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Bs(),t.center&&(t.center=me(t.center,this.projection_)),t.extent&&(t.extent=pe(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){let e=Object.assign({},t);for(let a in Te)delete e[a];this.setProperties(e,!0);let i=hp(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;let r=lp(t),s=i.constraint,o=cp(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;let i=this.getCenter();if(i){let r=t||[0,0,0,0];e=e||[0,0,0,0];let s=this.getResolution(),o=s/2*(r[3]-e[3]+e[1]-r[1]),a=s/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){let e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let e=new Array(arguments.length);for(let i=0;i<e.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=me(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=me(r.anchor,this.getProjection())),e[i]=r}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let r=0;for(;r<e&&!this.isDef();++r){let c=arguments[r];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(r===e){i&&Ao(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,h=[];for(;r<e;++r){let c=arguments[r],u={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||cf,callback:i};if(c.center&&(u.sourceCenter=o,u.targetCenter=c.center.slice(),o=u.targetCenter),c.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(c.zoom),a=u.targetResolution):c.resolution&&(u.sourceResolution=a,u.targetResolution=c.resolution,a=u.targetResolution),c.rotation!==void 0){u.sourceRotation=l;let d=le(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}up(u)?u.complete=!0:s+=u.duration,h.push(u)}this.animations_.push(h),this.setHint(Pt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Pt.ANIMATING]>0}getInteracting(){return this.hints_[Pt.INTERACTING]>0}cancelAnimations(){this.setHint(Pt.ANIMATING,-this.hints_[Pt.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){let r=this.animations_[e];if(r[0].callback&&Ao(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){let a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let t=Date.now(),e=!1;for(let i=this.animations_.length-1;i>=0;--i){let r=this.animations_[i],s=!0;for(let o=0,a=r.length;o<a;++o){let l=r[o];if(l.complete)continue;let h=t-l.start,c=l.duration>0?h/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;let u=l.easing(c);if(l.sourceCenter){let d=l.sourceCenter[0],m=l.sourceCenter[1],p=l.targetCenter[0],x=l.targetCenter[1];this.nextCenter_=l.targetCenter;let f=d+u*(p-d),g=m+u*(x-m);this.targetCenter_=[f,g]}if(l.sourceResolution&&l.targetResolution){let d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){let m=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,m,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){let d=u===1?le(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){let m=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(m,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Pt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let o=r[0].callback;o&&Ao(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i,r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-e[0],r[1]-e[1]],Nn(i,t-this.getRotation()),ru(i,e)),i}calculateCenterZoom(t,e){let i,r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){let o=e[0]-t*(e[0]-r[0])/s,a=e[1]-t*(e[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(t){let e=this.viewportSize_;if(t){let i=e[0],r=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}else return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let t=this.getCenterInternal();return t&&Gn(t,this.getProjection())}getCenterInternal(){return this.get(Te.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){let e=this.calculateExtentInternal(t);return Qi(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();let e=this.getCenterInternal();K(e,1);let i=this.getResolution();K(i!==void 0,2);let r=this.getRotation();return K(r!==void 0,3),Ir(e,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Te.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(pe(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();let i=et(t)/e[0],r=At(t)/e[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;let e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(e/i)/Math.log(t);return function(s){return e/Math.pow(t,s*r)}}getRotation(){return this.get(Te.ROTATION)}getValueForResolutionFunction(t){let e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/e;return function(o){return Math.log(i/o)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t),i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){let t=this.getProjection(),e=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),s=this.padding_;if(s){let o=this.getViewportSizeMinusPadding_();r=Eh(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],e,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let t,e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,r;if(this.resolutions_){let s=Cn(this.resolutions_,t,1);e=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return e+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let e=V(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,V(t-e,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(K(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){K(!Vi(t),25);let r=pe(t,this.getProjection());i=Ma(r)}else if(t.getType()==="Circle"){let r=pe(t.getExtent(),this.getProjection());i=Ma(r),i.rotate(this.getRotation(),qt(r))}else{let r=$i();r?i=t.clone().transform(r,this.getProjection()):i=t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){let e=this.getRotation(),i=Math.cos(e),r=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride(),a=1/0,l=1/0,h=-1/0,c=-1/0;for(let u=0,d=s.length;u<d;u+=o){let m=s[u]*i-s[u+1]*r,p=s[u]*r+s[u+1]*i;a=Math.min(a,m),l=Math.min(l,p),h=Math.max(h,m),c=Math.max(c,p)}return[a,l,h,c]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());let r=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1,o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;let a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);let h=this.getRotation(),c=Math.sin(h),u=Math.cos(h),d=qt(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;let m=d[0]*u-d[1]*c,p=d[1]*u+d[0]*c,x=this.getConstrainedCenter([m,p],l),f=e.callback?e.callback:se;e.duration!==void 0?this.animateInternal({resolution:l,center:x,duration:e.duration,easing:e.easing},f):(this.targetResolution_=l,this.targetCenter_=x,this.applyTargetState_(!1,!0),Ao(f,!0))}centerOn(t,e,i){this.centerOnInternal(me(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Eh(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,r){let s,o=this.padding_;if(o&&t){let a=this.getViewportSizeMinusPadding_(-i),l=Eh(t,r,[a[0]/2+o[3],a[1]/2+o[0]],e,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){let e=Gn(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){let e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&me(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){let i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=me(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){let i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&me(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){let i=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Te.ROTATION)!==r&&this.set(Te.ROTATION,r),this.get(Te.RESOLUTION)!==o&&(this.set(Te.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Te.CENTER)||!qi(this.get(Te.CENTER),a))&&this.set(Te.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;let r=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!qi(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:ye,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Pt.INTERACTING,1)}endInteraction(t,e,i){i=i&&me(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.setHint(Pt.INTERACTING,-1),this.resolveConstraints(t,e,i)}getConstrainedCenter(t,e){let i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){let i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;let i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};Re=Ch});var Sh={};We(Sh,{default:()=>un});var Rh,un,sr=R(()=>{Vt();Lo();Bt();oe();kt();Rh=class extends ut{constructor(t){super();let e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){rn(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&rn(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)rt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==se&&this.listenerKeys.push($(t,Ce.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}},un=Rh});var Ih,Af,Mf=R(()=>{sr();ft();sn();vt();hn();kt();Ih=class extends un{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:e+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;let a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(G.CLICK,this.handleClick_.bind(this),!1);let h=e+" "+Fi+" "+Kn+(this.collapsed_&&this.collapsible_?" "+Wa:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){let e={},i=[],r=!0,s=t.layerStatesArray;for(let o=0,a=s.length;o<a;++o){let l=s[o];if(!Zn(l,t.viewState))continue;let h=l.layer.getSource();if(!h)continue;let c=h.getAttributions();if(!c)continue;let u=c(t);if(!!u)if(r=r&&h.getAttributionsCollapsible()!==!1,Array.isArray(u))for(let d=0,m=u.length;d<m;++d)u[d]in e||(i.push(u[d]),e[u[d]]=!0);else u in e||(i.push(u),e[u]=!0)}return this.overrideCollapsible_||this.setCollapsible(r),i}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Kt(e,this.renderedAttributions_)){so(this.ulElement_);for(let r=0,s=e.length;r<s;++r){let o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Wa),this.collapsed_?Xa(this.collapseLabel_,this.label_):Xa(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},Af=Ih});var vh,Pf,Of=R(()=>{sr();ft();sn();Xi();vh=class extends un{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});let e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"\u21E7",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));let s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(G.CLICK,this.handleClick_.bind(this),!1);let a=e+" "+Fi+" "+Kn,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Vr)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let e=this.getMap().getView();if(!e)return;let i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:ye}):e.setRotation(0))}render(t){let e=t.frameState;if(!e)return;let i=e.viewState.rotation;if(i!=this.rotation_){let r="rotate("+i+"rad)";if(this.autoHide_){let s=this.element.classList.contains(Vr);!s&&i===0?this.element.classList.add(Vr):s&&i!==0&&this.element.classList.remove(Vr)}this.label_.style.transform=r}this.rotation_=i}},Pf=vh});var Lh,Df,Ff=R(()=>{sr();ft();sn();Xi();Lh=class extends un{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});let e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(G.CLICK,this.handleClick_.bind(this,i),!1);let u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=h,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(G.CLICK,this.handleClick_.bind(this,-i),!1);let d=e+" "+Fi+" "+Kn,m=this.element;m.className=d,m.appendChild(c),m.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){let i=this.getMap().getView();if(!i)return;let r=i.getZoom();if(r!==void 0){let s=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:ye})):i.setZoom(s)}}},Df=Lh});function kf(n){n=n||{};let t=new Lt;return(n.zoom!==void 0?n.zoom:!0)&&t.push(new Df(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&t.push(new Pf(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&t.push(new Af(n.attributionOptions)),t}var Nf=R(()=>{Mf();Ii();Of();Ff()});var wh,Gf=R(()=>{wh={ACTIVE:"active"}});function Xf(n,t,e){let i=n.getCenterInternal();if(i){let r=[i[0]+t[0],i[1]+t[1]];n.animateInternal({duration:e!==void 0?e:250,easing:uf,center:n.getConstrainedCenter(r)})}}function or(n,t,e,i){let r=n.getZoom();if(r===void 0)return;let s=n.getConstrainedZoom(r+t),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:e,duration:i!==void 0?i:250,easing:ye})}var bh,ei,ar=R(()=>{Vt();Gf();Xi();bh=class extends ut{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(wh.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(wh.ACTIVE,t)}setMap(t){this.map_=t}};ei=bh});var Ah,Wf,zf=R(()=>{ar();hs();Ah=class extends ei{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==dt.DBLCLICK){let i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();or(a,o,s,this.duration_),i.preventDefault(),e=!0}return!e}},Wf=Ah});function lr(n){let t=n.length,e=0,i=0;for(let r=0;r<t;r++)e+=n[r].clientX,i+=n[r].clientY;return[e/t,i/t]}var Mh,ii,hr=R(()=>{ar();hs();Mh=class extends ei{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==dt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==dt.POINTERUP){let i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==dt.POINTERDOWN){let i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==dt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};ii=Mh});function ds(n){let t=arguments;return function(e){let i=!0;for(let r=0,s=t.length;r<s&&(i=i&&t[r](e),!!i);++r);return i}}var Bf,dp,Mo,Yf,Po,Oo,Uf,Do,Fo,jf,Wi=R(()=>{Bt();li();wt();Bf=function(n){let t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},dp=function(n){let t=n.map.getTargetElement(),e=n.map.getOwnerDocument().activeElement;return t.contains(e)},Mo=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?dp(n):!0},Yf=si,Po=function(n){let t=n.originalEvent;return t.button==0&&!(bc&&Ac&&t.ctrlKey)},Oo=function(n){let t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Uf=function(n){let t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Do=function(n){let t=n.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Fo=function(n){let t=n.originalEvent;return K(t!==void 0,56),t.pointerType=="mouse"},jf=function(n){let t=n.originalEvent;return K(t!==void 0,56),t.isPrimary&&t.button===0}});var Ph,Kf,Vf=R(()=>{hr();Bt();Wi();Xi();wi();Ph=class extends ii{constructor(t){super({stopDown:oi}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let e=t.condition?t.condition:ds(Oo,jf);this.condition_=t.onFocusOnly?ds(Mo,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());let e=this.targetPointers,i=lr(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){let r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=t.map.getView();su(r,o.getResolution()),Nn(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){let e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:ye})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){let i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1}},Kf=Ph});var Oh,Zf,Hf=R(()=>{hr();Bt();Wi();bo();Oh=class extends ii{constructor(t){t=t||{},super({stopDown:oi}),this.condition_=t.condition?t.condition:Bf,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Fo(t))return;let e=t.map,i=e.getView();if(i.getConstraints().rotation===rr)return;let r=e.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){let a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Fo(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Fo(t)&&Po(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},Zf=Oh});var Dh,qf,Jf=R(()=>{Er();to();Dh=class extends Si{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let t=this.startPixel_,e=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+i,r.top=Math.min(t[1],e[1])+i,r.width=Math.abs(e[0]-t[0])+i,r.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){let t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Wu([r])}getGeometry(){return this.geometry_}},qf=Dh});var ko,fs,Fh,$f,Qf=R(()=>{ve();hr();Jf();Wi();ko={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},fs=class extends Rt{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}},Fh=class extends ii{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new qf(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Po,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){let r=i[0]-e[0],s=i[1]-e[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new fs(ko.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);let e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new fs(e?ko.BOXEND:ko.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new fs(ko.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}},$f=Fh});var kh,tg,eg=R(()=>{Qf();Xi();Wi();kh=class extends $f{constructor(t){t=t||{};let e=t.condition?t.condition:Uf;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){let i=this.getMap().getView(),r=this.getGeometry();if(this.out_){let s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:ye})}},tg=kh});var zi,ig=R(()=>{zi={LEFT:37,UP:38,RIGHT:39,DOWN:40}});var Nh,ng,rg=R(()=>{ft();ar();ig();Wi();wi();Nh=class extends ei{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return Oo(e)&&Do(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==G.KEYDOWN){let i=t.originalEvent,r=i.keyCode;if(this.condition_(t)&&(r==zi.DOWN||r==zi.LEFT||r==zi.RIGHT||r==zi.UP)){let o=t.map.getView(),a=o.getResolution()*this.pixelDelta_,l=0,h=0;r==zi.DOWN?h=-a:r==zi.LEFT?l=-a:r==zi.RIGHT?l=a:h=a;let c=[l,h];Nn(c,o.getRotation()),Xf(o,c,this.duration_),i.preventDefault(),e=!0}}return!e}},ng=Nh});var Gh,sg,og=R(()=>{ft();ar();Wi();Gh=class extends ei{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:Do,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==G.KEYDOWN||t.type==G.KEYPRESS){let i=t.originalEvent,r=i.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){let s=t.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_,a=s.getView();or(a,o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},sg=Gh});var Xh,ag,lg=R(()=>{ft();ar();li();Wi();pt();Xh=class extends ei{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;let e=t.condition?t.condition:Yf;this.condition_=t.onFocusOnly?ds(Mo,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==G.WHEEL)return!0;let i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==G.WHEEL&&(s=r.deltaY,wc&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=vs),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;let o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");let a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;let l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){let e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-V(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),or(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},ag=Xh});var Wh,hg,cg=R(()=>{hr();Bt();bo();Wh=class extends ii{constructor(t){t=t||{};let e=t;e.stopDown||(e.stopDown=oi),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0,i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){let c=s-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=c}this.lastAngle_=s;let o=t.map,a=o.getView();if(a.getConstraints().rotation===rr)return;let l=o.getViewport().getBoundingClientRect(),h=lr(this.targetPointers);h[0]-=l.left,h[1]-=l.top,this.anchor_=o.getCoordinateFromPixelInternal(h),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}},hg=Wh});var zh,ug,dg=R(()=>{hr();Bt();zh=class extends ii{constructor(t){t=t||{};let e=t;e.stopDown||(e.stopDown=oi),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1,i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;let l=t.map,h=l.getView();e!=1&&(this.lastScaleDelta_=e);let c=l.getViewport().getBoundingClientRect(),u=lr(this.targetPointers);u[0]-=c.left,u[1]-=c.top,this.anchor_=l.getCoordinateFromPixelInternal(u),l.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){let i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}else return!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}},ug=zh});function fg(n){n=n||{};let t=new Lt,e=new Ro(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&t.push(new Zf),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&t.push(new Wf({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&t.push(new Kf({onFocusOnly:n.onFocusOnly,kinetic:e})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&t.push(new hg),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&t.push(new ug({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(t.push(new ng),t.push(new sg({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&t.push(new ag({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&t.push(new tg({duration:n.zoomDuration})),t}var gg=R(()=>{Ii();zf();Vf();Hf();eg();rg();og();ih();lg();cg();dg()});function mg(n){if(n instanceof ln){n.setMapInternal(null);return}n instanceof ls&&n.getLayers().forEach(mg)}function pg(n,t){if(n instanceof ln){n.setMapInternal(t);return}if(n instanceof ls){let e=n.getLayers().getArray();for(let i=0,r=e.length;i<r;++i)pg(e[i],t)}}function fp(n){let t=null;n.keyboardEventTarget!==void 0&&(t=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);let e={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new ls({layers:n.layers});e[Nt.LAYERGROUP]=i,e[Nt.TARGET]=n.target,e[Nt.VIEW]=n.view instanceof Re?n.view:new Re;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Lt(n.controls.slice()):(K(typeof n.controls.getArray=="function",47),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Lt(n.interactions.slice()):(K(typeof n.interactions.getArray=="function",48),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Lt(n.overlays.slice()):(K(typeof n.overlays.getArray=="function",49),o=n.overlays):o=new Lt,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:e}}var Bh,No,_g=R(()=>{Vt();Ii();Cr();mf();ft();hn();pf();Io();ch();hs();So();Lo();_f();En();lh();Yn();fh();Th();_o();li();Bt();be();wt();st();Nf();gg();It();gt();Di();oe();kt();Bh=class extends ut{constructor(t){super(),t=t||{},this.on,this.once,this.un;let e=fp(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:vs,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ft(),this.pixelToCoordinateTransform_=Ft(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||kf(),this.interactions=e.interactions||fg({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new wo(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Nt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Nt.VIEW,this.handleViewChanged_),this.addChangeListener(Nt.SIZE,this.handleSizeChanged_),this.addChangeListener(Nt.TARGET,this.handleTargetChanged_),this.setProperties(e.values);let i=this;t.view&&!(t.view instanceof Re)&&t.view.then(function(r){i.setView(new Re(r))}),this.controls.addEventListener(Ot.ADD,function(r){r.element.setMap(this)}.bind(this)),this.controls.addEventListener(Ot.REMOVE,function(r){r.element.setMap(null)}.bind(this)),this.interactions.addEventListener(Ot.ADD,function(r){r.element.setMap(this)}.bind(this)),this.interactions.addEventListener(Ot.REMOVE,function(r){r.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(Ot.ADD,function(r){this.addOverlayInternal_(r.element)}.bind(this)),this.overlays_.addEventListener(Ot.REMOVE,function(r){let s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}.bind(this)),this.controls.forEach(function(r){r.setMap(this)}.bind(this)),this.interactions.forEach(function(r){r.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){pg(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){let e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;let r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};let s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:si,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,e,null,o,null)}getFeaturesAtPixel(t,e){let i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},e),i}getAllLayers(){let t=[];function e(i){i.forEach(function(r){r instanceof ls?e(r.getLayers()):t.push(r)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;let i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};let r=e.layerFilter!==void 0?e.layerFilter:si,s=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){let e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]}getTarget(){return this.get(Nt.TARGET)}getTargetElement(){let t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null}getCoordinateFromPixel(t){return Gn(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){let e=this.frameState_;return e?_t(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){let e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Nt.LAYERGROUP)}setLayers(t){let e=this.getLayerGroup();if(t instanceof Lt){e.setLayers(t);return}let i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){let r=t[e];if(!r.visible)continue;let s=r.layer.getRenderer();if(s&&!s.ready)return!0;let o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){let e=me(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){let e=this.frameState_;return e?_t(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Nt.SIZE)}getView(){return this.get(Nt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,r){return Ef(this.frameState_,t,e,i,r)}handleBrowserEvent(t,e){e=e||t.type;let i=new Ee(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;let e=t.originalEvent,i=e.type;if(i===cs.POINTERDOWN||i===G.WHEEL||i===G.KEYDOWN){let r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){let r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){let o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){let t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){let o=t.viewHints;if(o[Pt.ANIMATING]||o[Pt.INTERACTING]){let a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(te.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(te.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ti(Ce.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ti(Ce.LOADSTART,this,t))));let i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,i=this.targetChangeHandlerKeys_.length;e<i;++e)rt(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(G.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(G.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,rn(this.viewport_)}let t=this.getTargetElement();if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new gf(this)),this.mapBrowserEventHandler_=new vo(this,this.moveTolerance_);for(let r in dt)this.mapBrowserEventHandler_.addEventListener(dt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(G.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(G.WHEEL,this.boundHandleBrowserEvent_,Ls?{passive:!1}:!1);let e=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[$(i,G.KEYDOWN,this.handleBrowserEvent,this),$(i,G.KEYPRESS,this.handleBrowserEvent,this),$(e,G.RESIZE,this.updateSize,this)]}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(rt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(rt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=$(t,Le.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=$(t,G.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(rt),this.layerGroupPropertyListenerKeys_=null);let t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ne("addlayer",t)),this.layerGroupPropertyListenerKeys_=[$(t,Le.PROPERTYCHANGE,this.render,this),$(t,G.CHANGE,this.render,this),$(t,"addlayer",this.handleLayerAdd_,this),$(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){let r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){mg(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){let e=this.getSize(),i=this.getView(),r=this.frameState_,s=null;if(e!==void 0&&ka(e)&&i&&i.isDef()){let o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Ir(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:H(this),renderTargets:{}},a.nextCenter&&a.nextResolution){let l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=Ir(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Vi(this.previousExtent_)&&!Ae(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ti(Ce.MOVESTART,this,r)),this.previousExtent_=Mn(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Pt.ANIMATING]&&!s.viewHints[Pt.INTERACTING]&&!Ae(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ti(Ce.MOVEEND,this,s)),As(s.extent,this.previousExtent_))),this.dispatchEvent(new ti(Ce.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Ce.LOADSTART)||this.hasListener(Ce.LOADEND)||this.hasListener(te.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){let e=this.getLayerGroup();e&&this.handleLayerRemove_(new Ne("removelayer",e)),this.set(Nt.LAYERGROUP,t)}setSize(t){this.set(Nt.SIZE,t)}setTarget(t){this.set(Nt.TARGET,t)}setView(t){if(!t||t instanceof Re){this.set(Nt.VIEW,t);return}this.set(Nt.VIEW,new Re);let e=this;t.then(function(i){e.setView(new Re(i))})}updateSize(){let t=this.getTargetElement(),e;if(t){let i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(r)&&!isNaN(s)&&(e=[r,s],!ka(e)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){let t=this.getView();if(t){let e,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}};No=Bh});var Xt,Yh,xg,yg=R(()=>{Vt();Lo();sn();st();oe();kt();Xt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},Yh=class extends ut{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+td,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Xt.ELEMENT,this.handleElementChanged),this.addChangeListener(Xt.MAP,this.handleMapChanged),this.addChangeListener(Xt.OFFSET,this.handleOffsetChanged),this.addChangeListener(Xt.POSITION,this.handlePositionChanged),this.addChangeListener(Xt.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(Xt.ELEMENT)}getId(){return this.id}getMap(){return this.get(Xt.MAP)||null}getOffset(){return this.get(Xt.OFFSET)}getPosition(){return this.get(Xt.POSITION)}getPositioning(){return this.get(Xt.POSITIONING)}handleElementChanged(){so(this.element);let t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(rn(this.element),rt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let t=this.getMap();if(t){this.mapPostrenderListenerKey=$(t,Ce.POSTRENDER,this.render,this),this.updatePixelPosition();let e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Xt.ELEMENT,t)}setMap(t){this.set(Xt.MAP,t)}setOffset(t){this.set(Xt.OFFSET,t)}setPosition(t){this.set(Xt.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){let e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Xt.POSITION))return;let i=this.getRect(e.getTargetElement(),e.getSize()),r=this.getElement(),s=this.getRect(r,[qu(r),Ju(r)]);t=t||{};let o=t.margin===void 0?20:t.margin;if(!Zt(i,s)){let a=s[0]-i[0],l=i[2]-s[2],h=s[1]-i[1],c=i[3]-s[3],u=[0,0];if(a<0?u[0]=a-o:l<0&&(u[0]=Math.abs(l)+o),h<0?u[1]=h-o:c<0&&(u[1]=Math.abs(c)+o),u[0]!==0||u[1]!==0){let d=e.getView().getCenterInternal(),m=e.getPixelFromCoordinateInternal(d);if(!m)return;let p=[m[0]+u[0],m[1]+u[1]],x=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(p),duration:x.duration,easing:x.easing})}}}getRect(t,e){let i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+e[0],s+e[1]]}setPositioning(t){this.set(Xt.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){let t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}let i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,e){let i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let o=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px",l="0%",h="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?h="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(h="-50%");let c=`translate(${l}, ${h}) translate(${o}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,i.transform=c)}getOptions(){return this.options}},xg=Yh});var Uh,Eg,Cg=R(()=>{wt();Uh=class{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){let i=this.entries_[t];return K(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){let e=this.entries_[t];return K(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){let t=new Array(this.count_),e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){let t=new Array(this.count_),e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(!!this.containsKey(t))return this.entries_[t].value_}pop(){let t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){K(!(t in this.entries_),16);let i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}},Eg=Uh});function jh(n,t,e,i){return i!==void 0?(i[0]=n,i[1]=t,i[2]=e,i):[n,t,e]}function dn(n,t,e){return n+"/"+t+"/"+e}function Go(n){return dn(n[0],n[1],n[2])}function Tg(n){return n.split("/").map(Number)}function Rg(n){return(n[1]<<n[0])+n[2]}function Sg(n,t){let e=n[0],i=n[1],r=n[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;let s=t.getFullTileRange(e);return s?s.containsXY(i,r):!0}var fn=R(()=>{});var Kh,cr,Xo=R(()=>{Cg();fn();Kh=class extends Eg{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let t=this.peekFirstKey(),i=Tg(t)[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(Go(r.tileCoord)),r.release())}.bind(this))}},cr=Kh});function gn(n,t,e,i,r){return r!==void 0?(r.minX=n,r.maxX=t,r.minY=e,r.maxY=i,r):new Wo(n,t,e,i)}var Wo,ur,zo=R(()=>{Wo=class{constructor(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}};ur=Wo});var Ig,Vh,vg,Lg=R(()=>{ir();kt();gt();Ig=[],Vh=class extends Qe{constructor(t,e,i,r){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){let e=H(t);return e in this.context_||(this.context_[e]=xt(1,1,Ig)),this.context_[e]}hasContext(t){return H(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){let e=H(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(let t in this.context_){let e=this.context_[t];jn(e),Ig.push(e.canvas),delete this.context_[t]}super.release()}},vg=Vh});var Zh,wg,bg=R(()=>{ir();$e();Zh=class extends Qe{constructor(t,e,i,r,s,o){super(t,e,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==W.IDLE&&(this.setState(W.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(W.ERROR)}setFeatures(t){this.features_=t,this.setState(W.LOADED)}setLoader(t){this.loader_=t}},wg=Zh});var Ag={};We(Ag,{AssertionError:()=>yn,Collection:()=>Lt,Disposable:()=>Si,Feature:()=>Rr,Geolocation:()=>Bu,Graticule:()=>of,Image:()=>ld,ImageBase:()=>qn,ImageCanvas:()=>lf,ImageTile:()=>nr,Kinetic:()=>Ro,Map:()=>No,MapBrowserEvent:()=>Ee,MapBrowserEventHandler:()=>vo,MapEvent:()=>ti,Object:()=>ut,Observable:()=>In,Overlay:()=>xg,Tile:()=>Qe,TileCache:()=>cr,TileQueue:()=>wo,TileRange:()=>ur,VERSION:()=>Sc,VectorRenderTile:()=>vg,VectorTile:()=>wg,View:()=>Re,getUid:()=>H});var Hh=R(()=>{Ts();Ii();Er();Is();Yu();af();uo();co();hf();To();ih();_g();Io();ch();So();Vt();Rs();yg();ir();Xo();fh();zo();Lg();bg();Th();gt()});var Zg=Ho((dc,fc)=>{(function(n,t){typeof dc=="object"&&typeof fc<"u"?fc.exports=t((sr(),de(Sh)),(Jr(),de(od)),(fo(),de(ud)),(zl(),de(Ud)),(Hl(),de($d)),(Zs(),de(Au)),(Is(),de(Lc)),(It(),de(Ca))):typeof define=="function"&&define.amd?define(["ol/control/Control","ol/style/Style","ol/style/Icon","ol/layer/Vector","ol/source/Vector","ol/geom/Point","ol/Feature","ol/proj"],t):(n=typeof globalThis<"u"?globalThis:n||self).Geocoder=t(n.ol.control.Control,n.ol.style.Style,n.ol.style.Icon,n.ol.layer.Vector,n.ol.source.Vector,n.ol.geom.Point,n.ol.Feature,n.ol.proj)})(dc,function(n,t,e,i,r,s,o,a){"use strict";function l(F){return F&&typeof F=="object"&&"default"in F?F:{default:F}}var h=l(n),c=l(t),u=l(e),d=l(i),m=l(r),p=l(s),x=l(o),f=l(a),g="gcd-container",_="gcd-button-control",y="gcd-input-query",E="gcd-input-reset",C={namespace:"ol-geocoder",spin:"gcd-pseudo-rotate",hidden:"gcd-hidden",address:"gcd-address",country:"gcd-country",city:"gcd-city",road:"gcd-road",olControl:"ol-control",glass:{container:"gcd-gl-container",control:"gcd-gl-control",button:"gcd-gl-btn",input:"gcd-gl-input",expanded:"gcd-gl-expanded",reset:"gcd-gl-reset",result:"gcd-gl-result"},inputText:{container:"gcd-txt-container",control:"gcd-txt-control",input:"gcd-txt-input",reset:"gcd-txt-reset",icon:"gcd-txt-glass",result:"gcd-txt-result"}},v={containerId:g,buttonControlId:_,inputQueryId:y,inputResetId:E,cssClasses:C};let w=Object.freeze({__proto__:null,containerId:g,buttonControlId:_,inputQueryId:y,inputResetId:E,cssClasses:C,default:v}),P="addresschosen",O="nominatim",k="reverse",N="glass-button",z="text-input",X="osm",at="mapquest",Z="photon",b="bing",T="opencage",L={provider:X,placeholder:"Search for an address",featureStyle:null,targetType:N,lang:"en-US",limit:5,keepOpen:!1,preventDefault:!1,autoComplete:!1,autoCompleteMinLength:2,autoCompleteTimeout:200,debug:!1};function M(F,S="Assertion failed"){if(!F)throw typeof Error<"u"?new Error(S):S}function D(F){let S=function(){if("performance"in window==0&&(window.performance={}),"now"in window.performance==0){let I=Date.now();performance.timing&&performance.timing.navigationStart&&(I=performance.timing.navigationStart),window.performance.now=()=>Date.now()-I}return window.performance.now()}().toString(36);return F?F+S:S}function Y(F){return/^\d+$/u.test(F)}function A(F,S,I){if(Array.isArray(F))return void F.forEach(J=>A(J,S));let B=Array.isArray(S)?S:S.split(/\s+/u),U=B.length;for(;U--;)q(F,B[U])||Et(F,B[U],I)}function lt(F,S,I){if(Array.isArray(F))return void F.forEach(J=>lt(J,S,I));let B=Array.isArray(S)?S:S.split(/\s+/u),U=B.length;for(;U--;)q(F,B[U])&&he(F,B[U],I)}function q(F,S){return F.classList?F.classList.contains(S):Wt(S).test(F.className)}function tt(F,S){return F.replace(/\{\s*([\w-]+)\s*\}/gu,(I,B)=>{let U=S[B]===void 0?"":S[B];return String(U).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")})}function Dt(F,S){let I;if(Array.isArray(F)){if(I=document.createElement(F[0]),F[1].id&&(I.id=F[1].id),F[1].classname&&(I.className=F[1].classname),F[1].attr){let{attr:U}=F[1];if(Array.isArray(U)){let J=-1;for(;++J<U.length;)I.setAttribute(U[J].name,U[J].value)}else I.setAttribute(U.name,U.value)}}else I=document.createElement(F);I.innerHTML=S;let B=document.createDocumentFragment();for(;I.childNodes[0];)B.append(I.childNodes[0]);return I.append(B),I}function Wt(F){return new RegExp(`(^|\\s+) ${F} (\\s+|$)`,"u")}function Et(F,S,I){F.classList?F.classList.add(S):F.className=`${F.className} ${S}`.trim(),I&&Y(I)&&window.setTimeout(()=>he(F,S),I)}function he(F,S,I){F.classList?F.classList.remove(S):F.className=F.className.replace(Wt(S)," ").trim(),I&&Y(I)&&window.setTimeout(()=>Et(F,S),I)}let ot=w.cssClasses;class Se{constructor(S){this.options=S,this.els=this.createControl()}createControl(){let S,I,B;return this.options.targetType===z?(I=`${ot.namespace} ${ot.inputText.container}`,S=Dt(["div",{id:w.containerId,classname:I}],Se.input),B={container:S,control:S.querySelector(`.${ot.inputText.control}`),input:S.querySelector(`.${ot.inputText.input}`),reset:S.querySelector(`.${ot.inputText.reset}`),result:S.querySelector(`.${ot.inputText.result}`)}):(I=`${ot.namespace} ${ot.glass.container}`,S=Dt(["div",{id:w.containerId,classname:I}],Se.glass),B={container:S,control:S.querySelector(`.${ot.glass.control}`),button:S.querySelector(`.${ot.glass.button}`),input:S.querySelector(`.${ot.glass.input}`),reset:S.querySelector(`.${ot.glass.reset}`),result:S.querySelector(`.${ot.glass.result}`)}),B.input.placeholder=this.options.placeholder,B}}Se.glass=`
  <div class="${ot.glass.control} ${ot.olControl}">
    <button type="button" id="${w.buttonControlId}" class="${ot.glass.button}"></button>
    <input type="text" id="${w.inputQueryId}" class="${ot.glass.input}" autocomplete="off" placeholder="Search ...">
    <a id="${w.inputResetId}" class="${ot.glass.reset} ${ot.hidden}"></a>
  </div>
  <ul class="${ot.glass.result}"></ul>
`,Se.input=`
  <div class="${ot.inputText.control}">
    <input type="text" id="${w.inputQueryId}" class="${ot.inputText.input}" autocomplete="off" placeholder="Search ...">
    <span class="${ot.inputText.icon}"></span>
    <button type="button" id="${w.inputResetId}" class="${ot.inputText.reset} ${ot.hidden}"></button>
  </div>
  <ul class="${ot.inputText.result}"></ul>
`;class Ci{constructor(){this.settings={url:"https://photon.komoot.io/api/",params:{q:"",limit:10,lang:"en"},langs:["de","it","fr","en"]}}getParameters(S){return S.lang=S.lang.toLowerCase(),{url:this.settings.url,params:{q:S.query,limit:S.limit||this.settings.params.limit,lang:this.settings.langs.includes(S.lang)?S.lang:this.settings.params.lang}}}handleResponse(S){return S.features.length===0?[]:S.features.map(I=>({lon:I.geometry.coordinates[0],lat:I.geometry.coordinates[1],address:{name:I.properties.name,postcode:I.properties.postcode,city:I.properties.city,state:I.properties.state,country:I.properties.country},original:{formatted:I.properties.name,details:I.properties}}))}}class pn{constructor(){this.settings={url:"https://nominatim.openstreetmap.org/search/",params:{q:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(S){return{url:this.settings.url,params:{q:S.query,format:this.settings.params.format,addressdetails:this.settings.params.addressdetails,limit:S.limit||this.settings.params.limit,countrycodes:S.countrycodes||this.settings.params.countrycodes,"accept-language":S.lang||this.settings.params["accept-language"]}}}handleResponse(S){return S.length===0?[]:S.map(I=>({lon:I.lon,lat:I.lat,bbox:I.boundingbox,address:{name:I.display_name,road:I.address.road||"",houseNumber:I.address.house_number||"",postcode:I.address.postcode,city:I.address.city||I.address.town,state:I.address.state,country:I.address.country},original:{formatted:I.display_name,details:I.address}}))}}class Ge{constructor(){this.settings={url:"https://open.mapquestapi.com/nominatim/v1/search.php",params:{q:"",key:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(S){return{url:this.settings.url,params:{q:S.query,key:S.key,format:"json",addressdetails:1,limit:S.limit||this.settings.params.limit,countrycodes:S.countrycodes||this.settings.params.countrycodes,"accept-language":S.lang||this.settings.params["accept-language"]}}}handleResponse(S){return S.length===0?[]:S.map(I=>({lon:I.lon,lat:I.lat,address:{name:I.address.neighbourhood||"",road:I.address.road||"",postcode:I.address.postcode,city:I.address.city||I.address.town,state:I.address.state,country:I.address.country},original:{formatted:I.display_name,details:I.address}}))}}class Yi{constructor(){this.settings={url:"https://dev.virtualearth.net/REST/v1/Locations",callbackName:"jsonp",params:{query:"",key:"",includeNeighborhood:0,maxResults:10}}}getParameters(S){return{url:this.settings.url,callbackName:this.settings.callbackName,params:{query:S.query,key:S.key,includeNeighborhood:S.includeNeighborhood||this.settings.params.includeNeighborhood,maxResults:S.maxResults||this.settings.params.maxResults}}}handleResponse(S){let{resources:I}=S.resourceSets[0];return I.length===0?[]:I.map(B=>({lon:B.point.coordinates[1],lat:B.point.coordinates[0],address:{name:B.name},original:{formatted:B.address.formattedAddress,details:B.address}}))}}class Xe{constructor(){this.settings={url:"https://api.opencagedata.com/geocode/v1/json?",params:{q:"",key:"",limit:10,countrycode:"",pretty:1,no_annotations:1}}}getParameters(S){return{url:this.settings.url,params:{q:S.query,key:S.key,limit:S.limit||this.settings.params.limit,countrycode:S.countrycodes||this.settings.params.countrycodes}}}handleResponse(S){return S.results.length===0?[]:S.results.map(I=>({lon:I.geometry.lng,lat:I.geometry.lat,address:{name:I.components.house_number||"",road:I.components.road||"",postcode:I.components.postcode,city:I.components.city||I.components.town,state:I.components.state,country:I.components.country},original:{formatted:I.formatted,details:I.components}}))}}function _n(F){return new Promise((S,I)=>{let B=function(J,Ct){return Ct&&typeof Ct=="object"&&(J+=(/\?/u.test(J)?"&":"?")+Ui(Ct)),J}(F.url,F.data),U={method:"GET",mode:"cors",credentials:"same-origin"};F.jsonp?function(J,Ct,zt){let{head:Gt}=document,nt=document.createElement("script"),Ie=`f${Math.round(Math.random()*Date.now())}`;nt.setAttribute("src",`${J+(J.indexOf("?")>0?"&":"?")+Ct}=${Ie}`),window[Ie]=fr=>{window[Ie]=void 0,setTimeout(()=>Gt.removeChild(nt),0),zt(fr)},Gt.append(nt)}(B,F.callbackName,S):fetch(B,U).then(J=>J.json()).then(S).catch(I)})}function Ui(F){return Object.keys(F).reduce((S,I)=>(S.push(typeof F[I]=="object"?Ui(F[I]):`${encodeURIComponent(I)}=${encodeURIComponent(F[I])}`),S),[]).join("&")}let Tt=w.cssClasses;class Ti{constructor(S,I){this.Base=S,this.layerName=D("geocoder-layer-"),this.layer=new d.default({name:this.layerName,source:new m.default}),this.options=S.options,this.options.provider=typeof this.options.provider=="string"?this.options.provider.toLowerCase():this.options.provider,this.provider=this.newProvider(),this.els=I,this.lastQuery="",this.container=this.els.container,this.registeredListeners={mapClick:!1},this.setListeners()}setListeners(){let S,I,B=U=>{U.stopPropagation(),q(this.els.control,Tt.glass.expanded)?this.collapse():this.expand()};this.els.input.addEventListener("keypress",U=>{let J=U.target.value.trim();(U.key?U.key==="Enter":U.which?U.which===13:!!U.keyCode&&U.keyCode===13)&&(U.preventDefault(),this.query(J))},!1),this.els.input.addEventListener("click",U=>U.stopPropagation(),!1),this.els.input.addEventListener("input",U=>{let J=U.target.value.trim();J.length!==0?lt(this.els.reset,Tt.hidden):A(this.els.reset,Tt.hidden),this.options.autoComplete&&J!==I&&(I=J,S&&clearTimeout(S),S=setTimeout(()=>{J.length>=this.options.autoCompleteMinLength&&this.query(J)},this.options.autoCompleteTimeout))},!1),this.els.reset.addEventListener("click",U=>{this.els.input.focus(),this.els.input.value="",this.lastQuery="",A(this.els.reset,Tt.hidden),this.clearResults()},!1),this.options.targetType===N&&this.els.button.addEventListener("click",B,!1)}query(S){this.provider||(this.provider=this.newProvider());let I=this.provider.getParameters({query:S,key:this.options.key,lang:this.options.lang,countrycodes:this.options.countrycodes,limit:this.options.limit});if(this.lastQuery===S&&this.els.result.firstChild)return;this.lastQuery=S,this.clearResults(),A(this.els.reset,Tt.spin);let B={url:I.url,data:I.params};I.callbackName&&(B.jsonp=!0,B.callbackName=I.callbackName),_n(B).then(U=>{this.options.debug&&console.info(U),lt(this.els.reset,Tt.spin);let J=this.provider.handleResponse(U);J&&(this.createList(J),this.listenMapClick())}).catch(U=>{lt(this.els.reset,Tt.spin);let J=Dt("li","<h5>Error! No internet connection?</h5>");this.els.result.append(J)})}createList(S){let I=this.els.result;S.forEach(B=>{let U;this.options.provider===X?U=`<span class="${Tt.road}">${B.address.name}</span>`:U=this.addressTemplate(B.address);let J=Dt("li",`<a href="#">${U}</a>`);J.addEventListener("click",Ct=>{Ct.preventDefault(),this.chosen(B,U,B.address,B.original)},!1),I.append(J)})}chosen(S,I,B,U){let J=this.Base.getMap(),Ct=[Number.parseFloat(S.lon),Number.parseFloat(S.lat)],zt=J.getView().getProjection(),Gt=f.default.transform(Ct,"EPSG:4326",zt),{bbox:nt}=S;nt&&(nt=f.default.transformExtent([nt[2],nt[1],nt[3],nt[0]],"EPSG:4326",zt));let Ie={formatted:I,details:B,original:U};if(this.options.keepOpen===!1&&this.clearResults(!0),this.options.preventDefault===!0)this.Base.dispatchEvent({type:P,address:Ie,coordinate:Gt,bbox:nt,place:S});else{nt?J.getView().fit(nt,{duration:500}):function(Vo,xs,gr=500,mr=2.388657133911758){Vo.getView().animate({duration:gr,resolution:mr},{duration:gr,center:xs})}(J,Gt);let fr=this.createFeature(Gt,Ie);this.Base.dispatchEvent({type:P,address:Ie,feature:fr,coordinate:Gt,bbox:nt,place:S})}}createFeature(S){let I=new x.default(new p.default(S));return this.addLayer(),I.setStyle(this.options.featureStyle),I.setId(D("geocoder-ft-")),this.getSource().addFeature(I),I}addressTemplate(S){let I=[];return S.name&&I.push(['<span class="',Tt.road,'">{name}</span>'].join("")),(S.road||S.building||S.house_number)&&I.push(['<span class="',Tt.road,'">{building} {road} {house_number}</span>'].join("")),(S.city||S.town||S.village)&&I.push(['<span class="',Tt.city,'">{postcode} {city} {town} {village}</span>'].join("")),(S.state||S.country)&&I.push(['<span class="',Tt.country,'">{state} {country}</span>'].join("")),tt(I.join("<br>"),S)}newProvider(){switch(this.options.provider){case X:return new pn;case at:return new Ge;case Z:return new Ci;case b:return new Yi;case T:return new Xe;default:return this.options.provider}}expand(){lt(this.els.input,Tt.spin),A(this.els.control,Tt.glass.expanded),window.setTimeout(()=>this.els.input.focus(),100),this.listenMapClick()}collapse(){this.els.input.value="",this.els.input.blur(),A(this.els.reset,Tt.hidden),lt(this.els.control,Tt.glass.expanded),this.clearResults()}listenMapClick(){if(this.registeredListeners.mapClick)return;let S=this,I=this.Base.getMap().getTargetElement();this.registeredListeners.mapClick=!0,I.addEventListener("click",{handleEvent(B){S.clearResults(!0),I.removeEventListener(B.type,this,!1),S.registeredListeners.mapClick=!1}},!1)}clearResults(S){S&&this.options.targetType===N?this.collapse():function(I){for(;I.firstChild;)I.firstChild.remove()}(this.els.result)}getSource(){return this.layer.getSource()}addLayer(){let S=!1,I=this.Base.getMap();I.getLayers().forEach(B=>{B===this.layer&&(S=!0)}),S||I.addLayer(this.layer)}}class Ri extends h.default{constructor(S=O,I={}){let B,U;M(typeof S=="string","@param `type` should be string!"),M(S===O||S===k,`@param 'type' should be '${O}'
      or '${k}'!`),M(typeof I=="object","@param `options` should be object!"),L.featureStyle=[new c.default({image:new u.default({scale:.7,src:"//cdn.rawgit.com/jonataswalker/map-utils/master/images/marker.png"})})];let J=new Se(I);if(S===O&&(B=J.els.container),super({element:B}),!(this instanceof Ri))return new Ri;this.options=function(Ct,zt){let Gt={};for(let nt in Ct)Object.prototype.hasOwnProperty.call(Ct,nt)&&(Gt[nt]=Ct[nt]);for(let nt in zt)Object.prototype.hasOwnProperty.call(zt,nt)&&(Gt[nt]=zt[nt]);return Gt}(L,I),this.container=B,S===O&&(U=new Ti(this,J.els),this.layer=U.layer)}getLayer(){return this.layer}getSource(){return this.getLayer().getSource()}setProvider(S){this.options.provider=S}setProviderKey(S){this.options.key=S}}return Ri})});var gc=Ho((Ko,Hg)=>{(function(n,t){typeof Ko=="object"&&typeof Hg<"u"?t(Ko,(sr(),de(Sh)),(It(),de(Ca)),(zs(),de(lu)),(Hh(),de(Ag))):typeof define=="function"&&define.amd?define(["exports","ol/control/Control","ol/proj","ol/sphere","ol"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n["ol-print-layout-control"]={},n.ol.control.Control,n.ol.proj,n.ol.sphere,n.ol))})(Ko,function(n,t,e,i,r){"use strict";var s=Object.defineProperty,o=(b,T,L)=>T in b?s(b,T,{enumerable:!0,configurable:!0,writable:!0,value:L}):b[T]=L,a=(b,T,L)=>(o(b,typeof T!="symbol"?T+"":T,L),L);let l=(b=>b&&typeof b=="object"&&"default"in b?b:{default:b})(t),h="";class c{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}let u=c;class d{constructor(T){this.propagationStopped,this.defaultPrevented,this.type=T,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let m=d;function p(){}function x(b){for(let T in b)delete b[T]}class f extends u{constructor(T){super(),this.eventTarget_=T,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(T,L){if(!T||!L)return;let M=this.listeners_||(this.listeners_={}),D=M[T]||(M[T]=[]);D.includes(L)||D.push(L)}dispatchEvent(T){let L=typeof T=="string",M=L?T:T.type,D=this.listeners_&&this.listeners_[M];if(!D)return;let Y=L?new m(T):T;Y.target||(Y.target=this.eventTarget_||this);let A=this.dispatching_||(this.dispatching_={}),lt=this.pendingRemovals_||(this.pendingRemovals_={});M in A||(A[M]=0,lt[M]=0),++A[M];let q;for(let tt=0,Dt=D.length;tt<Dt;++tt)if("handleEvent"in D[tt]?q=D[tt].handleEvent(Y):q=D[tt].call(this,Y),q===!1||Y.propagationStopped){q=!1;break}if(--A[M]===0){let tt=lt[M];for(delete lt[M];tt--;)this.removeEventListener(M,p);delete A[M]}return q}disposeInternal(){this.listeners_&&x(this.listeners_)}getListeners(T){return this.listeners_&&this.listeners_[T]||void 0}hasListener(T){return this.listeners_?T?T in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(T,L){let M=this.listeners_&&this.listeners_[T];if(M){let D=M.indexOf(L);D!==-1&&(this.pendingRemovals_&&T in this.pendingRemovals_?(M[D]=p,++this.pendingRemovals_[T]):(M.splice(D,1),M.length===0&&delete this.listeners_[T]))}}}let g=f,_={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function y(b,T,L,M,D){if(M&&M!==b&&(L=L.bind(M)),D){let A=L;L=function(){b.removeEventListener(T,L),A.apply(this,arguments)}}let Y={target:b,type:T,listener:L};return b.addEventListener(T,L),Y}function E(b,T,L,M){return y(b,T,L,M,!0)}function C(b){b&&b.target&&(b.target.removeEventListener(b.type,b.listener),x(b))}class v extends g{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(_.CHANGE)}getRevision(){return this.revision_}onInternal(T,L){if(Array.isArray(T)){let M=T.length,D=new Array(M);for(let Y=0;Y<M;++Y)D[Y]=y(this,T[Y],L);return D}else return y(this,T,L)}onceInternal(T,L){let M;if(Array.isArray(T)){let D=T.length;M=new Array(D);for(let Y=0;Y<D;++Y)M[Y]=E(this,T[Y],L)}else M=E(this,T,L);return L.ol_key=M,M}unInternal(T,L){let M=L.ol_key;if(M)w(M);else if(Array.isArray(T))for(let D=0,Y=T.length;D<Y;++D)this.removeEventListener(T[D],L);else this.removeEventListener(T,L)}}v.prototype.on,v.prototype.once,v.prototype.un;function w(b){if(Array.isArray(b))for(let T=0,L=b.length;T<L;++T)C(b[T]);else C(b)}class P extends m{constructor(T,L,M){super(T),this.key=L,this.oldValue=M}}var O=(b=>(b.PORTRAIT="portrait",b.LANDSCAPE="landscape",b))(O||{});let k={A4:"A4",A3:"A3",A2:"A2",A1:"A1",A0:"A0",LETTER:"LETTER",TABLOID:"TABLOID",BROADSHEET:"BROADSHEET"},N=25.4,z={A4:{short:210,long:297},A3:{short:297,long:420},A2:{short:420,long:594},A1:{short:594,long:841},A0:{short:841,long:1189},LETTER:{short:8.5*N,long:11*N},TABLOID:{short:11*N,long:17*N},BROADSHEET:{short:17*N,long:22*N}},X={BBOX:"bbox",FORMAT:"format",ORIENTATION:"orientation",MARGIN:"margin"};class at extends l.default{constructor(T={}){let{format:L=k.A4,orientation:M="portrait",margin:D={top:2,bottom:2,left:2,right:2}}=T,{element:Y,printArea:A}=lt();super({element:Y,render:q=>{this.onRender(q)}}),a(this,"printArea"),a(this,"evtKeyMarginChange"),a(this,"_map"),this.printArea=A,this.set(X.ORIENTATION,M),this.set(X.FORMAT,L),this.setMargin(new Z(D)),this.set(X.BBOX,null);function lt(){let q=document.createElement("div");q.className="paper-format";let tt=document.createElement("div");return tt.className="print-area",tt.id="print-area",q.appendChild(tt),{element:q,printArea:tt}}}getOrientation(){return this.get(X.ORIENTATION)}setOrientation(T){if(T.toUpperCase()in O)this.set(X.ORIENTATION,T),this.setElementSize(),this.getMap()&&(this.getMap().renderSync(),this.handleBboxChange()),this.changed();else throw new Error(`orientation must be one of: ${Object.values(O)}`)}getFormat(){return this.get(X.FORMAT)}setFormat(T){if(T.toUpperCase()in k)this.set(X.FORMAT,T.toUpperCase()),this.setElementSize(),this.getMap()&&(this.getMap().renderSync(),this.handleBboxChange()),this.changed();else throw new Error(`format must be on of: ${Object.values(k)}`)}getMargin(){return this.get(X.MARGIN)}setMargin(T){this.evtKeyMarginChange&&w(this.evtKeyMarginChange),this.evtKeyMarginChange=T.on("propertychange",()=>{this.setElementSize(),this.getMap()&&(this.getMap().renderSync(),this.handleBboxChange()),this.hasListener("change:margin")&&this.dispatchEvent(new P("change:margin",X.MARGIN,null)),this.hasListener("propertychange")&&this.dispatchEvent(new P("propertychange",X.MARGIN,null)),this.changed()}),this.set(X.MARGIN,T),this.setElementSize(),this.getMap()&&(this.getMap().renderSync(),this.handleBboxChange()),this.changed()}getBbox(){return this.getMap()?(this.getMap().renderSync(),this.get("bbox")):null}getBboxAsLonLat(){return this.getBbox()?e.transformExtent(this.getBbox(),"EPSG:3857","EPSG:4326"):null}computeBbox(){if(!this.getMap())return null;let{left:T,top:L,right:M,bottom:D}=this.printArea.getBoundingClientRect(),{x:Y,y:A}=this.getMap().getViewport().getBoundingClientRect(),lt=T-Y,q=L-A,tt=M-Y,Dt=D-A,Wt=this.getMap().getCoordinateFromPixel([lt,Dt]),Et=this.getMap().getCoordinateFromPixel([tt,q]);return[...Wt,...Et]}getScaleDenominator(){if(this.getBboxAsLonLat()==null)return null;let T=this.getBboxAsLonLat(),L=T.slice(0,2),M=T.slice(2,4),D=i.getDistance(L,M),{width:Y}=this.getPrintBoxSizeInMM(),A=Y/1e3;return D/A}getPrintBoxSizeInDots(T=192){let{width:L,height:M}=this.getPrintBoxSizeInMM(),D=L/N,Y=M/N;return{width:Math.round(D*T),height:Math.round(Y*T)}}getPrintBoxSizeInMM(){let{short:T,long:L}=z[this.getFormat()],M=(this.getMargin().getLeft()+this.getMargin().getRight())*10,D=(this.getMargin().getTop()+this.getMargin().getBottom())*10;return this.getOrientation()==="portrait"?{width:T-M,height:L-D}:{width:L-M,height:T-D}}getPrintMarginsInPx(){let{width:T,height:L}=this.element.getBoundingClientRect(),{long:M}=z[this.getFormat()],D=this.getOrientation()==="portrait"?L/(M/10):T/(M/10),Y={top:0,bottom:0,left:0,right:0},A=this.getMargin().getProperties(),lt;for(lt in A)Y[lt]=A[lt]*D;return Y}getScreenMapAspectRatio(){var T;if(!((T=this.getMap())!=null&&T.getSize()))return 1;let[L,M]=this.getMap().getSize();return M===0?Number.MAX_SAFE_INTEGER:L/M}getPaperMapAspectRatio(){let{long:T,short:L}=z[this.getFormat()];return this.getOrientation()==="portrait"?L/T:T/L}getRestrictingDimension(){return this.getScreenMapAspectRatio()<this.getPaperMapAspectRatio()?"width":"height"}setElementSize(){this.getRestrictingDimension()==="width"?(this.element.style.height="",this.element.style.width="80%"):(this.element.style.height="80%",this.element.style.width="");let{long:T,short:L}=z[this.getFormat()],M=L/T;this.element.style.aspectRatio=String(this.getOrientation()==="portrait"?M:1/M),this.printArea.style.top=`${this.getPrintMarginsInPx().top}px`,this.printArea.style.bottom=`${this.getPrintMarginsInPx().bottom}px`,this.printArea.style.left=`${this.getPrintMarginsInPx().left}px`,this.printArea.style.right=`${this.getPrintMarginsInPx().right}px`}handleBboxChange(){this.set(X.BBOX,this.computeBbox()),this.changed()}onRender(T){if(!this._map||this._map!==this.getMap()){this._map=this.getMap();let L=this.getMap().getView().on("change",this.handleBboxChange.bind(this)),M=this.getMap().on("change:size",()=>{this.setElementSize(),this.handleBboxChange()});this.getMap().getControls().once("remove",D=>{D.element===this&&(this._map.getView().un("change",L.listener),this._map.un("change:size",M.listener),this._map=null)}),this.setElementSize(),this.set(X.BBOX,this.computeBbox(),!0),this.dispatchEvent("change")}}}class Z extends r.Object{constructor(T={}){super();let{top:L=0,bottom:M=0,left:D=0,right:Y=0}=T;this.set("top",L),this.set("bottom",M),this.set("left",D),this.set("right",Y)}getProperties(){return super.getProperties()}getTop(){return this.get("top")}setTop(T){T=Math.max(0,Number(T)),this.set("top",T),this.changed()}getBottom(){return this.get("bottom")}setBottom(T){T=Math.max(0,Number(T)),this.set("bottom",T),this.changed()}getLeft(){return this.get("left")}setLeft(T){T=Math.max(0,Number(T)),this.set("left",T),this.changed()}getRight(){return this.get("right")}setRight(T){T=Math.max(0,Number(T)),this.set("right",T),this.changed()}}window.ol&&window.ol.control&&(window.ol.control.PrintLayout=at,window.ol.control.PrintLayout.Margin=Z,window.PAPER_FORMAT=k,window.ORIENTATION=O),n.Margin=Z,n.ORIENTATION=O,n.PAPER_FORMAT=k,n.PrintLayout=at,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})});Hh();wl();To();ft();ir();$e();st();It();pt();var gp=10,Mg=.25,qh=class{constructor(t,e,i,r,s,o){this.sourceProj_=t,this.targetProj_=e;let a={},l=Qt(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){let y=_[0]+"/"+_[1];return a[y]||(a[y]=l(_)),a[y]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&et(r)==et(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?et(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?et(this.targetProj_.getExtent()):null;let h=fe(i),c=Dn(i),u=On(i),d=Pn(i),m=this.transformInv_(h),p=this.transformInv_(c),x=this.transformInv_(u),f=this.transformInv_(d),g=gp+(o?Math.max(0,Math.ceil(Math.log2(Sr(i)/(o*o*256*256)))):0);if(this.addQuad_(h,c,u,d,m,p,x,f,g),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(y,E,C){_=Math.min(_,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(function(y){if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-_>this.sourceWorldWidth_/2){let E=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];E[0][0]-_>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-_>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-_>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);let C=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-C<this.sourceWorldWidth_/2&&(y.source=E)}}.bind(this))}a={}}addTriangle_(t,e,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,e,i]})}addQuad_(t,e,i,r,s,o,a,l,h){let c=na([s,o,a,l]),u=this.sourceWorldWidth_?et(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,m=this.sourceProj_.canWrapX()&&u>.5&&u<1,p=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let f=na([t,e,i,r]);p=et(f)/this.targetWorldWidth_>Mg||p}!m&&this.sourceProj_.isGlobal()&&u&&(p=u>Mg||p)}if(!p&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!mt(c,this.maxSourceExtent_))return;let x=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(h>0)p=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(h>0){if(!p){let f=[(t[0]+i[0])/2,(t[1]+i[1])/2],g=this.transformInv_(f),_;m?_=(le(s[0],d)+le(a[0],d))/2-le(g[0],d):_=(s[0]+a[0])/2-g[0];let y=(s[1]+a[1])/2-g[1];p=_*_+y*y>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){let f=[(e[0]+i[0])/2,(e[1]+i[1])/2],g=this.transformInv_(f),_=[(r[0]+t[0])/2,(r[1]+t[1])/2],y=this.transformInv_(_);this.addQuad_(t,e,f,_,s,o,g,y,h-1),this.addQuad_(_,f,i,r,y,g,a,l,h-1)}else{let f=[(t[0]+e[0])/2,(t[1]+e[1])/2],g=this.transformInv_(f),_=[(i[0]+r[0])/2,(i[1]+r[1])/2],y=this.transformInv_(_);this.addQuad_(t,f,_,r,s,g,y,l,h-1),this.addQuad_(f,e,i,_,g,o,a,y,h-1)}return}}if(m){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(t,i,r,s,a,l),(x&14)==0&&this.addTriangle_(t,i,e,s,a,o),x&&((x&13)==0&&this.addTriangle_(e,r,t,o,l,s),(x&7)==0&&this.addTriangle_(e,r,i,o,l,a))}calculateSourceExtent(){let t=bt();return this.triangles_.forEach(function(e,i,r){let s=e.source;Ki(t,s[0]),Ki(t,s[1]),Ki(t,s[2])}),t}getTriangles(){return this.triangles_}},Pg=qh;st();kt();It();pt();var Jh,Qh=[];function Og(n,t,e,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,i)+1,Math.max(e,r)),n.restore()}function $h(n,t){return Math.abs(n[t*4]-210)>2||Math.abs(n[t*4+3]-.75*255)>2}function mp(){if(Jh===void 0){let n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Og(n,4,5,4,0),Og(n,4,5,0,5);let t=n.getImageData(0,0,3,3).data;Jh=$h(t,0)||$h(t,4)||$h(t,8)}return Jh}function Dg(n,t,e,i){let r=Ji(e,t,n),s=Us(t,i,e),o=t.getMetersPerUnit();o!==void 0&&(s*=o);let a=n.getMetersPerUnit();a!==void 0&&(s/=a);let l=n.getExtent();if(!l||ae(l,r)){let h=Us(n,s,r)/s;isFinite(h)&&h>0&&(s/=h)}return s}function Fg(n,t,e,i){let r=qt(e),s=Dg(n,t,r,i);return(!isFinite(s)||s<=0)&&Ms(e,function(o){return s=Dg(n,t,o,i),isFinite(s)&&s>0}),s}function kg(n,t,e,i,r,s,o,a,l,h,c,u){let d=xt(Math.round(e*n),Math.round(e*t),Qh);if(u||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(e,e);function m(E){return Math.round(E*e)/e}d.globalCompositeOperation="lighter";let p=bt();l.forEach(function(E,C,v){Xc(p,E.extent)});let x=et(p),f=At(p),g=xt(Math.round(e*x/i),Math.round(e*f/i));u||(g.imageSmoothingEnabled=!1);let _=e/i;l.forEach(function(E,C,v){let w=E.extent[0]-p[0],P=-(E.extent[3]-p[3]),O=et(E.extent),k=At(E.extent);E.image.width>0&&E.image.height>0&&g.drawImage(E.image,h,h,E.image.width-2*h,E.image.height-2*h,w*_,P*_,O*_,k*_)});let y=fe(o);return a.getTriangles().forEach(function(E,C,v){let w=E.source,P=E.target,O=w[0][0],k=w[0][1],N=w[1][0],z=w[1][1],X=w[2][0],at=w[2][1],Z=m((P[0][0]-y[0])/s),b=m(-(P[0][1]-y[1])/s),T=m((P[1][0]-y[0])/s),L=m(-(P[1][1]-y[1])/s),M=m((P[2][0]-y[0])/s),D=m(-(P[2][1]-y[1])/s),Y=O,A=k;O=0,k=0,N-=Y,z-=A,X-=Y,at-=A;let lt=[[N,z,0,0,T-Z],[X,at,0,0,M-Z],[0,0,N,z,L-b],[0,0,X,at,D-b]],q=iu(lt);if(!!q){if(d.save(),d.beginPath(),mp()||!u){d.moveTo(T,L);let tt=4,Dt=Z-T,Wt=b-L;for(let Et=0;Et<tt;Et++)d.lineTo(T+m((Et+1)*Dt/tt),L+m(Et*Wt/(tt-1))),Et!=tt-1&&d.lineTo(T+m((Et+1)*Dt/tt),L+m((Et+1)*Wt/(tt-1)));d.lineTo(M,D)}else d.moveTo(T,L),d.lineTo(Z,b),d.lineTo(M,D);d.clip(),d.transform(q[0],q[2],q[1],q[3],Z,b),d.translate(p[0]-Y,p[3]-A),d.scale(i/e,-i/e),d.drawImage(g.canvas,0,0),d.restore()}}),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(E,C,v){let w=E.target,P=(w[0][0]-y[0])/s,O=-(w[0][1]-y[1])/s,k=(w[1][0]-y[0])/s,N=-(w[1][1]-y[1])/s,z=(w[2][0]-y[0])/s,X=-(w[2][1]-y[1])/s;d.beginPath(),d.moveTo(k,N),d.lineTo(P,O),d.lineTo(z,X),d.closePath(),d.stroke()}),d.restore()),d.canvas}pt();st();oe();kt();var tc=class extends Qe{constructor(t,e,i,r,s,o,a,l,h,c,u,d){super(s,W.IDLE,{interpolate:!!d}),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let m=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent(),x=this.sourceTileGrid_.getExtent(),f=p?Ue(m,p):m;if(Sr(f)===0){this.state=W.EMPTY;return}let g=t.getExtent();g&&(x?x=Ue(x,g):x=g);let _=r.getResolution(this.wrappedTileCoord_[0]),y=Fg(t,i,f,_);if(!isFinite(y)||y<=0){this.state=W.EMPTY;return}let E=c!==void 0?c:.5;if(this.triangulation_=new Pg(t,i,f,x,y*E,_),this.triangulation_.getTriangles().length===0){this.state=W.EMPTY;return}this.sourceZ_=e.getZForResolution(y);let C=this.triangulation_.calculateSourceExtent();if(x&&(t.canWrapX()?(C[1]=V(C[1],x[1],x[3]),C[3]=V(C[3],x[1],x[3])):C=Ue(C,x)),!Sr(C))this.state=W.EMPTY;else{let v=e.getTileRangeForExtentAndZ(C,this.sourceZ_);for(let w=v.minX;w<=v.maxX;w++)for(let P=v.minY;P<=v.maxY;P++){let O=h(this.sourceZ_,w,P,a);O&&this.sourceTiles_.push(O)}this.sourceTiles_.length===0&&(this.state=W.EMPTY)}}getImage(){return this.canvas_}reproject_(){let t=[];if(this.sourceTiles_.forEach(function(e,i,r){e&&e.getState()==W.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=W.ERROR;else{let e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=kg(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=W.LOADED}this.changed()}load(){if(this.state==W.IDLE){this.state=W.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,r){let s=e.getState();if(s==W.IDLE||s==W.LOADING){t++;let o=$(e,G.CHANGE,function(a){let l=e.getState();(l==W.LOADED||l==W.ERROR||l==W.EMPTY)&&(rt(o),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,r){e.getState()==W.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(rt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(jn(this.canvas_.getContext("2d")),Qh.push(this.canvas_),this.canvas_=null),super.release()}},gs=tc;zo();$e();be();st();It();gt();vt();Di();var ec=class extends po{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=bt(),this.tmpTileRange_=new ur(0,0,0,0)}isDrawableTile(t){let e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==W.LOADED||i==W.EMPTY||i==W.ERROR&&!r}getTile(t,e,i,r){let s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer(),h=a.getSource().getTile(t,e,i,s,o);return h.getState()==W.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(h)||(h=h.getInterimTile()),h}getData(t){let e=this.frameState;if(!e)return null;let i=this.getLayer(),r=_t(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!ae(s,r))return null;let o=e.pixelRatio,a=e.viewState.projection,l=e.viewState,h=i.getRenderSource(),c=h.getTileGridForProjection(l.projection),u=h.getTilePixelRatio(e.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){let m=c.getTileCoordForCoordAndZ(r,d),p=h.getTile(d,m[1],m[2],o,a);if(!(p instanceof nr||p instanceof gs)||p instanceof gs&&p.getState()===W.EMPTY)return null;if(p.getState()!==W.LOADED)continue;let x=c.getOrigin(d),f=Mt(c.getTileSize(d)),g=c.getResolution(d),_=Math.floor(u*((r[0]-x[0])/g-m[1]*f[0])),y=Math.floor(u*((x[1]-r[1])/g-m[2]*f[1])),E=Math.round(u*h.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),_+E,y+E)}return null}loadedTileCallback(t,e,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,e,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){let i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,h=t.pixelRatio,c=this.getLayer(),u=c.getSource(),d=u.getRevision(),m=u.getTileGridForProjection(s),p=m.getZForResolution(o,u.zDirection),x=m.getResolution(p),f=t.extent,g=t.viewState.resolution,_=u.getTilePixelRatio(h),y=Math.round(et(f)/g*h),E=Math.round(At(f)/g*h),C=i.extent&&pe(i.extent,s);C&&(f=Ue(f,pe(i.extent,s)));let v=x*y/2/_,w=x*E/2/_,P=[a[0]-v,a[1]-w,a[0]+v,a[1]+w],O=m.getTileRangeForExtentAndZ(f,p),k={};k[p]={};let N=this.createLoadedTileFinder(u,s,k),z=this.tmpExtent,X=this.tmpTileRange_;this.newTiles_=!1;let at=l?Ps(r.center,g,l,t.size):void 0;for(let lt=O.minX;lt<=O.maxX;++lt)for(let q=O.minY;q<=O.maxY;++q){if(l&&!m.tileCoordIntersectsViewport([p,lt,q],at))continue;let tt=this.getTile(p,lt,q,t);if(this.isDrawableTile(tt)){let Et=H(this);if(tt.getState()==W.LOADED){k[p][tt.tileCoord.toString()]=tt;let he=tt.inTransition(Et);he&&i.opacity!==1&&(tt.endTransition(Et),he=!1),!this.newTiles_&&(he||!this.renderedTiles.includes(tt))&&(this.newTiles_=!0)}if(tt.getAlpha(Et,t.time)===1)continue}let Dt=m.getTileCoordChildTileRange(tt.tileCoord,X,z),Wt=!1;Dt&&(Wt=N(p+1,Dt)),Wt||m.forEachTileCoordParentTileRange(tt.tileCoord,N,X,z)}let Z=x/o*h/_;Yt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,l,-y/2,-E/2);let b=ws(this.pixelTransform);this.useContainer(e,b,this.getBackground(t));let T=this.context,L=T.canvas;wn(this.inversePixelTransform,this.pixelTransform),Yt(this.tempTransform,y/2,E/2,Z,Z,0,-y/2,-E/2),L.width!=y||L.height!=E?(L.width=y,L.height=E):this.containerReused||T.clearRect(0,0,y,E),C&&this.clipUnrotated(T,t,C),u.getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,t),this.renderedTiles.length=0;let M=Object.keys(k).map(Number);M.sort(we);let D,Y,A;i.opacity===1&&(!this.containerReused||u.getOpaque(t.viewState.projection))?M=M.reverse():(D=[],Y=[]);for(let lt=M.length-1;lt>=0;--lt){let q=M[lt],tt=u.getTilePixelSize(q,h,s),Wt=m.getResolution(q)/x,Et=tt[0]*Wt*Z,he=tt[1]*Wt*Z,ot=m.getTileCoordForCoordAndZ(fe(P),q),Se=m.getTileCoordExtent(ot),Ci=_t(this.tempTransform,[_*(Se[0]-P[0])/x,_*(P[3]-Se[3])/x]),pn=_*u.getGutterForProjection(s),Ge=k[q];for(let Yi in Ge){let Xe=Ge[Yi],_n=Xe.tileCoord,Ui=ot[1]-_n[1],Tt=Math.round(Ci[0]-(Ui-1)*Et),Ti=ot[2]-_n[2],Ri=Math.round(Ci[1]-(Ti-1)*he),F=Math.round(Ci[0]-Ui*Et),S=Math.round(Ci[1]-Ti*he),I=Tt-F,B=Ri-S,U=p===q,J=U&&Xe.getAlpha(H(this),t.time)!==1,Ct=!1;if(!J)if(D){A=[F,S,F+I,S,F+I,S+B,F,S+B];for(let zt=0,Gt=D.length;zt<Gt;++zt)if(p!==q&&q<Y[zt]){let nt=D[zt];mt([F,S,F+I,S+B],[nt[0],nt[3],nt[4],nt[7]])&&(Ct||(T.save(),Ct=!0),T.beginPath(),T.moveTo(A[0],A[1]),T.lineTo(A[2],A[3]),T.lineTo(A[4],A[5]),T.lineTo(A[6],A[7]),T.moveTo(nt[6],nt[7]),T.lineTo(nt[4],nt[5]),T.lineTo(nt[2],nt[3]),T.lineTo(nt[0],nt[1]),T.clip())}D.push(A),Y.push(q)}else T.clearRect(F,S,I,B);this.drawTileImage(Xe,t,F,S,I,B,pn,U),D&&!J?(Ct&&T.restore(),this.renderedTiles.unshift(Xe)):this.renderedTiles.push(Xe),this.updateUsedTiles(t.usedTiles,u,Xe)}}return this.renderedRevision=d,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!Ae(this.renderedExtent_,P),this.renderedExtent_=P,this.renderedPixelRatio=h,this.renderedProjection=s,this.manageTilePyramid(t,u,m,h,s,f,p,c.getPreload()),this.scheduleExpireCache(t,u),this.postRender(T,t),i.extent&&T.restore(),T.imageSmoothingEnabled=!0,b!==L.style.transform&&(L.style.transform=b),this.container}drawTileImage(t,e,i,r,s,o,a,l){let h=this.getTileImage(t);if(!h)return;let c=H(this),u=e.layerStatesArray[e.layerIndex],d=u.opacity*(l?t.getAlpha(c,e.time):1),m=d!==this.context.globalAlpha;m&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,r,s,o),m&&this.context.restore(),d!==u.opacity?e.animate=!0:l&&t.endTransition(c)}getImage(){let t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){let i=function(r,s,o){let a=H(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){let r=H(e);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,e,i,r,s,o,a,l,h){let c=H(e);c in t.wantedTiles||(t.wantedTiles[c]={});let u=t.wantedTiles[c],d=t.tileQueue,m=i.getMinZoom(),p=t.viewState.rotation,x=p?Ps(t.viewState.center,t.viewState.resolution,p,t.size):void 0,f=0,g,_,y,E,C,v;for(v=m;v<=a;++v)for(_=i.getTileRangeForExtentAndZ(o,v,_),y=i.getResolution(v),E=_.minX;E<=_.maxX;++E)for(C=_.minY;C<=_.maxY;++C)p&&!i.tileCoordIntersectsViewport([v,E,C],x)||(a-v<=l?(++f,g=e.getTile(v,E,C,r,s),g.getState()==W.IDLE&&(u[g.getKey()]=!0,d.isKeyQueued(g.getKey())||d.enqueue([g,c,i.getTileCoordCenter(g.tileCoord),y])),h!==void 0&&h(g)):e.useTile(v,E,C,s));e.updateCacheSize(f,s)}},Ng=ec;var ms={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};zo();wt();pt();st();fn();Qs();vt();Di();var pp=[0,0,0],Bi=5,ic=class{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,K(Tc(this.resolutions_,function(r,s){return s-r},!0),17);let e;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!e)e=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,K(this.origins_.length==this.resolutions_.length,20));let i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=fe(i)),K(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,K(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:256,K(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){let o=new ur(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){let a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){let r=this.getTileRangeForExtentAndZ(t,e);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([e,s,a])}forEachTileCoordParentTileRange(t,e,i,r){let s,o,a,l=null,h=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);h>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=gn(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,h,i),e(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){let s=t[1]*2,o=t[2]*2;return gn(s,s+1,o,o+1,e)}let r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;let r=t[0],s=t[1],o=t[2];if(e===r)return gn(s,o,s,o,i);if(this.zoomFactor_){let l=Math.pow(this.zoomFactor_,e-r),h=Math.floor(s*l),c=Math.floor(o*l);if(e<r)return gn(h,h,c,c,i);let u=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return gn(h,u,c,d,i)}let a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeExtent(t,e,i){let r=this.getOrigin(t),s=this.getResolution(t),o=Mt(this.getTileSize(t),this.tmpSize_),a=r[0]+e.minX*o[0]*s,l=r[0]+(e.maxX+1)*o[0]*s,h=r[1]+e.minY*o[1]*s,c=r[1]+(e.maxY+1)*o[1]*s;return Ht(a,h,l,c,i)}getTileRangeForExtentAndZ(t,e,i){let r=pp;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);let s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),gn(s,r[1],o,r[2],i)}getTileCoordCenter(t){let e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Mt(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,e){let i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Mt(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*r,a=i[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,h=a+s[1]*r;return Ht(o,a,l,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,r,s){let o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),h=Mt(this.getTileSize(o),this.tmpSize_),c=a*(t-l[0])/i/h[0],u=a*(l[1]-e)/i/h[1];return r?(c=Ar(c,Bi)-1,u=Ar(u,Bi)-1):(c=br(c,Bi),u=br(u,Bi)),jh(o,c,u,s)}getTileCoordForXYAndZ_(t,e,i,r,s){let o=this.getOrigin(i),a=this.getResolution(i),l=Mt(this.getTileSize(i),this.tmpSize_),h=(t-o[0])/a/l[0],c=(o[1]-e)/a/l[1];return r?(h=Ar(h,Bi)-1,c=Ar(c,Bi)-1):(h=br(h,Bi),c=br(c,Bi)),jh(i,h,c,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){let i=Cn(this.resolutions_,t,e||0);return V(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return ba(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){let e=this.resolutions_.length,i=new Array(e);for(let r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}},nc=ic;var Bo={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};ve();jl();Xo();$e();gt();wt();It();fn();It();st();Di();function Yo(n){let t=n.getDefaultTileGrid();return t||(t=xp(n),n.setDefaultTileGrid(t)),t}function Gg(n,t,e){let i=t[0],r=n.getTileCoordCenter(t),s=Uo(e);if(ae(s,r))return t;{let o=et(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}}function _p(n,t,e,i){i=i!==void 0?i:"top-left";let r=Wg(n,t,e);return new nc({extent:n,origin:Wc(n,i),resolutions:r,tileSize:e})}function Xg(n){let t=n||{},e=t.extent||ct("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Wg(e,t.maxZoom,t.tileSize,t.maxResolution)};return new nc(i)}function Wg(n,t,e,i){t=t!==void 0?t:42,e=Mt(e!==void 0?e:256);let r=At(n),s=et(n);i=i>0?i:Math.max(s/e[0],r/e[1]);let o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function xp(n,t,e,i){let r=Uo(n);return _p(r,t,e,i)}function Uo(n){n=ct(n);let t=n.getExtent();if(!t){let e=180*Jt.degrees/n.getMetersPerUnit();t=Ht(-e,-e,e,e)}return t}Di();var rc=class extends Co{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;let e=[256,256];this.tileGrid&&Mt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new cr(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){let i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,r){let s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,h;for(let c=i.minX;c<=i.maxX;++c)for(let u=i.minY;u<=i.maxY;++u)l=dn(e,c,u),h=!1,s.containsKey(l)&&(a=s.get(l),h=a.getState()===W.LOADED,h&&(h=r(a)!==!1)),h||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,i,r,s){return Q()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Yo(t)}getTileCacheForProjection(t){let e=this.getProjection();return K(e===null||Me(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){let r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),o=Mt(r.getTileSize(t),this.tmpSize);return s==1?o:Zu(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();let i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=Gg(i,t,e)),Sg(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){let i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,r){}},jo=class extends Rt{constructor(t,e){super(t),this.tile=e}},zg=rc;$e();wt();pt();fn();function yp(n,t){let e=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(e,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){let h=o[0],c=t.getFullTileRange(h);return K(c,55),(c.getHeight()-o[2]-1).toString()})}}function Bg(n,t){let e=n.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=yp(n[r],t);return Ep(i)}function Ep(n){return n.length===1?n[0]:function(t,e,i){if(t){let r=Rg(t),s=le(r,n.length);return n[s](t,e,i)}else return}}function Yg(n){let t=[],e=/\{([a-z])-([a-z])\}/.exec(n);if(e){let i=e[1].charCodeAt(0),r=e[2].charCodeAt(0),s;for(s=i;s<=r;++s)t.push(n.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n),e){let i=parseInt(e[2],10);for(let r=parseInt(e[1],10);r<=i;r++)t.push(n.replace(e[0],r.toString()));return t}return t.push(n),t}fn();gt();var ps=class extends zg{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ps.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){let e=t.target,i=H(e),r=e.getState(),s;r==W.LOADING?(this.tileLoadingKeys_[i]=!0,s=Bo.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==W.ERROR?Bo.TILELOADERROR:r==W.LOADED?Bo.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new jo(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){let e=Yg(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;let e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Bg(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){let r=dn(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}},Ug=ps;ft();To();Xo();$e();It();fn();gt();var sc=class extends Ug{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Cp,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:nr,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){let i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(let r in this.tileCacheForProjection){let s=this.tileCacheForProjection[r];s.expireCache(s==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Me(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Me(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){let e=this.getProjection();if(this.tileGrid&&(!e||Me(e,t)))return this.tileGrid;{let i=H(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Yo(t)),this.tileGridForProjection[i]}}getTileCacheForProjection(t){let e=this.getProjection();if(!e||Me(e,t))return this.tileCache;{let i=H(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new cr(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(t,e,i,r,s,o){let a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,s),h=l?this.tileUrlFunction(l,r,s):void 0,c=new this.tileClass(a,h!==void 0?W.IDLE:W.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(G.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,i,r,s){let o=this.getProjection();if(!o||!s||Me(o,s))return this.getTileInternal(t,e,i,r,o||s);{let a=this.getTileCacheForProjection(s),l=[t,e,i],h,c=Go(l);a.containsKey(c)&&(h=a.get(c));let u=this.getKey();if(h&&h.key==u)return h;{let d=this.getTileGridForProjection(o),m=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),x=new gs(o,d,s,m,l,p,this.getTilePixelRatio(r),this.getGutter(),function(f,g,_,y){return this.getTileInternal(f,g,_,y,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return x.key=u,h?(x.interimTile=h,x.refreshInterimChain(),a.replace(c,x)):a.set(c,x),x}}}getTileInternal(t,e,i,r,s){let o=null,a=dn(t,e,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,e,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){let h=o;o=this.createTile_(t,e,i,r,s,l),h.getState()==W.IDLE?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(let e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){let i=ct(t);if(i){let r=H(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}}clear(){super.clear();for(let t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};function Cp(n,t){n.getImage().src=t}var jg=sc;hn();var oc=class extends ln{constructor(t){t=t||{};let e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(ms.PRELOAD)}setPreload(t){this.set(ms.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(ms.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(ms.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}},Kg=oc;var ac=class extends Kg{constructor(t){super(t)}createRenderer(){return new Ng(this)}},lc=ac;It();var hc=class extends jg{constructor(t){t=t||{};let e=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:Xg({extent:Uo(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}},Vg=hc;var Tp='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',cc=class extends Vg{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[Tp];let i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}},uc=cc;var qg=yr(Zg()),dr=yr(gc());var _s={A0:{landscape:{right:15},portrait:{bottom:15}},A1:{landscape:{right:12},portrait:{bottom:12}},A2:{landscape:{right:7.5},portrait:{bottom:7.5}},A3:{landscape:{right:7},portrait:{bottom:7}},A4:{landscape:{right:5},portrait:{bottom:5}},LEGAL:{landscape:{right:5},portrait:{bottom:5}},TABLOID:{landscape:{right:7},portrait:{bottom:7}},LETTER:{landscape:{right:5},portrait:{bottom:5}}};function Jg(n="map",t=[8.68,49.41],e=15){return new No({target:n,view:new Re({center:xa(t),zoom:e}),layers:[new lc({source:new uc})]})}function $g(n){let t=new dr.PrintLayout({format:dr.PAPER_FORMAT.A4,orientation:dr.ORIENTATION.LANDSCAPE,margin:_s.A4.landscape});return n.addControl(t),t}function Qg(n){let t=new qg.default("nominatim",{provider:"osm",lang:"en-US",placeholder:"Search for ...",targetType:"glass-button",limit:10,keepOpen:!0});return n.addControl(t),t}var mn=yr(gc());function mc(n,t){let e=document.getElementById(n);for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)){let r=document.createElement("option");r.text=t[i],e.appendChild(r)}}function tm(n){let t={...mn.PAPER_FORMAT};console.log(t),delete t.BROADSHEET,mc("format",t),document.getElementById("format").value=n.getFormat(),document.getElementById("format").addEventListener("change",e=>{let i=e.target.value,r=n.getOrientation();n.setFormat(i),n.setMargin(new mn.Margin(_s[i][r]))}),mc("orientation",mn.ORIENTATION),document.getElementById("orientation").value=n.getOrientation(),document.getElementById("orientation").addEventListener("change",e=>{let i=e.target.value,r=n.getFormat();n.setOrientation(i),n.setMargin(new mn.Margin(_s[r][i]))}),document.getElementById("bbox").value=JSON.stringify(n.getBbox()),n.on("change:bbox",e=>{let i=e.target.getBbox();document.getElementById("bbox").value=JSON.stringify(i)}),document.getElementById("size").value=JSON.stringify(n.getPrintBoxSizeInDots(192)),n.on("change",e=>{let i=e.target.getPrintBoxSizeInDots(192);document.getElementById("size").value=JSON.stringify(i)}),document.getElementById("scale").value=JSON.stringify(n.getScaleDenominator()),n.on("change",e=>{let i=e.target.getScaleDenominator();document.getElementById("scale").value=JSON.stringify(i)})}var em=Jg(),Rp=$g(em);tm(Rp);Qg(em);
/*!
 * @kirtandesai/ol-geocoder - v5.0.2
 * A geocoder extension compatible with OpenLayers v7.
 * https://github.com/kirtan-desai/ol-geocoder
 * Built: Tue Oct 04 2022 18:46:06 GMT-0400 (Eastern Daylight Time)
 */
