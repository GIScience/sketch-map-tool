var Ug=Object.create;var hs=Object.defineProperty;var jg=Object.getOwnPropertyDescriptor;var Kg=Object.getOwnPropertyNames;var Vg=Object.getPrototypeOf,Zg=Object.prototype.hasOwnProperty;var R=(r,t)=>()=>(r&&(t=r(r=0)),t);var oc=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),cs=(r,t)=>{for(var e in t)hs(r,e,{get:t[e],enumerable:!0})},ac=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Kg(t))!Zg.call(r,n)&&n!==e&&hs(r,n,{get:()=>t[n],enumerable:!(i=jg(t,n))||i.enumerable});return r};var us=(r,t,e)=>(e=r!=null?Ug(Vg(r)):{},ac(t||!r||!r.__esModule?hs(e,"default",{value:r,enumerable:!0}):e,r)),ds=r=>ac(hs({},"__esModule",{value:!0}),r);var Hg,Yo,an,fs=R(()=>{Hg={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"},Yo=class extends Error{constructor(t){let e=Hg[t];super(e),this.code=t,this.name="AssertionError",this.message=e}},an=Yo});var Bo,dt,ge=R(()=>{Bo=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},dt=Bo});var me,ln=R(()=>{me={PROPERTYCHANGE:"propertychange"}});var Uo,hi,nr=R(()=>{Uo=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},hi=Uo});function lc(r,t,e){let i,n;e=e||pe;let s=0,o=r.length,a=!1;for(;s<o;)i=s+(o-s>>1),n=+e(r[i],t),n<0?s=i+1:(o=i,a=!n);return a?s:~s}function pe(r,t){return r>t?1:r<t?-1:0}function hn(r,t,e){let i=r.length;if(r[0]<=t)return 0;if(t<=r[i-1])return i-1;{let n;if(e>0){for(n=1;n<i;++n)if(r[n]<t)return n-1}else if(e<0){for(n=1;n<i;++n)if(r[n]<=t)return n}else for(n=1;n<i;++n){if(r[n]==t)return n;if(r[n]<t)return typeof e=="function"?e(t,r[n-1],r[n])>0?n-1:n:r[n-1]-t<t-r[n]?n-1:n}return i-1}}function hc(r,t,e){for(;t<e;){let i=r[t];r[t]=r[e],r[e]=i,++t,--e}}function bi(r,t){let e=Array.isArray(t)?t:[t],i=e.length;for(let n=0;n<i;n++)r[r.length]=e[n]}function Dt(r,t){let e=r.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(r[i]!==t[i])return!1;return!0}function cc(r,t,e){let i=t||pe;return r.every(function(n,s){if(s===0)return!0;let o=i(r[s-1],n);return!(o>0||e&&o===0)})}var mt=R(()=>{});function Ye(){return!0}function Be(){return!1}function Vt(){}function uc(r){let t=!1,e,i,n;return function(){let s=Array.prototype.slice.call(arguments);return(!t||this!==n||!Dt(s,i))&&(t=!0,n=this,i=s,e=r.apply(this,arguments)),e}}var At=R(()=>{mt()});function Re(r){for(let t in r)delete r[t]}function Ue(r){let t;for(t in r)return!1;return!t}var Se=R(()=>{});var jo,Ie,cn=R(()=>{nr();ge();At();Se();jo=class extends hi{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;let i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){let e=typeof t=="string",i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;let s=e?new dt(t):t;s.target||(s.target=this.eventTarget_||this);let o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let h=0,c=n.length;h<c;++h)if("handleEvent"in n[h]?l=n[h].handleEvent(s):l=n[h].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,Vt);delete o[i]}return l}disposeInternal(){this.listeners_&&Re(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){let i=this.listeners_&&this.listeners_[t];if(i){let n=i.indexOf(e);n!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=Vt,++this.pendingRemovals_[t]):(i.splice(n,1),i.length===0&&delete this.listeners_[t]))}}},Ie=jo});var F,st=R(()=>{F={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}});function j(r,t,e,i,n){if(i&&i!==r&&(e=e.bind(i)),n){let o=e;e=function(){r.removeEventListener(t,e),o.apply(this,arguments)}}let s={target:r,type:t,listener:e};return r.addEventListener(t,e),s}function un(r,t,e,i){return j(r,t,e,i,!0)}function J(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Re(r))}var Zt=R(()=>{Se()});function qg(r){if(Array.isArray(r))for(let t=0,e=r.length;t<e;++t)J(r[t]);else J(r)}var dn,fn,gs=R(()=>{cn();st();Zt();dn=class extends Ie{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(F.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){let i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=j(this,t[s],e);return n}else return j(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){let n=t.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=un(this,t[s],e)}else i=un(this,t,e);return e.ol_key=i,i}unInternal(t,e){let i=e.ol_key;if(i)qg(i);else if(Array.isArray(t))for(let n=0,s=t.length;n<s;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}};dn.prototype.on;dn.prototype.once;dn.prototype.un;fn=dn});function K(){throw new Error("Unimplemented abstract method.")}function U(r){return r.ol_uid||(r.ol_uid=String(++Jg))}var Jg,dc,ot=R(()=>{Jg=0;dc="7.1.0"});var ms,Ko,it,Ft=R(()=>{ge();ln();gs();ot();Se();ms=class extends dt{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}},Ko=class extends fn{constructor(t){super(),this.on,this.once,this.un,U(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new ms(i,t,e)),i=me.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new ms(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){let n=this.values_||(this.values_={});if(i)n[t]=e;else{let s=n[t];n[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(let i in t)this.set(i,t[i],e)}applyProperties(t){!t.values_||Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){let i=this.values_[t];delete this.values_[t],Ue(this.values_)&&(this.values_=null),e||this.notify(t,i)}}},it=Ko});var Rt,rr=R(()=>{Rt={ADD:"add",REMOVE:"remove"}});var fc,gn,Vo,pt,ci=R(()=>{fs();Ft();rr();ge();fc={LENGTH:"length"},gn=class extends dt{constructor(t,e,i){super(t),this.element=e,this.index=i}},Vo=class extends it{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){let e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(fc.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new gn(Rt.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);let e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){let e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;let e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new gn(Rt.REMOVE,e,t)),e}setAt(t,e){let i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);let n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new gn(Rt.REMOVE,n,t)),this.dispatchEvent(new gn(Rt.ADD,e,t))}updateLength_(){this.set(fc.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new an(58)}},pt=Vo});function W(r,t){if(!r)throw new an(t)}var _t=R(()=>{fs()});function $g(r){if(typeof r=="function")return r;{let t;return Array.isArray(r)?t=r:(W(typeof r.getZIndex=="function",41),t=[r]),function(){return t}}}var sr,ps,Zo=R(()=>{Ft();st();_t();Zt();sr=class extends it{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){let e=t;this.setGeometry(e)}else{let e=t;this.setProperties(e)}}clone(){let t=new sr(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let e=this.getGeometry();e&&t.setGeometry(e.clone());let i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(J(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=j(t,F.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?$g(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};ps=sr});var ui,gc,Qg,s_,mc,pc,_s,mn,_c,xs,je=R(()=>{ui=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",gc=ui.includes("firefox"),Qg=ui.includes("safari")&&!ui.includes("chrom"),s_=Qg&&(ui.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ui)),mc=ui.includes("webkit")&&!ui.includes("edge"),pc=ui.includes("macintosh"),_s=typeof devicePixelRatio<"u"?devicePixelRatio:1,mn=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,_c=typeof Image<"u"&&Image.prototype.decode,xs=function(){let r=!1;try{let t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return r}()});function St(){return[1,0,0,1,0,0]}function yc(r,t){let e=r[0],i=r[1],n=r[2],s=r[3],o=r[4],a=r[5],l=t[0],h=t[1],c=t[2],u=t[3],d=t[4],m=t[5];return r[0]=e*l+n*h,r[1]=i*l+s*h,r[2]=e*c+n*u,r[3]=i*c+s*u,r[4]=e*d+n*m+o,r[5]=i*d+s*m+a,r}function tm(r,t,e,i,n,s,o){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r[4]=s,r[5]=o,r}function Ec(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function ht(r,t){let e=t[0],i=t[1];return t[0]=r[0]*e+r[2]*i+r[4],t[1]=r[1]*e+r[3]*i+r[5],t}function Cc(r,t,e){return tm(r,t,0,0,e,0,0)}function bt(r,t,e,i,n,s,o,a){let l=Math.sin(s),h=Math.cos(s);return r[0]=i*h,r[1]=n*l,r[2]=-i*l,r[3]=n*h,r[4]=o*i*h-a*i*l+t,r[5]=o*n*l+a*n*h+e,r}function pn(r,t){let e=em(t);W(e!==0,32);let i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return r[0]=o/e,r[1]=-n/e,r[2]=-s/e,r[3]=i/e,r[4]=(s*l-o*a)/e,r[5]=-(i*l-n*a)/e,r}function em(r){return r[0]*r[3]-r[1]*r[2]}function ys(r){let t="matrix("+r.join(", ")+")";if(mn)return t;let e=xc||(xc=document.createElement("div"));return e.style.transform=t,e.style.transform}var h_,xc,_e=R(()=>{je();_t();h_=new Array(6)});var ft,Ho=R(()=>{ft={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}});function qo(r){let t=xt();for(let e=0,i=r.length;e<i;++e)Mi(t,r[e]);return t}function im(r,t,e){let i=Math.min.apply(null,r),n=Math.min.apply(null,t),s=Math.max.apply(null,r),o=Math.max.apply(null,t);return Nt(i,n,s,o,e)}function _n(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function Cs(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function xn(r,t,e){let i,n;return t<r[0]?i=r[0]-t:r[2]<t?i=t-r[2]:i=0,e<r[1]?n=r[1]-e:r[3]<e?n=e-r[3]:n=0,i*i+n*n}function Ht(r,t){return Jo(r,t[0],t[1])}function kt(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function Jo(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function Es(r,t){let e=r[0],i=r[1],n=r[2],s=r[3],o=t[0],a=t[1],l=ft.UNKNOWN;return o<e?l=l|ft.LEFT:o>n&&(l=l|ft.RIGHT),a<i?l=l|ft.BELOW:a>s&&(l=l|ft.ABOVE),l===ft.UNKNOWN&&(l=ft.INTERSECTING),l}function xt(){return[1/0,1/0,-1/0,-1/0]}function Nt(r,t,e,i,n){return n?(n[0]=r,n[1]=t,n[2]=e,n[3]=i,n):[r,t,e,i]}function yn(r){return Nt(1/0,1/0,-1/0,-1/0,r)}function Tc(r,t){let e=r[0],i=r[1];return Nt(e,i,e,i,t)}function Rc(r,t,e,i,n){let s=yn(n);return $o(s,r,t,e,i)}function xe(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function Sc(r,t,e){return Math.abs(r[0]-t[0])<e&&Math.abs(r[2]-t[2])<e&&Math.abs(r[1]-t[1])<e&&Math.abs(r[3]-t[3])<e}function Ic(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function Mi(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function $o(r,t,e,i,n){for(;e<i;e+=n)nm(r,t[e],t[e+1]);return r}function nm(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function Ts(r,t){let e;return e=t(En(r)),e||(e=t(Cn(r)),e)||(e=t(Tn(r)),e)||(e=t(ie(r)),e)?e:!1}function or(r){let t=0;return Pi(r)||(t=H(r)*yt(r)),t}function En(r){return[r[0],r[1]]}function Cn(r){return[r[2],r[1]]}function Gt(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function Lc(r,t){let e;return t==="bottom-left"?e=En(r):t==="bottom-right"?e=Cn(r):t==="top-left"?e=ie(r):t==="top-right"?e=Tn(r):W(!1,13),e}function ar(r,t,e,i,n){let[s,o,a,l,h,c,u,d]=Rs(r,t,e,i);return Nt(Math.min(s,a,h,u),Math.min(o,l,c,d),Math.max(s,a,h,u),Math.max(o,l,c,d),n)}function Rs(r,t,e,i){let n=t*i[0]/2,s=t*i[1]/2,o=Math.cos(e),a=Math.sin(e),l=n*o,h=n*a,c=s*o,u=s*a,d=r[0],m=r[1];return[d-l+u,m-h-c,d-l-u,m-h+c,d+l-u,m+h+c,d+l+u,m+h-c,d-l+u,m-h-c]}function yt(r){return r[3]-r[1]}function Le(r,t,e){let i=e||xt();return at(r,t)?(r[0]>t[0]?i[0]=r[0]:i[0]=t[0],r[1]>t[1]?i[1]=r[1]:i[1]=t[1],r[2]<t[2]?i[2]=r[2]:i[2]=t[2],r[3]<t[3]?i[3]=r[3]:i[3]=t[3]):yn(i),i}function ie(r){return[r[0],r[3]]}function Tn(r){return[r[2],r[3]]}function H(r){return r[2]-r[0]}function at(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function Pi(r){return r[2]<r[0]||r[3]<r[1]}function vc(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function wc(r,t,e){let i=!1,n=Es(r,t),s=Es(r,e);if(n===ft.INTERSECTING||s===ft.INTERSECTING)i=!0;else{let o=r[0],a=r[1],l=r[2],h=r[3],c=t[0],u=t[1],d=e[0],m=e[1],p=(m-u)/(d-c),x,f;!!(s&ft.ABOVE)&&!(n&ft.ABOVE)&&(x=d-(m-h)/p,i=x>=o&&x<=l),!i&&!!(s&ft.RIGHT)&&!(n&ft.RIGHT)&&(f=m-(d-l)*p,i=f>=a&&f<=h),!i&&!!(s&ft.BELOW)&&!(n&ft.BELOW)&&(x=d-(m-a)/p,i=x>=o&&x<=l),!i&&!!(s&ft.LEFT)&&!(n&ft.LEFT)&&(f=m-(d-o)*p,i=f>=a&&f<=h)}return i}function lr(r,t,e,i){let n=[];if(i>1){let a=r[2]-r[0],l=r[3]-r[1];for(let h=0;h<i;++h)n.push(r[0]+a*h/i,r[1],r[2],r[1]+l*h/i,r[2]-a*h/i,r[3],r[0],r[3]-l*h/i)}else n=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]];t(n,n,2);let s=[],o=[];for(let a=0,l=n.length;a<l;a+=2)s.push(n[a]),o.push(n[a+1]);return im(s,o,e)}function hr(r,t){let e=t.getExtent(),i=Gt(r);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){let n=H(e),o=Math.floor((i[0]-e[0])/n)*n;r[0]-=o,r[2]-=o}return r}function Ac(r,t){if(t.canWrapX()){let e=t.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[e[0],r[1],e[2],r[3]]];hr(r,t);let i=H(e);if(H(r)>i)return[[e[0],r[1],e[2],r[3]]];if(r[0]<e[0])return[[r[0]+i,r[1],e[2],r[3]],[e[0],r[1],r[2],r[3]]];if(r[2]>e[2])return[[r[0],r[1],e[2],r[3]],[e[0],r[1],r[2]-i,r[3]]]}return[r]}var $=R(()=>{Ho();_t()});var Xt,Qo=R(()=>{Xt={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}});var ta,Rn,Ss=R(()=>{Qo();ta=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Xt[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Rn=ta});function bc(r,t,e){let i=r.length;e=e>1?e:2,t===void 0&&(e>2?t=r.slice():t=new Array(i));for(let n=0;n<i;n+=e){t[n]=Sn*r[n]/180;let s=cr*Math.log(Math.tan(Math.PI*(+r[n+1]+90)/360));s>Is?s=Is:s<-Is&&(s=-Is),t[n+1]=s}return t}function Mc(r,t,e){let i=r.length;e=e>1?e:2,t===void 0&&(e>2?t=r.slice():t=new Array(i));for(let n=0;n<i;n+=e)t[n]=180*r[n]/Sn,t[n+1]=360*Math.atan(Math.exp(r[n+1]/cr))/Math.PI-90;return t}var cr,Sn,rm,sm,Is,di,ea,Pc=R(()=>{Ss();cr=6378137,Sn=Math.PI*cr,rm=[-Sn,-Sn,Sn,Sn],sm=[-180,-85,180,85],Is=cr*Math.log(Math.tan(Math.PI/2)),di=class extends Rn{constructor(t){super({code:t,units:"m",extent:rm,global:!0,worldExtent:sm,getPointResolution:function(e,i){return e/Math.cosh(i[1]/cr)}})}},ea=[new di("EPSG:3857"),new di("EPSG:102100"),new di("EPSG:102113"),new di("EPSG:900913"),new di("http://www.opengis.net/def/crs/EPSG/0/3857"),new di("http://www.opengis.net/gml/srs/epsg.xml#3857")]});var om,Oc,am,Ke,ia,Dc=R(()=>{Ss();om=6378137,Oc=[-180,-90,180,90],am=Math.PI*om/180,Ke=class extends Rn{constructor(t,e){super({code:t,units:"degrees",extent:Oc,axisOrientation:e,global:!0,metersPerUnit:am,worldExtent:Oc})}},ia=[new Ke("CRS:84"),new Ke("EPSG:4326","neu"),new Ke("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ke("urn:ogc:def:crs:OGC:2:84"),new Ke("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ke("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ke("http://www.opengis.net/def/crs/EPSG/0/4326","neu")]});function Fc(){Ls={}}function kc(r){return Ls[r]||Ls[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Nc(r,t){Ls[r]=t}var Ls,Gc=R(()=>{Ls={}});function Xc(){Oi={}}function Di(r,t,e){let i=r.getCode(),n=t.getCode();i in Oi||(Oi[i]={}),Oi[i][n]=e}function Wc(r,t){let e;return r in Oi&&t in Oi[r]&&(e=Oi[r][t]),e}var Oi,zc=R(()=>{Oi={}});function z(r,t,e){return Math.min(Math.max(r,t),e)}function vs(r,t,e,i,n,s){let o=n-e,a=s-i;if(o!==0||a!==0){let l=((r-e)*o+(t-i)*a)/(o*o+a*a);l>1?(e=n,i=s):l>0&&(e+=o*l,i+=a*l)}return Ve(r,t,e,i)}function Ve(r,t,e,i){let n=e-r,s=i-t;return n*n+s*s}function Yc(r){let t=r.length;for(let i=0;i<t;i++){let n=i,s=Math.abs(r[i][i]);for(let a=i+1;a<t;a++){let l=Math.abs(r[a][i]);l>s&&(s=l,n=a)}if(s===0)return null;let o=r[n];r[n]=r[i],r[i]=o;for(let a=i+1;a<t;a++){let l=-r[a][i]/r[i][i];for(let h=i;h<t+1;h++)i==h?r[a][h]=0:r[a][h]+=l*r[i][h]}}let e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=r[i][t]/r[i][i];for(let n=i-1;n>=0;n--)r[n][t]-=r[n][i]*e[i]}return e}function ws(r){return r*180/Math.PI}function Wt(r){return r*Math.PI/180}function qt(r,t){let e=r%t;return e*t<0?e+t:e}function ne(r,t,e){return r+e*(t-r)}function As(r,t){let e=Math.pow(10,t);return Math.round(r*e)/e}function ur(r,t){return Math.floor(As(r,t))}function dr(r,t){return Math.ceil(As(r,t))}var lt=R(()=>{});function na(r,t,e){let i=e!==void 0?r.toFixed(e):""+r,n=i.indexOf(".");return n=n===-1?i.length:n,n>t?i:new Array(1+t-n).join("0")+i}var Bc=R(()=>{});function Uc(r,t){return r[0]+=+t[0],r[1]+=+t[1],r}function ra(r,t,e){let i=qt(t+180,360)-180,n=Math.abs(3600*i),s=e||0,o=Math.floor(n/3600),a=Math.floor((n-o*3600)/60),l=As(n-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let h=o+"\xB0";return(a!==0||l!==0)&&(h+=" "+na(a,2)+"\u2032"),l!==0&&(h+=" "+na(l,2,s)+"\u2033"),i!==0&&(h+=" "+r.charAt(i<0?1:0)),h}function Fi(r,t){let e=!0;for(let i=r.length-1;i>=0;--i)if(r[i]!=t[i]){e=!1;break}return e}function In(r,t){let e=Math.cos(t),i=Math.sin(t),n=r[0]*e-r[1]*i,s=r[1]*e+r[0]*i;return r[0]=n,r[1]=s,r}function jc(r,t){return r[0]*=t,r[1]*=t,r}function bs(r,t){if(t.canWrapX()){let e=H(t.getExtent()),i=sa(r,t,e);i&&(r[0]-=i*e)}return r}function sa(r,t,e){let i=t.getExtent(),n=0;return t.canWrapX()&&(r[0]<i[0]||r[0]>i[2])&&(e=e||H(i),n=Math.floor((r[0]-i[0])/e)),n}var fi=R(()=>{$();lt();Bc()});var Zc={};cs(Zc,{DEFAULT_RADIUS:()=>fr,getArea:()=>Vc,getDistance:()=>gr,getLength:()=>Kc,offset:()=>aa});function gr(r,t,e){e=e||fr;let i=Wt(r[1]),n=Wt(t[1]),s=(n-i)/2,o=Wt(t[0]-r[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(n);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function oa(r,t){let e=0;for(let i=0,n=r.length;i<n-1;++i)e+=gr(r[i],r[i+1],t);return e}function Kc(r,t){t=t||{};let e=t.radius||fr,i=t.projection||"EPSG:3857",n=r.getType();n!=="GeometryCollection"&&(r=r.clone().transform(i,"EPSG:4326"));let s=0,o,a,l,h,c,u;switch(n){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=r.getCoordinates(),s=oa(o,e);break}case"MultiLineString":case"Polygon":{for(o=r.getCoordinates(),l=0,h=o.length;l<h;++l)s+=oa(o[l],e);break}case"MultiPolygon":{for(o=r.getCoordinates(),l=0,h=o.length;l<h;++l)for(a=o[l],c=0,u=a.length;c<u;++c)s+=oa(a[c],e);break}case"GeometryCollection":{let d=r.getGeometries();for(l=0,h=d.length;l<h;++l)s+=Kc(d[l],t);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function Ms(r,t){let e=0,i=r.length,n=r[i-1][0],s=r[i-1][1];for(let o=0;o<i;o++){let a=r[o][0],l=r[o][1];e+=Wt(a-n)*(2+Math.sin(Wt(s))+Math.sin(Wt(l))),n=a,s=l}return e*t*t/2}function Vc(r,t){t=t||{};let e=t.radius||fr,i=t.projection||"EPSG:3857",n=r.getType();n!=="GeometryCollection"&&(r=r.clone().transform(i,"EPSG:4326"));let s=0,o,a,l,h,c,u;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=r.getCoordinates(),s=Math.abs(Ms(o[0],e)),l=1,h=o.length;l<h;++l)s-=Math.abs(Ms(o[l],e));break}case"MultiPolygon":{for(o=r.getCoordinates(),l=0,h=o.length;l<h;++l)for(a=o[l],s+=Math.abs(Ms(a[0],e)),c=1,u=a.length;c<u;++c)s-=Math.abs(Ms(a[c],e));break}case"GeometryCollection":{let d=r.getGeometries();for(l=0,h=d.length;l<h;++l)s+=Vc(d[l],t);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function aa(r,t,e,i){i=i||fr;let n=Wt(r[1]),s=Wt(r[0]),o=t/i,a=Math.asin(Math.sin(n)*Math.cos(o)+Math.cos(n)*Math.sin(o)*Math.cos(e)),l=s+Math.atan2(Math.sin(e)*Math.sin(o)*Math.cos(n),Math.cos(o)-Math.sin(n)*Math.sin(a));return[ws(l),ws(a)]}var fr,Ps=R(()=>{lt();fr=63710088e-1});var eu={};cs(eu,{METERS_PER_UNIT:()=>Xt,Projection:()=>Rn,addCommon:()=>tu,addCoordinateTransforms:()=>hm,addEquivalentProjections:()=>ha,addEquivalentTransforms:()=>Jc,addProjection:()=>Hc,addProjections:()=>qc,clearAllProjections:()=>lm,clearUserProjection:()=>dm,cloneTransform:()=>Ds,createProjection:()=>pr,createSafeCoordinateTransform:()=>gm,createTransformFromCoordinateTransform:()=>ca,disableCoordinateWarning:()=>Os,equivalent:()=>ye,fromLonLat:()=>ua,fromUserCoordinate:()=>re,fromUserExtent:()=>se,fromUserResolution:()=>Qc,get:()=>et,getPointResolution:()=>Fs,getTransform:()=>zt,getTransformFromProjections:()=>Ee,getUserProjection:()=>Ni,identityTransform:()=>mr,setUserProjection:()=>$c,toLonLat:()=>cm,toUserCoordinate:()=>Ln,toUserExtent:()=>Gi,toUserResolution:()=>fa,transform:()=>ki,transformExtent:()=>da,transformWithProjections:()=>um,useGeographic:()=>fm});function Os(r){la=!(r===void 0?!0:r)}function Ds(r,t,e){if(t!==void 0){for(let i=0,n=r.length;i<n;++i)t[i]=r[i];t=t}else t=r.slice();return t}function mr(r,t,e){if(t!==void 0&&r!==t){for(let i=0,n=r.length;i<n;++i)t[i]=r[i];r=t}return r}function Hc(r){Nc(r.getCode(),r),Di(r,r,Ds)}function qc(r){r.forEach(Hc)}function et(r){return typeof r=="string"?kc(r):r||null}function Fs(r,t,e,i){r=et(r);let n,s=r.getPointResolutionFunc();if(s){if(n=s(t,e),i&&i!==r.getUnits()){let o=r.getMetersPerUnit();o&&(n=n*o/Xt[i])}}else{let o=r.getUnits();if(o=="degrees"&&!i||i=="degrees")n=t;else{let a=Ee(r,et("EPSG:4326"));if(a===mr&&o!=="degrees")n=t*r.getMetersPerUnit();else{let h=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];h=a(h,h,2);let c=gr(h.slice(0,2),h.slice(2,4)),u=gr(h.slice(4,6),h.slice(6,8));n=(c+u)/2}let l=i?Xt[i]:r.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function ha(r){qc(r),r.forEach(function(t){r.forEach(function(e){t!==e&&Di(t,e,Ds)})})}function Jc(r,t,e,i){r.forEach(function(n){t.forEach(function(s){Di(n,s,e),Di(s,n,i)})})}function lm(){Fc(),Xc()}function pr(r,t){return r?typeof r=="string"?et(r):r:et(t)}function ca(r){return function(t,e,i){let n=t.length;i=i!==void 0?i:2,e=e!==void 0?e:new Array(n);for(let s=0;s<n;s+=i){let o=r(t.slice(s,s+i)),a=o.length;for(let l=0,h=i;l<h;++l)e[s+l]=l>=a?t[s+l]:o[l]}return e}}function hm(r,t,e,i){let n=et(r),s=et(t);Di(n,s,ca(e)),Di(s,n,ca(i))}function ua(r,t){return Os(),ki(r,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function cm(r,t){let e=ki(r,t!==void 0?t:"EPSG:3857","EPSG:4326"),i=e[0];return(i<-180||i>180)&&(e[0]=qt(i+180,360)-180),e}function ye(r,t){if(r===t)return!0;let e=r.getUnits()===t.getUnits();return(r.getCode()===t.getCode()||Ee(r,t)===Ds)&&e}function Ee(r,t){let e=r.getCode(),i=t.getCode(),n=Wc(e,i);return n||(n=mr),n}function zt(r,t){let e=et(r),i=et(t);return Ee(e,i)}function ki(r,t,e){return zt(t,e)(r,void 0,r.length)}function da(r,t,e,i){let n=zt(t,e);return lr(r,n,void 0,i)}function um(r,t,e){return Ee(t,e)(r)}function $c(r){Mt=et(r)}function dm(){Mt=null}function Ni(){return Mt}function fm(){$c("EPSG:4326")}function Ln(r,t){return Mt?ki(r,t,Mt):r}function re(r,t){return Mt?ki(r,Mt,t):(la&&!Fi(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(la=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r)}function Gi(r,t){return Mt?da(r,t,Mt):r}function se(r,t){return Mt?da(r,Mt,t):r}function fa(r,t){if(!Mt)return r;let e=et(t).getUnits(),i=Mt.getUnits();return e&&i?r*Xt[e]/Xt[i]:r}function Qc(r,t){if(!Mt)return r;let e=et(t).getUnits(),i=Mt.getUnits();return e&&i?r*Xt[i]/Xt[e]:r}function gm(r,t,e){return function(i){let n,s;if(r.canWrapX()){let o=r.getExtent(),a=H(o);i=i.slice(0),s=sa(i,r,a),s&&(i[0]=i[0]-s*a),i[0]=z(i[0],o[0],o[2]),i[1]=z(i[1],o[1],o[3]),n=e(i)}else n=e(i);return s&&t.canWrapX()&&(n[0]+=s*H(t.getExtent())),n}}function tu(){ha(ea),ha(ia),Jc(ia,ea,bc,Mc)}var la,Mt,Et=R(()=>{Ss();Pc();Dc();Qo();Gc();zc();$();lt();fi();Ps();la=!0;Mt=null;tu()});function oe(r,t,e,i,n,s){s=s||[];let o=0;for(let a=t;a<e;a+=i){let l=r[a],h=r[a+1];s[o++]=n[0]*l+n[2]*h+n[4],s[o++]=n[1]*l+n[3]*h+n[5]}return s&&s.length!=o&&(s.length=o),s}function ks(r,t,e,i,n,s,o){o=o||[];let a=Math.cos(n),l=Math.sin(n),h=s[0],c=s[1],u=0;for(let d=t;d<e;d+=i){let m=r[d]-h,p=r[d+1]-c;o[u++]=h+m*a-p*l,o[u++]=c+m*l+p*a;for(let x=d+2;x<d+i;++x)o[u++]=r[x]}return o&&o.length!=u&&(o.length=u),o}function iu(r,t,e,i,n,s,o,a){a=a||[];let l=o[0],h=o[1],c=0;for(let u=t;u<e;u+=i){let d=r[u]-l,m=r[u+1]-h;a[c++]=l+n*d,a[c++]=h+s*m;for(let p=u+2;p<u+i;++p)a[c++]=r[p]}return a&&a.length!=c&&(a.length=c),a}function nu(r,t,e,i,n,s,o){o=o||[];let a=0;for(let l=t;l<e;l+=i){o[a++]=r[l]+n,o[a++]=r[l+1]+s;for(let h=l+2;h<l+i;++h)o[a++]=r[h]}return o&&o.length!=a&&(o.length=a),o}var Xi=R(()=>{});var ru,ga,su,ou=R(()=>{Ft();ot();_e();$();Et();At();Xi();ru=St(),ga=class extends it{constructor(){super(),this.extent_=xt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=uc(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);let n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return K()}closestPointXY(t,e,i,n){return K()}containsXY(t,e){let i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return K()}getExtent(t){if(this.extentRevision_!=this.getRevision()){let e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&yn(e),this.extentRevision_=this.getRevision()}return vc(this.extent_,t)}rotate(t,e){K()}scale(t,e,i){K()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return K()}getType(){return K()}applyTransform(t){K()}intersectsExtent(t){return K()}translate(t,e){K()}transform(t,e){let i=et(t),n=i.getUnits()=="tile-pixels"?function(s,o,a){let l=i.getExtent(),h=i.getWorldExtent(),c=yt(h)/yt(l);return bt(ru,h[0],h[3],c,-c,0,0,0),oe(s,0,s.length,a,ru,o),zt(i,e)(s,o,a)}:zt(i,e);return this.applyTransform(n),this}},su=ga});function mm(r){let t;return r==2?t="XY":r==3?t="XYZ":r==4&&(t="XYZM"),t}function au(r){let t;return r=="XY"?t=2:r=="XYZ"||r=="XYM"?t=3:r=="XYZM"&&(t=4),t}function lu(r,t,e){let i=r.getFlatCoordinates();if(i){let n=r.getStride();return oe(i,0,i.length,n,t,e)}else return null}var ma,gi,vn=R(()=>{ou();ot();$();Xi();ma=class extends su{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Rc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return K()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=au(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){K()}setLayout(t,e,i){let n;if(t)n=au(t);else{for(let s=0;s<i;++s)if(e.length===0){this.layout="XY",this.stride=2;return}else e=e[0];n=e.length,t=mm(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){let i=this.getFlatCoordinates();if(i){let n=this.getStride();ks(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=Gt(this.getExtent()));let n=this.getFlatCoordinates();if(n){let s=this.getStride();iu(n,0,n.length,s,t,e,i,n),this.changed()}}translate(t,e){let i=this.getFlatCoordinates();if(i){let n=this.getStride();nu(i,0,i.length,n,t,e,i),this.changed()}}};gi=ma});function hu(r,t,e,i,n,s,o){let a=r[t],l=r[t+1],h=r[e]-a,c=r[e+1]-l,u;if(h===0&&c===0)u=t;else{let d=((n-a)*h+(s-l)*c)/(h*h+c*c);if(d>1)u=e;else if(d>0){for(let m=0;m<i;++m)o[m]=ne(r[t+m],r[e+m],d);o.length=i;return}else u=t}for(let d=0;d<i;++d)o[d]=r[u+d];o.length=i}function _r(r,t,e,i,n){let s=r[t],o=r[t+1];for(t+=i;t<e;t+=i){let a=r[t],l=r[t+1],h=Ve(s,o,a,l);h>n&&(n=h),s=a,o=l}return n}function cu(r,t,e,i,n){for(let s=0,o=e.length;s<o;++s){let a=e[s];n=_r(r,t,a,i,n),t=a}return n}function xr(r,t,e,i,n,s,o,a,l,h,c){if(t==e)return h;let u,d;if(n===0)if(d=Ve(o,a,r[t],r[t+1]),d<h){for(u=0;u<i;++u)l[u]=r[t+u];return l.length=i,d}else return h;c=c||[NaN,NaN];let m=t+i;for(;m<e;)if(hu(r,m-i,m,i,o,a,c),d=Ve(o,a,c[0],c[1]),d<h){for(h=d,u=0;u<i;++u)l[u]=c[u];l.length=i,m+=i}else m+=i*Math.max((Math.sqrt(d)-Math.sqrt(h))/n|0,1);if(s&&(hu(r,e-i,t,i,o,a,c),d=Ve(o,a,c[0],c[1]),d<h)){for(h=d,u=0;u<i;++u)l[u]=c[u];l.length=i}return h}function uu(r,t,e,i,n,s,o,a,l,h,c){c=c||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){let m=e[u];h=xr(r,t,m,i,n,s,o,a,l,h,c),t=m}return h}var Ns=R(()=>{lt()});function du(r,t,e,i){for(let n=0,s=e.length;n<s;++n)r[t++]=e[n];return t}function yr(r,t,e,i){for(let n=0,s=e.length;n<s;++n){let o=e[n];for(let a=0;a<i;++a)r[t++]=o[a]}return t}function fu(r,t,e,i,n){n=n||[];let s=0;for(let o=0,a=e.length;o<a;++o){let l=yr(r,t,e[o],i);n[s++]=l,t=l}return n.length=s,n}var Er=R(()=>{});function Gs(r,t,e,i,n,s,o){let a=(e-t)/i;if(a<3){for(;t<e;t+=i)s[o++]=r[t],s[o++]=r[t+1];return o}let l=new Array(a);l[0]=1,l[a-1]=1;let h=[t,e-i],c=0;for(;h.length>0;){let u=h.pop(),d=h.pop(),m=0,p=r[d],x=r[d+1],f=r[u],g=r[u+1];for(let _=d+i;_<u;_+=i){let y=r[_],E=r[_+1],C=vs(y,E,p,x,f,g);C>m&&(c=_,m=C)}m>n&&(l[(c-t)/i]=1,d+i<c&&h.push(d,c),c+i<u&&h.push(c,u))}for(let u=0;u<a;++u)l[u]&&(s[o++]=r[t+u*i],s[o++]=r[t+u*i+1]);return o}function mi(r,t){return t*Math.round(r/t)}function pm(r,t,e,i,n,s,o){if(t==e)return o;let a=mi(r[t],n),l=mi(r[t+1],n);t+=i,s[o++]=a,s[o++]=l;let h,c;do if(h=mi(r[t],n),c=mi(r[t+1],n),t+=i,t==e)return s[o++]=h,s[o++]=c,o;while(h==a&&c==l);for(;t<e;){let u=mi(r[t],n),d=mi(r[t+1],n);if(t+=i,u==h&&d==c)continue;let m=h-a,p=c-l,x=u-a,f=d-l;if(m*f==p*x&&(m<0&&x<m||m==x||m>0&&x>m)&&(p<0&&f<p||p==f||p>0&&f>p)){h=u,c=d;continue}s[o++]=h,s[o++]=c,a=h,l=c,h=u,c=d}return s[o++]=h,s[o++]=c,o}function gu(r,t,e,i,n,s,o,a){for(let l=0,h=e.length;l<h;++l){let c=e[l];o=pm(r,t,c,i,n,s,o),a.push(o),t=c}return o}var Cr=R(()=>{lt()});function ve(r,t,e,i,n){n=n!==void 0?n:[];let s=0;for(let o=t;o<e;o+=i)n[s++]=r.slice(o,o+i);return n.length=s,n}function wn(r,t,e,i,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=e.length;o<a;++o){let l=e[o];n[s++]=ve(r,t,l,i,n[s]),t=l}return n.length=s,n}function pa(r,t,e,i,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=e.length;o<a;++o){let l=e[o];n[s++]=l.length===1&&l[0]===t?[]:wn(r,t,l,i,n[s]),t=l[l.length-1]}return n.length=s,n}var Tr=R(()=>{});function _a(r,t,e,i){let n=0,s=r[e-i],o=r[e-i+1];for(;t<e;t+=i){let a=r[t],l=r[t+1];n+=o*a-s*l,s=a,o=l}return n/2}function mu(r,t,e,i){let n=0;for(let s=0,o=e.length;s<o;++s){let a=e[s];n+=_a(r,t,a,i),t=a}return n}var xa=R(()=>{});var An,ya,pu=R(()=>{vn();Ns();$();Er();Cr();Tr();xa();An=class extends gi{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new An(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<xn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return _a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ve(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let e=[];return e.length=Gs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new An(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yr(this.flatCoordinates,0,t,this.stride),this.changed()}},ya=An});var Rr,Sr,Ea=R(()=>{vn();$();Er();lt();Rr=class extends gi{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){let t=new Rr(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){let s=this.flatCoordinates,o=Ve(t,e,s[0],s[1]);if(o<n){let a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}else return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return Tc(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Jo(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=du(this.flatCoordinates,0,t,this.stride),this.changed()}},Sr=Rr});function _u(r,t,e,i,n){return!Ts(n,function(o){return!pi(r,t,e,i,o[0],o[1])})}function pi(r,t,e,i,n,s){let o=0,a=r[e-i],l=r[e-i+1];for(;t<e;t+=i){let h=r[t],c=r[t+1];l<=s?c>s&&(h-a)*(s-l)-(n-a)*(c-l)>0&&o++:c<=s&&(h-a)*(s-l)-(n-a)*(c-l)<0&&o--,a=h,l=c}return o!==0}function Xs(r,t,e,i,n,s){if(e.length===0||!pi(r,t,e[0],i,n,s))return!1;for(let o=1,a=e.length;o<a;++o)if(pi(r,e[o-1],e[o],i,n,s))return!1;return!0}var Ws=R(()=>{$()});function xu(r,t,e,i,n,s,o){let a,l,h,c,u,d,m,p=n[s+1],x=[];for(let _=0,y=e.length;_<y;++_){let E=e[_];for(c=r[E-i],d=r[E-i+1],a=t;a<E;a+=i)u=r[a],m=r[a+1],(p<=d&&m<=p||d<=p&&p<=m)&&(h=(p-d)/(m-d)*(u-c)+c,x.push(h)),c=u,d=m}let f=NaN,g=-1/0;for(x.sort(pe),c=x[0],a=1,l=x.length;a<l;++a){u=x[a];let _=Math.abs(u-c);_>g&&(h=(c+u)/2,Xs(r,t,e,i,h,p)&&(f=h,g=_)),c=u}return isNaN(f)&&(f=n[s]),o?(o.push(f,p,g),o):[f,p,g]}var yu=R(()=>{Ws();mt()});function zs(r,t,e,i,n){let s;for(t+=i;t<e;t+=i)if(s=n(r.slice(t-i,t),r.slice(t,t+i)),s)return s;return!1}var Ca=R(()=>{});function Ys(r,t,e,i,n){let s=$o(xt(),r,t,e,i);return at(n,s)?kt(n,s)||s[0]>=n[0]&&s[2]<=n[2]||s[1]>=n[1]&&s[3]<=n[3]?!0:zs(r,t,e,i,function(o,a){return wc(n,o,a)}):!1}function Ta(r,t,e,i,n){return!!(Ys(r,t,e,i,n)||pi(r,t,e,i,n[0],n[1])||pi(r,t,e,i,n[0],n[3])||pi(r,t,e,i,n[2],n[1])||pi(r,t,e,i,n[2],n[3]))}function Eu(r,t,e,i,n){if(!Ta(r,t,e[0],i,n))return!1;if(e.length===1)return!0;for(let s=1,o=e.length;s<o;++s)if(_u(r,e[s-1],e[s],i,n)&&!Ys(r,e[s-1],e[s],i,n))return!1;return!0}var Bs=R(()=>{$();Ca();Ws()});function Cu(r,t,e,i){for(;t<e-i;){for(let n=0;n<i;++n){let s=r[t+n];r[t+n]=r[e-i+n],r[e-i+n]=s}t+=i,e-=i}}var Tu=R(()=>{});function Ru(r,t,e,i){let n=0,s=r[e-i],o=r[e-i+1];for(;t<e;t+=i){let a=r[t],l=r[t+1];n+=(a-s)*(l+o),s=a,o=l}return n===0?void 0:n>0}function Su(r,t,e,i,n){n=n!==void 0?n:!1;for(let s=0,o=e.length;s<o;++s){let a=e[s],l=Ru(r,t,a,i);if(s===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;t=a}return!0}function Ra(r,t,e,i,n){n=n!==void 0?n:!1;for(let s=0,o=e.length;s<o;++s){let a=e[s],l=Ru(r,t,a,i);(s===0?n&&l||!n&&!l:n&&!l||!n&&l)&&Cu(r,t,a,i),t=a}return t}var Iu=R(()=>{Tu()});function vu(r,t,e,i){e=e||32;let n=[];for(let s=0;s<e;++s)bi(n,aa(r,t,2*Math.PI*s/e,i));return n.push(n[0],n[1]),new _i(n,"XY",[n.length])}function Sa(r){let t=r[0],e=r[1],i=r[2],n=r[3],s=[t,e,t,n,i,n,i,e,t,e];return new _i(s,"XY",[s.length])}var _i,Lu,Us=R(()=>{pu();Ea();vn();Ns();$();Er();mt();yu();Tr();Bs();Iu();xa();Ws();Cr();Ps();_i=class extends gi{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?bi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new _i(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<xn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return Xs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return mu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Ra(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,wn(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let t=Gt(this.getExtent());this.flatInteriorPoint_=xu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Sr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new ya(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){let t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],s=0;for(let o=0,a=i.length;o<a;++o){let l=i[o],h=new ya(e.slice(s,l),t);n.push(h),s=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;Su(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ra(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let e=[],i=[];return e.length=gu(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new _i(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return Eu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let i=fu(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}},Lu=_i});var ut,Ia,La,wu,Au=R(()=>{ge();Ft();st();Us();Et();lt();ut={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Ia=class extends dt{constructor(t){super(F.ERROR),this.code=t.code,this.message=t.message}},La=class extends it{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=mr,this.watchId_=void 0,this.addChangeListener(ut.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(ut.TRACKING,this.handleTrackingChanged_),t.projection!==void 0&&this.setProjection(t.projection),t.trackingOptions!==void 0&&this.setTrackingOptions(t.trackingOptions),this.setTracking(t.tracking!==void 0?t.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){let t=this.getProjection();t&&(this.transform_=Ee(et("EPSG:4326"),t),this.position_&&this.set(ut.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){let t=this.getTracking();t&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!t&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){let e=t.coords;this.set(ut.ACCURACY,e.accuracy),this.set(ut.ALTITUDE,e.altitude===null?void 0:e.altitude),this.set(ut.ALTITUDE_ACCURACY,e.altitudeAccuracy===null?void 0:e.altitudeAccuracy),this.set(ut.HEADING,e.heading===null?void 0:Wt(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];let i=this.transform_(this.position_);this.set(ut.POSITION,i),this.set(ut.SPEED,e.speed===null?void 0:e.speed);let n=vu(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(ut.ACCURACY_GEOMETRY,n),this.changed()}positionError_(t){this.dispatchEvent(new Ia(t))}getAccuracy(){return this.get(ut.ACCURACY)}getAccuracyGeometry(){return this.get(ut.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(ut.ALTITUDE)}getAltitudeAccuracy(){return this.get(ut.ALTITUDE_ACCURACY)}getHeading(){return this.get(ut.HEADING)}getPosition(){return this.get(ut.POSITION)}getProjection(){return this.get(ut.PROJECTION)}getSpeed(){return this.get(ut.SPEED)}getTracking(){return this.get(ut.TRACKING)}getTrackingOptions(){return this.get(ut.TRACKING_OPTIONS)}setProjection(t){this.set(ut.PROJECTION,et(t))}setTracking(t){this.set(ut.TRACKING,t)}setTrackingOptions(t){this.set(ut.TRACKING_OPTIONS,t)}},wu=La});var Yt,bn=R(()=>{Yt={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}});var Ir,Ze,Lr=R(()=>{Ir=class{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){let t=this.getColor();return new Ir({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}},Ze=Ir});function bu(r,t,e,i,n,s,o){let a,l,h=(e-t)/i;if(h===1)a=t;else if(h===2)a=t,l=n;else if(h!==0){let c=r[t],u=r[t+1],d=0,m=[0];for(let f=t+i;f<e;f+=i){let g=r[f],_=r[f+1];d+=Math.sqrt((g-c)*(g-c)+(_-u)*(_-u)),m.push(d),c=g,u=_}let p=n*d,x=lc(m,p);x<0?(l=(p-m[-x-2])/(m[-x-1]-m[-x-2]),a=t+(-x-2)*i):a=t+x*i}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=a===void 0?NaN:l===void 0?r[a+c]:ne(r[a+c],r[a+i+c],l);return s}function Mu(r,t,e,i,n,s){if(e==t)return null;let o;if(n<r[t+i-1])return s?(o=r.slice(t,t+i),o[i-1]=n,o):null;if(r[e-1]<n)return s?(o=r.slice(e-i,e),o[i-1]=n,o):null;if(n==r[t+i-1])return r.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){let d=a+l>>1;n<r[(d+1)*i-1]?l=d:a=d+1}let h=r[a*i-1];if(n==h)return r.slice((a-1)*i,(a-1)*i+i);let c=r[(a+1)*i-1],u=(n-h)/(c-h);o=[];for(let d=0;d<i-1;++d)o.push(ne(r[(a-1)*i+d],r[a*i+d],u));return o.push(n),o}var Pu=R(()=>{mt();lt()});function js(r,t,e,i){let n=r[t],s=r[t+1],o=0;for(let a=t+i;a<e;a+=i){let l=r[a],h=r[a+1];o+=Math.sqrt((l-n)*(l-n)+(h-s)*(h-s)),n=l,s=h}return o}var va=R(()=>{});var Mn,wa,Ou=R(()=>{vn();Ns();$();Er();Cr();mt();Ca();Tr();Pu();Bs();va();Mn=class extends gi{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?bi(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){let t=new Mn(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<xn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return zs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return ve(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return bu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return js(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){let e=[];return e.length=Gs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Mn(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Ys(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yr(this.flatCoordinates,0,t,this.stride),this.changed()}},wa=Mn});var vr,xi,Ks=R(()=>{vr=class{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){let t=this.getColor();return new vr({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}},xi=vr});var q,yi=R(()=>{q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}});function Aa(r){return r[0]>0&&r[1]>0}function Du(r,t,e){return e===void 0&&(e=[0,0]),e[0]=r[0]*t+.5|0,e[1]=r[1]*t+.5|0,e}function Ct(r,t){return Array.isArray(r)?r:(t===void 0?t=[r,r]:(t[0]=r,t[1]=r),t)}var Ei=R(()=>{});var wr,Vs,ba=R(()=>{ot();Ei();wr=class{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ct(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new wr({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return K()}getImage(t){return K()}getHitDetectionImage(){return K()}getPixelRatio(t){return 1}getImageState(){return K()}getImageSize(){return K()}getOrigin(){return K()}getSize(){return K()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ct(t)}listenImageChange(t){K()}load(){K()}unlistenImageChange(t){K()}},Vs=wr});function Zs(r){return typeof r=="string"?r:Ma(r)}function ym(r){let t=document.createElement("div");if(t.style.color=r,t.style.color!==""){document.body.appendChild(t);let e=getComputedStyle(t).color;return document.body.removeChild(t),e}else return""}function Wi(r){return Array.isArray(r)?r:Em(r)}function Cm(r){let t,e,i,n,s;if(xm.exec(r)&&(r=ym(r)),_m.exec(r)){let o=r.length-1,a;o<=4?a=1:a=2;let l=o===4||o===8;t=parseInt(r.substr(1+0*a,a),16),e=parseInt(r.substr(1+1*a,a),16),i=parseInt(r.substr(1+2*a,a),16),l?n=parseInt(r.substr(1+3*a,a),16):n=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,l&&(n=(n<<4)+n)),s=[t,e,i,n/255]}else r.startsWith("rgba(")?(s=r.slice(5,-1).split(",").map(Number),Fu(s)):r.startsWith("rgb(")?(s=r.slice(4,-1).split(",").map(Number),s.push(1),Fu(s)):W(!1,14);return s}function Fu(r){return r[0]=z(r[0]+.5|0,0,255),r[1]=z(r[1]+.5|0,0,255),r[2]=z(r[2]+.5|0,0,255),r[3]=z(r[3],0,1),r}function Ma(r){let t=r[0];t!=(t|0)&&(t=t+.5|0);let e=r[1];e!=(e|0)&&(e=e+.5|0);let i=r[2];i!=(i|0)&&(i=i+.5|0);let n=r[3]===void 0?1:Math.round(r[3]*100)/100;return"rgba("+t+","+e+","+i+","+n+")"}var _m,xm,Em,zi=R(()=>{_t();lt();_m=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,xm=/^([a-z]*)$|^hsla?\(.*\)$/i;Em=function(){let t={},e=0;return function(i){let n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){let s=0;for(let o in t)(s++&3)===0&&(delete t[o],--e)}n=Cm(i),t[i]=n,++e}return n}}()});function Bt(r){return Array.isArray(r)?Ma(r):r}var Ar=R(()=>{zi()});function ct(r,t,e,i){let n;return e&&e.length?n=e.shift():mn?n=new OffscreenCanvas(r||300,t||300):n=document.createElement("canvas"),r&&(n.width=r),t&&(n.height=t),n.getContext("2d",i)}function Pn(r){let t=r.canvas;t.width=1,t.height=1,r.clearRect(0,0,1,1)}function ku(r){let t=r.offsetWidth,e=getComputedStyle(r);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function Nu(r){let t=r.offsetHeight,e=getComputedStyle(r);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function Pa(r,t){let e=t.parentNode;e&&e.replaceChild(r,t)}function Yi(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function Hs(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function Gu(r,t){let e=r.childNodes;for(let i=0;;++i){let n=e[i],s=t[i];if(!n&&!s)break;if(n!==s){if(!n){r.appendChild(s);continue}if(!s){r.removeChild(n),--i;continue}r.insertBefore(s,n)}}}var It=R(()=>{je()});var br,Wu,Ci,On,Oa,Tm,Xu,Da,Bi=R(()=>{br="ol-hidden",Wu="ol-selectable",Ci="ol-unselectable",On="ol-control",Oa="ol-collapsed",Tm=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Xu=["style","variant","weight","size","lineHeight","family"],Da=function(r){let t=r.match(Tm);if(!t)return null;let e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,n=Xu.length;i<n;++i){let s=t[i+1];s!==void 0&&(e[Xu[i]]=s)}return e.families=e.family.split(/,\s?/),e}});function Yu(r,t){return Dn||(Dn=ct(1,1)),r!=Fa&&(Dn.font=r,Fa=Dn.font),Dn.measureText(t)}function qs(r,t){return Yu(r,t).width}function Na(r,t,e){if(t in e)return e[t];let i=t.split(`
`).reduce((n,s)=>Math.max(n,qs(r,s)),0);return e[t]=i,i}function Bu(r,t){let e=[],i=[],n=[],s=0,o=0,a=0,l=0;for(let h=0,c=t.length;h<=c;h+=2){let u=t[h];if(u===`
`||h===c){s=Math.max(s,o),n.push(o),o=0,a+=l;continue}let d=t[h+1]||r.font,m=qs(d,u);e.push(m),o+=m;let p=Rm(d);i.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:e,heights:i,lineWidths:n}}function Uu(r,t,e,i,n,s,o,a,l,h,c){r.save(),e!==1&&(r.globalAlpha*=e),t&&r.setTransform.apply(r,t),i.contextInstructions?(r.translate(l,h),r.scale(c[0],c[1]),Sm(i,r)):c[0]<0||c[1]<0?(r.translate(l,h),r.scale(c[0],c[1]),r.drawImage(i,n,s,o,a,0,0,o,a)):r.drawImage(i,n,s,o,a,l,h,o*c[0],a*c[1]),r.restore()}function Sm(r,t){let e=r.contextInstructions;for(let i=0,n=e.length;i<n;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}var Js,Ut,Ui,He,qe,Ae,Je,$e,Ti,ji,Qe,ti,we,Dn,Fa,ka,zu,Rm,ei=R(()=>{Ft();je();Se();It();Bi();Js="10px sans-serif",Ut="#000",Ui="round",He=[],qe=0,Ae="round",Je=10,$e="#000",Ti="center",ji="middle",Qe=[0,0,0,0],ti=1,we=new it,Dn=null,ka={},zu=function(){let t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10\uF013",s,o;function a(h,c,u){let d=!0;for(let m=0;m<i;++m){let p=e[m];if(o=qs(h+" "+c+" "+t+p,n),u!=p){let x=qs(h+" "+c+" "+t+u+","+p,n);d=d&&x!=o}}return!!d}function l(){let h=!0,c=we.getKeys();for(let u=0,d=c.length;u<d;++u){let m=c[u];we.get(m)<100&&(a.apply(this,m.split(`
`))?(Re(ka),Dn=null,Fa=void 0,we.set(m,100)):(we.set(m,we.get(m)+1,!0),h=!1))}h&&(clearInterval(s),s=void 0)}return function(h){let c=Da(h);if(!c)return;let u=c.families;for(let d=0,m=u.length;d<m;++d){let p=u[d],x=c.style+`
`+c.weight+`
`+p;we.get(x)===void 0&&(we.set(x,100,!0),a(c.style,c.weight,p)||(we.set(x,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),Rm=function(){let r;return function(t){let e=ka[t];if(e==null){if(mn){let i=Da(t),n=Yu(t,"\u017Dg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=t,document.body.appendChild(r),e=r.offsetHeight,document.body.removeChild(r);ka[t]=e}return e}}()});var Mr,$s,Ga=R(()=>{yi();ba();zi();Ar();It();ei();Mr=class extends Vs{constructor(t){let e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){let t=this.getScale(),e=new Mr({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){let t=this.size_;if(!t)return null;let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){let i=this.renderOptions_,n=ct(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return q.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let n=this.radius_,s=this.radius2_===void 0?n:this.radius2_;if(n<s){let S=n;n=s,s=S}let o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),h=Math.sqrt(s*s-l*l),c=n-h,u=Math.sqrt(l*l+c*c),d=u/l;if(t==="miter"&&d<=i)return d*e;let m=e/2/d,p=e/2*(c/u),f=Math.sqrt((n+m)*(n+m)+p*p)-n;if(this.radius2_===void 0||t==="bevel")return f*2;let g=n*Math.sin(a),_=Math.sqrt(n*n-g*g),y=s-_,C=Math.sqrt(g*g+y*y)/g;if(C<=i){let S=C*e/2-s-n;return 2*Math.max(f,S)}return f*2}createRenderOptions(){let t=Ae,e=0,i=null,n=0,s,o=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=$e),s=Bt(s),o=this.stroke_.getWidth(),o===void 0&&(o=ti),i=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Ae),e=this.stroke_.getMiterLimit(),e===void 0&&(e=Je));let a=this.calculateLineJoinSize_(t,o,e),l=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*l+a);return{strokeStyle:s,strokeWidth:o,size:h,lineDash:i,lineDashOffset:n,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=Ut),e.fillStyle=Bt(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=Wi(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){let n=ct(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{let n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);let s=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){let l=s+a*o,h=a%2===0?i:n;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ut,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},$s=Mr});var Pr,Qs,Xa=R(()=>{Ga();Pr=class extends $s{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){let t=this.getScale(),e=new Pr({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}},Qs=Pr});function Ku(r){let t;if(typeof r=="function")t=r;else{let e;Array.isArray(r)?e=r:(W(typeof r.getZIndex=="function",41),e=[r]),t=function(){return e}}return t}function Vu(r,t){if(!Wa){let e=new Ze({color:"rgba(255,255,255,0.4)"}),i=new xi({color:"#3399CC",width:1.25});Wa=[new Fn({image:new Qs({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return Wa}function ju(r){return r.getGeometry()}var Fn,Wa,ii,to=R(()=>{Xa();Lr();Ks();_t();Fn=class{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=ju,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Fn({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=ju,this.geometry_=t}setZIndex(t){this.zIndex_=t}};Wa=null;ii=Fn});var Im,Or,Dr,za=R(()=>{Lr();Ei();Im="#333",Or=class{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Ct(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Ze({color:Im}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){let t=this.getScale();return new Or({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ct(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}},Dr=Or});var Q,Ya=R(()=>{Q={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}});var Ba,eo,Ua=R(()=>{Ft();Ya();ot();_t();lt();Ba=class extends it{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;let e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Q.OPACITY]=t.opacity!==void 0?t.opacity:1,W(typeof e[Q.OPACITY]=="number",64),e[Q.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Q.Z_INDEX]=t.zIndex,e[Q.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Q.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Q.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Q.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){let e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=z(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return K()}getLayerStatesArray(t){return K()}getExtent(){return this.get(Q.EXTENT)}getMaxResolution(){return this.get(Q.MAX_RESOLUTION)}getMinResolution(){return this.get(Q.MIN_RESOLUTION)}getMinZoom(){return this.get(Q.MIN_ZOOM)}getMaxZoom(){return this.get(Q.MAX_ZOOM)}getOpacity(){return this.get(Q.OPACITY)}getSourceState(){return K()}getVisible(){return this.get(Q.VISIBLE)}getZIndex(){return this.get(Q.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Q.EXTENT,t)}setMaxResolution(t){this.set(Q.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Q.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Q.MAX_ZOOM,t)}setMinZoom(t){this.set(Q.MIN_ZOOM,t)}setOpacity(t){W(typeof t=="number",64),this.set(Q.OPACITY,t)}setVisible(t){this.set(Q.VISIBLE,t)}setZIndex(t){this.set(Q.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},eo=Ba});function kn(r,t){if(!r.visible)return!1;let e=t.resolution;if(e<r.minResolution||e>=r.maxResolution)return!1;let i=t.zoom;return i>r.minZoom&&i<=r.maxZoom}var ja,Ki,Vi=R(()=>{Ua();st();Ya();bn();_t();Zt();ja=class extends eo{constructor(t){let e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Q.SOURCE,this.handleSourcePropertyChange_);let i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Q.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(J(this.sourceChangeKey_),this.sourceChangeKey_=null);let t=this.getSource();t&&(this.sourceChangeKey_=j(t,F.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(e=>e([]))}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}render(t,e){let i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(Q.MAP,t)}getMapInternal(){return this.get(Q.MAP)}setMap(t){this.mapPrecomposeKey_&&(J(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(J(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=j(t,Yt.PRECOMPOSE,function(e){let n=e.frameState.layerStatesArray,s=this.getLayerState(!1);W(!n.some(function(o){return o.layer===s.layer}),67),n.push(s)},this),this.mapRenderKey_=j(this,F.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Q.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};Ki=ja});var Za=oc((Ka,Va)=>{(function(r,t){typeof Ka=="object"&&typeof Va<"u"?Va.exports=t():typeof define=="function"&&define.amd?define(t):(r=r||self).RBush=t()})(Ka,function(){"use strict";function r(f,g,_,y,E){(function C(S,v,b,M,O){for(;M>b;){if(M-b>600){var D=M-b+1,G=v-b+1,N=Math.log(D),tt=.5*Math.exp(2*N/3),B=.5*Math.sqrt(N*tt*(D-tt)/D)*(G-D/2<0?-1:1),L=Math.max(b,Math.floor(v-G*tt/D+B)),T=Math.min(M,Math.floor(v+(D-G)*tt/D+B));C(S,v,L,T,O)}var I=S[v],A=b,P=M;for(t(S,b,v),O(S[M],I)>0&&t(S,b,M);A<P;){for(t(S,A,P),A++,P--;O(S[A],I)<0;)A++;for(;O(S[P],I)>0;)P--}O(S[b],I)===0?t(S,b,P):t(S,++P,M),P<=v&&(b=P+1),v<=P&&(M=P-1)}})(f,g,_||0,y||f.length-1,E||e)}function t(f,g,_){var y=f[g];f[g]=f[_],f[_]=y}function e(f,g){return f<g?-1:f>g?1:0}var i=function(f){f===void 0&&(f=9),this._maxEntries=Math.max(4,f),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(f,g,_){if(!_)return g.indexOf(f);for(var y=0;y<g.length;y++)if(_(f,g[y]))return y;return-1}function s(f,g){o(f,0,f.children.length,g,f)}function o(f,g,_,y,E){E||(E=p(null)),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0;for(var C=g;C<_;C++){var S=f.children[C];a(E,f.leaf?y(S):S)}return E}function a(f,g){return f.minX=Math.min(f.minX,g.minX),f.minY=Math.min(f.minY,g.minY),f.maxX=Math.max(f.maxX,g.maxX),f.maxY=Math.max(f.maxY,g.maxY),f}function l(f,g){return f.minX-g.minX}function h(f,g){return f.minY-g.minY}function c(f){return(f.maxX-f.minX)*(f.maxY-f.minY)}function u(f){return f.maxX-f.minX+(f.maxY-f.minY)}function d(f,g){return f.minX<=g.minX&&f.minY<=g.minY&&g.maxX<=f.maxX&&g.maxY<=f.maxY}function m(f,g){return g.minX<=f.maxX&&g.minY<=f.maxY&&g.maxX>=f.minX&&g.maxY>=f.minY}function p(f){return{children:f,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(f,g,_,y,E){for(var C=[g,_];C.length;)if(!((_=C.pop())-(g=C.pop())<=y)){var S=g+Math.ceil((_-g)/y/2)*y;r(f,S,g,_,E),C.push(g,S,S,_)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(f){var g=this.data,_=[];if(!m(f,g))return _;for(var y=this.toBBox,E=[];g;){for(var C=0;C<g.children.length;C++){var S=g.children[C],v=g.leaf?y(S):S;m(f,v)&&(g.leaf?_.push(S):d(f,v)?this._all(S,_):E.push(S))}g=E.pop()}return _},i.prototype.collides=function(f){var g=this.data;if(!m(f,g))return!1;for(var _=[];g;){for(var y=0;y<g.children.length;y++){var E=g.children[y],C=g.leaf?this.toBBox(E):E;if(m(f,C)){if(g.leaf||d(f,C))return!0;_.push(E)}}g=_.pop()}return!1},i.prototype.load=function(f){if(!f||!f.length)return this;if(f.length<this._minEntries){for(var g=0;g<f.length;g++)this.insert(f[g]);return this}var _=this._build(f.slice(),0,f.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var y=this.data;this.data=_,_=y}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},i.prototype.insert=function(f){return f&&this._insert(f,this.data.height-1),this},i.prototype.clear=function(){return this.data=p([]),this},i.prototype.remove=function(f,g){if(!f)return this;for(var _,y,E,C=this.data,S=this.toBBox(f),v=[],b=[];C||v.length;){if(C||(C=v.pop(),y=v[v.length-1],_=b.pop(),E=!0),C.leaf){var M=n(f,C.children,g);if(M!==-1)return C.children.splice(M,1),v.push(C),this._condense(v),this}E||C.leaf||!d(C,S)?y?(_++,C=y.children[_],E=!1):C=null:(v.push(C),b.push(_),_=0,y=C,C=C.children[0])}return this},i.prototype.toBBox=function(f){return f},i.prototype.compareMinX=function(f,g){return f.minX-g.minX},i.prototype.compareMinY=function(f,g){return f.minY-g.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(f){return this.data=f,this},i.prototype._all=function(f,g){for(var _=[];f;)f.leaf?g.push.apply(g,f.children):_.push.apply(_,f.children),f=_.pop();return g},i.prototype._build=function(f,g,_,y){var E,C=_-g+1,S=this._maxEntries;if(C<=S)return s(E=p(f.slice(g,_+1)),this.toBBox),E;y||(y=Math.ceil(Math.log(C)/Math.log(S)),S=Math.ceil(C/Math.pow(S,y-1))),(E=p([])).leaf=!1,E.height=y;var v=Math.ceil(C/S),b=v*Math.ceil(Math.sqrt(S));x(f,g,_,b,this.compareMinX);for(var M=g;M<=_;M+=b){var O=Math.min(M+b-1,_);x(f,M,O,v,this.compareMinY);for(var D=M;D<=O;D+=v){var G=Math.min(D+v-1,O);E.children.push(this._build(f,D,G,y-1))}}return s(E,this.toBBox),E},i.prototype._chooseSubtree=function(f,g,_,y){for(;y.push(g),!g.leaf&&y.length-1!==_;){for(var E=1/0,C=1/0,S=void 0,v=0;v<g.children.length;v++){var b=g.children[v],M=c(b),O=(D=f,G=b,(Math.max(G.maxX,D.maxX)-Math.min(G.minX,D.minX))*(Math.max(G.maxY,D.maxY)-Math.min(G.minY,D.minY))-M);O<C?(C=O,E=M<E?M:E,S=b):O===C&&M<E&&(E=M,S=b)}g=S||g.children[0]}var D,G;return g},i.prototype._insert=function(f,g,_){var y=_?f:this.toBBox(f),E=[],C=this._chooseSubtree(y,this.data,g,E);for(C.children.push(f),a(C,y);g>=0&&E[g].children.length>this._maxEntries;)this._split(E,g),g--;this._adjustParentBBoxes(y,E,g)},i.prototype._split=function(f,g){var _=f[g],y=_.children.length,E=this._minEntries;this._chooseSplitAxis(_,E,y);var C=this._chooseSplitIndex(_,E,y),S=p(_.children.splice(C,_.children.length-C));S.height=_.height,S.leaf=_.leaf,s(_,this.toBBox),s(S,this.toBBox),g?f[g-1].children.push(S):this._splitRoot(_,S)},i.prototype._splitRoot=function(f,g){this.data=p([f,g]),this.data.height=f.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(f,g,_){for(var y,E,C,S,v,b,M,O=1/0,D=1/0,G=g;G<=_-g;G++){var N=o(f,0,G,this.toBBox),tt=o(f,G,_,this.toBBox),B=(E=N,C=tt,S=void 0,v=void 0,b=void 0,M=void 0,S=Math.max(E.minX,C.minX),v=Math.max(E.minY,C.minY),b=Math.min(E.maxX,C.maxX),M=Math.min(E.maxY,C.maxY),Math.max(0,b-S)*Math.max(0,M-v)),L=c(N)+c(tt);B<O?(O=B,y=G,D=L<D?L:D):B===O&&L<D&&(D=L,y=G)}return y||_-g},i.prototype._chooseSplitAxis=function(f,g,_){var y=f.leaf?this.compareMinX:l,E=f.leaf?this.compareMinY:h;this._allDistMargin(f,g,_,y)<this._allDistMargin(f,g,_,E)&&f.children.sort(y)},i.prototype._allDistMargin=function(f,g,_,y){f.children.sort(y);for(var E=this.toBBox,C=o(f,0,g,E),S=o(f,_-g,_,E),v=u(C)+u(S),b=g;b<_-g;b++){var M=f.children[b];a(C,f.leaf?E(M):M),v+=u(C)}for(var O=_-g-1;O>=g;O--){var D=f.children[O];a(S,f.leaf?E(D):D),v+=u(S)}return v},i.prototype._adjustParentBBoxes=function(f,g,_){for(var y=_;y>=0;y--)a(g[y],f)},i.prototype._condense=function(f){for(var g=f.length-1,_=void 0;g>=0;g--)f[g].children.length===0?g>0?(_=f[g-1].children).splice(_.indexOf(f[g]),1):this.clear():s(f[g],this.toBBox)},i})});function Zu(r,t,e){let i=e?Zs(e):"null";return t+":"+r+":"+i}var Ha,Nn,qa=R(()=>{zi();Ha=class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(let e in this.cache_){let i=this.cache_[e];(t++&3)===0&&!i.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){let n=Zu(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){let s=Zu(t,e,i);this.cache_[s]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};Nn=new Ha});var Ja,Gn,io=R(()=>{cn();st();ot();Ja=class extends Ie{constructor(t,e,i,n){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=n}changed(){this.dispatchEvent(F.CHANGE)}getExtent(){return this.extent}getImage(){return K()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){K()}},Gn=Ja});function Fr(r,t,e){let i=r,n=!0,s=!1,o=!1,a=[un(i,F.LOAD,function(){o=!0,s||t()})];return i.src&&_c?(s=!0,i.decode().then(function(){n&&t()}).catch(function(l){n&&(o?t():e())})):a.push(un(i,F.ERROR,e)),function(){n=!1,a.forEach(J)}}var $a,Hu,no=R(()=>{st();io();yi();je();$();Zt();$a=class extends Gn{constructor(t,e,i,n,s,o){super(t,e,i,q.IDLE),this.src_=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.state=q.IDLE,this.imageLoadFunction_=o}getImage(){return this.image_}handleImageError_(){this.state=q.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){this.resolution===void 0&&(this.resolution=yt(this.extent)/this.image_.height),this.state=q.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==q.IDLE||this.state==q.ERROR)&&(this.state=q.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Fr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=yt(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};Hu=$a});function qu(r,t,e,i,n,s){let o=Nn.get(t,i,s);return o||(o=new Qa(r,t,e,i,n,s),Nn.set(t,i,s,o)),o}var kr,Qa,Ju=R(()=>{cn();st();yi();zi();It();qa();no();kr=null,Qa=class extends Ie{constructor(t,e,i,n,s,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===q.LOADED){kr||(kr=ct(1,1)),kr.drawImage(this.image_,0,0);try{kr.getImageData(0,0,1,1),this.tainted_=!1}catch{kr=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(F.CHANGE)}handleImageError_(){this.imageState_=q.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=q.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let t=this.size_[0],e=this.size_[1],i=ct(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===q.IDLE){this.image_||this.initializeImage_(),this.imageState_=q.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Fr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==q.LOADED)return;let e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);let n=i.getContext("2d");n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Zs(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}});var Nr,Gr,tl=R(()=>{st();yi();ba();zi();_t();Ju();ot();Nr=class extends Vs{constructor(t){t=t||{};let e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,n=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:n,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;let o=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let a=t.src;W(!(a!==void 0&&o),4),W(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||U(o)),W(a!==void 0&&a.length>0,6);let l=t.src!==void 0?q.IDLE:q.LOADED;this.color_=t.color!==void 0?Wi(t.color):null,this.iconImage_=qu(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null}clone(){let t=this.getScale();return new Nr({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=n[0]),this.anchorYUnits_=="fraction"&&(t[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){let e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(F.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(F.CHANGE,t)}},Gr=Nr});function el(r){return new ii({fill:Xr(r,""),stroke:Wr(r,""),text:Lm(r),image:vm(r)})}function Xr(r,t){let e=r[t+"fill-color"];if(!!e)return new Ze({color:e})}function Wr(r,t){let e=r[t+"stroke-width"],i=r[t+"stroke-color"];if(!(!e&&!i))return new xi({width:e,color:i,lineCap:r[t+"stroke-line-cap"],lineJoin:r[t+"stroke-line-join"],lineDash:r[t+"stroke-line-dash"],lineDashOffset:r[t+"stroke-line-dash-offset"],miterLimit:r[t+"stroke-miter-limit"]})}function Lm(r){let t=r["text-value"];return t?new Dr({text:t,font:r["text-font"],maxAngle:r["text-max-angle"],offsetX:r["text-offset-x"],offsetY:r["text-offset-y"],overflow:r["text-overflow"],placement:r["text-placement"],scale:r["text-scale"],rotateWithView:r["text-rotate-with-view"],rotation:r["text-rotation"],textAlign:r["text-align"],justify:r["text-justify"],textBaseline:r["text-baseline"],padding:r["text-padding"],fill:Xr(r,"text-"),backgroundFill:Xr(r,"text-background-"),stroke:Wr(r,"text-"),backgroundStroke:Wr(r,"text-background-")}):void 0}function vm(r){let t=r["icon-src"],e=r["icon-img"];if(t||e)return new Gr({src:t,img:e,imgSize:r["icon-img-size"],anchor:r["icon-anchor"],anchorOrigin:r["icon-anchor-origin"],anchorXUnits:r["icon-anchor-x-units"],anchorYUnits:r["icon-anchor-y-units"],color:r["icon-color"],crossOrigin:r["icon-cross-origin"],offset:r["icon-offset"],displacement:r["icon-displacement"],opacity:r["icon-opacity"],scale:r["icon-scale"],rotation:r["icon-rotation"],rotateWithView:r["icon-rotate-with-view"],size:r["icon-size"],declutterMode:r["icon-declutter-mode"]});let i=r["shape-points"];if(i){let s="shape-";return new $s({points:i,fill:Xr(r,s),stroke:Wr(r,s),radius:r["shape-radius"],radius1:r["shape-radius1"],radius2:r["shape-radius2"],angle:r["shape-angle"],displacement:r["shape-displacement"],rotation:r["shape-rotation"],rotateWithView:r["shape-rotate-with-view"],scale:r["shape-scale"],declutterMode:r["shape-declutter-mode"]})}let n=r["circle-radius"];if(n){let s="circle-";return new Qs({radius:n,fill:Xr(r,s),stroke:Wr(r,s),displacement:r["circle-displacement"],scale:r["circle-scale"],rotation:r["circle-rotation"],rotateWithView:r["circle-rotate-with-view"],declutterMode:r["circle-declutter-mode"]})}}var $u=R(()=>{Xa();Lr();tl();Ga();Ks();to();za()});var td,Qu,il,ed,id=R(()=>{Vi();td=us(Za(),1);to();$u();Qu={RENDER_ORDER:"renderOrder"},il=class extends Ki{constructor(t){t=t||{};let e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Qu.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new td.default(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(Qu.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=Vu;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof ii)e=t;else if(Array.isArray(t)){let i=t.length,n=new Array(i);for(let s=0;s<i;++s){let o=t[s];o instanceof ii?n[s]=o:n[s]=el(o)}e=n}else e=el(t);this.style_=e,this.styleFunction_=t===null?void 0:Ku(this.style_),this.changed()}},ed=il});var zr,Yr,be,ni,nl,X,Zi=R(()=>{zr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Yr=[zr.FILL],be=[zr.STROKE],ni=[zr.BEGIN_PATH],nl=[zr.CLOSE_PATH],X=zr});var rl,ro,sl=R(()=>{rl=class{drawCustom(t,e,i,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}},ro=rl});var ol,Me,Xn=R(()=>{Zi();Ho();sl();Ar();$();ei();mt();Tr();ol=class extends ro{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){let e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){let i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates,o=s.length;for(let a=0,l=t.length;a<l;a+=e)n[0]=t[a],n[1]=t[a+1],Ht(i,n)&&(s[o++]=n[0],s[o++]=n[1]);return o}appendFlatLineCoordinates(t,e,i,n,s,o){let a=this.coordinates,l=a.length,h=this.getBufferedMaxExtent();o&&(e+=n);let c=t[e],u=t[e+1],d=this.tmpCoordinate_,m=!0,p,x,f;for(p=e+n;p<i;p+=n)d[0]=t[p],d[1]=t[p+1],f=Es(h,d),f!==x?(m&&(a[l++]=c,a[l++]=u,m=!1),a[l++]=d[0],a[l++]=d[1]):f===ft.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],m=!1):m=!0,c=d[0],u=d[1],x=f;return(s&&m||p===e+n)&&(a[l++]=c,a[l++]=u),l}drawCustomCoordinates_(t,e,i,n,s){for(let o=0,a=i.length;o<a;++o){let l=i[o],h=this.appendFlatLineCoordinates(t,e,l,n,!1,!1);s.push(h),e=l}return e}drawCustom(t,e,i,n){this.beginGeometry(t,e);let s=t.getType(),o=t.getStride(),a=this.coordinates.length,l,h,c,u,d;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),u=[];let m=t.getEndss();d=0;for(let p=0,x=m.length;p<x;++p){let f=[];d=this.drawCustomCoordinates_(l,d,m[p],o,f),u.push(f)}this.instructions.push([X.CUSTOM,a,u,t,i,pa]),this.hitDetectionInstructions.push([X.CUSTOM,a,u,t,n||i,pa]);break;case"Polygon":case"MultiLineString":c=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),o,c),this.instructions.push([X.CUSTOM,a,c,t,i,wn]),this.hitDetectionInstructions.push([X.CUSTOM,a,c,t,n||i,wn]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([X.CUSTOM,a,h,t,i,ve]),this.hitDetectionInstructions.push([X.CUSTOM,a,h,t,n||i,ve]);break;case"MultiPoint":l=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(l,o),h>a&&(this.instructions.push([X.CUSTOM,a,h,t,i,ve]),this.hitDetectionInstructions.push([X.CUSTOM,a,h,t,n||i,ve]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),h=this.coordinates.length,this.instructions.push([X.CUSTOM,a,h,t,i]),this.hitDetectionInstructions.push([X.CUSTOM,a,h,t,n||i]);break;default:}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[X.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[X.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t=this.hitDetectionInstructions;t.reverse();let e,i=t.length,n,s,o=-1;for(e=0;e<i;++e)n=t[e],s=n[0],s==X.END_GEOMETRY?o=e:s==X.BEGIN_GEOMETRY&&(n[2]=e,hc(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){let i=this.state;if(t){let n=t.getColor();i.fillStyle=Bt(n||Ut)}else i.fillStyle=void 0;if(e){let n=e.getColor();i.strokeStyle=Bt(n||$e);let s=e.getLineCap();i.lineCap=s!==void 0?s:Ui;let o=e.getLineDash();i.lineDash=o?o.slice():He;let a=e.getLineDashOffset();i.lineDashOffset=a||qe;let l=e.getLineJoin();i.lineJoin=l!==void 0?l:Ae;let h=e.getWidth();i.lineWidth=h!==void 0?h:ti;let c=e.getMiterLimit();i.miterLimit=c!==void 0?c:Je,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){let e=t.fillStyle,i=[X.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[X.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){let i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){let i=t.strokeStyle,n=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||s!=t.currentLineDash&&!Dt(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let e=[X.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Cs(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;_n(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},Me=ol});var al,nd,rd=R(()=>{Xn();Zi();al=class extends Me{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([X.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([X.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([X.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([X.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){let i=t.getAnchor(),n=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},nd=al});var ll,sd,od=R(()=>{Xn();Zi();ei();ll=class extends Me{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){let s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),a=[X.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){let i=this.state,n=i.strokeStyle,s=i.lineWidth;if(n===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,He,qe],ni);let o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(be),this.endGeometry(e)}drawMultiLineString(t,e){let i=this.state,n=i.strokeStyle,s=i.lineWidth;if(n===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ni);let o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride(),h=0;for(let c=0,u=o.length;c<u;++c)h=this.drawFlatCoordinates_(a,h,o[c],l);this.hitDetectionInstructions.push(be),this.endGeometry(e)}finish(){let t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(be),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(be),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(ni)}},sd=ll});var hl,cl,ad=R(()=>{Xn();Zi();ei();Cr();hl=class extends Me{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){let s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(ni),this.hitDetectionInstructions.push(ni);for(let h=0;h<l;++h){let c=i[h],u=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,c,n,!0,!a),m=[X.MOVE_TO_LINE_TO,u,d];this.instructions.push(m),this.hitDetectionInstructions.push(m),a&&(this.instructions.push(nl),this.hitDetectionInstructions.push(nl)),e=c}return o&&(this.instructions.push(Yr),this.hitDetectionInstructions.push(Yr)),a&&(this.instructions.push(be),this.hitDetectionInstructions.push(be)),e}drawCircle(t,e){let i=this.state,n=i.fillStyle,s=i.strokeStyle;if(n===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,Ut]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);let h=[X.CIRCLE,l];this.instructions.push(ni,h),this.hitDetectionInstructions.push(ni,h),i.fillStyle!==void 0&&(this.instructions.push(Yr),this.hitDetectionInstructions.push(Yr)),i.strokeStyle!==void 0&&(this.instructions.push(be),this.hitDetectionInstructions.push(be)),this.endGeometry(e)}drawPolygon(t,e){let i=this.state,n=i.fillStyle,s=i.strokeStyle;if(n===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,Ut]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e){let i=this.state,n=i.fillStyle,s=i.strokeStyle;if(n===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,Ut]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride(),h=0;for(let c=0,u=o.length;c<u;++c)h=this.drawFlatCoordinatess_(a,h,o[c],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(t!==0){let e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=mi(e[i],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}},cl=hl});function ld(r,t,e,i,n){let s=e,o=e,a=0,l=0,h=e,c,u,d,m,p,x,f,g,_,y;for(u=e;u<i;u+=n){let E=t[u],C=t[u+1];p!==void 0&&(_=E-p,y=C-x,m=Math.sqrt(_*_+y*y),f!==void 0&&(l+=d,c=Math.acos((f*_+g*y)/(d*m)),c>r&&(l>a&&(a=l,s=h,o=u),l=0,h=u-n)),d=m,f=_,g=y),p=E,x=C}return l+=m,l>a?[h,u]:[s,o]}var hd=R(()=>{});var Wn,ul,cd,dl=R(()=>{Xn();Zi();Ar();ei();ot();$();hd();Wn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ul=class extends Me{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){let i=this.textFillState_,n=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!n)return;let o=this.coordinates,a=o.length,l=t.getType(),h=null,c=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!at(this.getBufferedMaxExtent(),t.getExtent()))return;let u;if(h=t.getFlatCoordinates(),l=="LineString")u=[h.length];else if(l=="MultiLineString")u=t.getEnds();else if(l=="Polygon")u=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){let x=t.getEndss();u=[];for(let f=0,g=x.length;f<g;++f)u.push(x[f][0])}this.beginGeometry(t,e);let d=s.textAlign,m=0,p;for(let x=0,f=u.length;x<f;++x){if(d==null){let _=ld(s.maxAngle,h,m,u[x],c);m=_[0],p=_[1]}else p=u[x];for(let _=m;_<p;_+=c)o.push(h[_],h[_+1]);let g=o.length;m=u[x],this.drawChars_(a,g),a=g}this.endGeometry(e)}else{let u=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),s.overflow||u.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":let f=t.getFlatInteriorPoints();h=[];for(let g=0,_=f.length;g<_;g+=3)s.overflow||u.push(f[g+2]/this.resolution),h.push(f[g],f[g+1]);if(h.length===0)return;c=2;break;default:}let d=this.appendFlatPointCoordinates(h,c);if(d===a)return;if(u&&(d-a)/2!==h.length/c){let f=a/2;u=u.filter((g,_)=>{let y=o[(f+_)*2]===h[_*c]&&o[(f+_)*2+1]===h[_*c+1];return y||--f,y})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let m=s.padding;if(m!=Qe&&(s.scale[0]<0||s.scale[1]<0)){let f=s.padding[0],g=s.padding[1],_=s.padding[2],y=s.padding[3];s.scale[0]<0&&(g=-g,y=-y),s.scale[1]<0&&(f=-f,_=-_),m=[f,g,_,y]}let p=this.pixelRatio;this.instructions.push([X.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,m==Qe?Qe:m.map(function(f){return f*p}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);let x=1/p;this.hitDetectionInstructions.push([X.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[x,x],NaN,void 0,this.declutterImageWithText_,m,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),this.endGeometry(e)}}saveTextStates_(){let t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));let s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||Ti,justify:e.justify,textBaseline:e.textBaseline||ji,scale:e.scale});let o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){let i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();let l=this.pixelRatio,h=Wn[n.textBaseline],c=this.textOffsetY_*l,u=this.text_,d=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([X.DRAW_CHARS,t,e,h,n.overflow,a,n.maxAngle,l,c,s,d*l,u,o,1]),this.hitDetectionInstructions.push([X.DRAW_CHARS,t,e,h,n.overflow,a,n.maxAngle,1,c,s,d,u,o,1/l])}setTextStyle(t,e){let i,n,s;if(!t)this.text_="";else{let o=t.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=Bt(o.getColor()||Ut)):(n=null,this.textFillState_=n);let a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);let p=a.getLineDash(),x=a.getLineDashOffset(),f=a.getWidth(),g=a.getMiterLimit();s.lineCap=a.getLineCap()||Ui,s.lineDash=p?p.slice():He,s.lineDashOffset=x===void 0?qe:x,s.lineJoin=a.getLineJoin()||Ae,s.lineWidth=f===void 0?ti:f,s.miterLimit=g===void 0?Je:g,s.strokeStyle=Bt(a.getColor()||$e)}i=this.textState_;let l=t.getFont()||Js;zu(l);let h=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||ji,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Qe,i.scale=h===void 0?[1,1]:h;let c=t.getOffsetX(),u=t.getOffsetY(),d=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=m===void 0?0:m,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:U(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?typeof n.fillStyle=="string"?n.fillStyle:"|"+U(n.fillStyle):""}this.declutterImageWithText_=e}},cd=ul});var wm,fl,gl,ud=R(()=>{Xn();rd();od();ad();dl();wm={Circle:cl,Default:Me,Image:nd,LineString:sd,Polygon:cl,Text:cd},fl=class{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){let t={};for(let e in this.buildersByZIndex_){t[e]=t[e]||{};let i=this.buildersByZIndex_[e];for(let n in i){let s=i[n].finish();t[e][n]=s}}return t}getBuilder(t,e){let i=t!==void 0?t.toString():"0",n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);let s=n[e];if(s===void 0){let o=wm[e];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=s}return s}},gl=fl});var ml,dd,fd=R(()=>{st();yi();gs();ot();ml=class extends fn{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return K()}getData(t){return null}prepareFrame(t){return K()}renderFrame(t,e){return K()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return function(n,s){let o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,s,o)}.bind(this)}forEachFeatureAtCoordinate(t,e,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===q.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=q.LOADED&&e!=q.ERROR&&t.addEventListener(F.CHANGE,this.boundHandleImageChange_),e==q.IDLE&&(t.load(),e=t.getState()),e==q.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},dd=ml});var pl,so,_l=R(()=>{ge();pl=class extends dt{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}},so=pl});function Am(){let r=document.createElement("canvas");r.width=1,r.height=1,zn=r.getContext("2d")}var yl,zn,xl,oo,El=R(()=>{fd();_l();bn();_e();zi();It();mt();$();yl=[],zn=null;xl=class extends dd{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=St(),this.pixelTransform=St(),this.inversePixelTransform=St(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){zn||Am(),zn.clearRect(0,0,1,1);let n;try{zn.drawImage(t,e,i,1,1,0,0,1,1),n=zn.getImageData(0,0,1,1).data}catch{return zn=null,null}return n}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){let n=this.getLayer().getClassName(),s,o;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&Dt(Wi(t.style.backgroundColor),Wi(i)))){let a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=n;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=ct();let l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){let n=ie(i),s=Tn(i),o=Cn(i),a=En(i);ht(e.coordinateToPixelTransform,n),ht(e.coordinateToPixelTransform,s),ht(e.coordinateToPixelTransform,o),ht(e.coordinateToPixelTransform,a);let l=this.inversePixelTransform;ht(l,n),ht(l,s),ht(l,o),ht(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){let n=this.getLayer();if(n.hasListener(t)){let s=new so(t,this.inversePixelTransform,i,e);n.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(Yt.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Yt.POSTRENDER,t,e)}getRenderTransform(t,e,i,n,s,o,a){let l=s/2,h=o/2,c=n/e,u=-c,d=-t[0]+a,m=-t[1];return bt(this.tempTransform,l,h,c,u,-i,d,m)}disposeInternal(){delete this.frameState,super.disposeInternal()}},oo=xl});function gd(r,t,e,i,n,s,o,a,l,h,c,u){let d=r[t],m=r[t+1],p=0,x=0,f=0,g=0;function _(){p=d,x=m,t+=i,d=r[t],m=r[t+1],g+=f,f=Math.sqrt((d-p)*(d-p)+(m-x)*(m-x))}do _();while(t<e-i&&g+f<s);let y=f===0?0:(s-g)/f,E=ne(p,d,y),C=ne(x,m,y),S=t-i,v=g,b=s+a*l(h,n,c);for(;t<e-i&&g+f<b;)_();y=f===0?0:(b-g)/f;let M=ne(p,d,y),O=ne(x,m,y),D;if(u){let L=[E,C,M,O];ks(L,0,4,2,u,L,L),D=L[0]>L[2]}else D=E>M;let G=Math.PI,N=[],tt=S+i===t;t=S,f=0,g=v,d=r[t],m=r[t+1];let B;if(tt){_(),B=Math.atan2(m-x,d-p),D&&(B+=B>0?-G:G);let L=(M+E)/2,T=(O+C)/2;return N[0]=[L,T,(b-s)/2,B,n],N}n=n.replace(/\n/g," ");for(let L=0,T=n.length;L<T;){_();let I=Math.atan2(m-x,d-p);if(D&&(I+=I>0?-G:G),B!==void 0){let V=I-B;if(V+=V>G?-2*G:V<-G?2*G:0,Math.abs(V)>o)return null}B=I;let A=L,P=0;for(;L<T;++L){let V=D?T-L-1:L,Z=a*l(h,n[V],c);if(t+i<e&&g+f<s+P+Z/2)break;P+=Z}if(L===A)continue;let Y=D?n.substring(T-A,T-L):n.substring(A,L);y=f===0?0:(s+P/2-g)/f;let w=ne(p,d,y),rt=ne(x,m,y);N.push([w,rt,P/2,I,Y]),s+=P}return N}var md=R(()=>{lt();Xi()});function pd(r){return r[3].declutterBox}function _d(r,t){return(t==="start"||t==="end")&&!bm.test(r)&&(t=t==="start"?"left":"right"),Wn[t]}function Mm(r,t,e){return e>0&&r.push(`
`,""),r.push(t,""),r}var Yn,Ri,ri,si,Si,bm,Cl,xd,yd=R(()=>{Zi();dl();_e();$();ei();md();mt();va();Xi();Yn=xt(),Ri=[],ri=[],si=[],Si=[];bm=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");Cl=class{constructor(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=St(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,n){let s=t+e+i+n;if(this.labels_[s])return this.labels_[s];let o=n?this.strokeStates[n]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],h=this.pixelRatio,c=[l.scale[0]*h,l.scale[1]*h],u=Array.isArray(t),d=l.justify?Wn[l.justify]:_d(Array.isArray(t)?t[0]:t,l.textAlign||Ti),m=n&&o.lineWidth?o.lineWidth:0,p=u?t:t.split(`
`).reduce(Mm,[]),{width:x,height:f,widths:g,heights:_,lineWidths:y}=Bu(l,p),E=x+m,C=[],S=(E+2)*c[0],v=(f+m)*c[1],b={width:S<0?Math.floor(S):Math.ceil(S),height:v<0?Math.floor(v):Math.ceil(v),contextInstructions:C};(c[0]!=1||c[1]!=1)&&C.push("scale",c),n&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",m),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),i&&C.push("fillStyle",a.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");let M=.5-d,O=d*E+M*m,D=[],G=[],N=0,tt=0,B=0,L=0,T;for(let I=0,A=p.length;I<A;I+=2){let P=p[I];if(P===`
`){tt+=N,N=0,O=d*E+M*m,++L;continue}let Y=p[I+1]||l.font;Y!==T&&(n&&D.push("font",Y),i&&G.push("font",Y),T=Y),N=Math.max(N,_[B]);let w=[P,O+M*g[B]+d*(g[B]-y[L]),.5*(m+N)+tt];O+=g[B],n&&D.push("strokeText",w),i&&G.push("fillText",w),++B}return Array.prototype.push.apply(C,D),Array.prototype.push.apply(C,G),this.labels_[s]=b,b}replayTextBackground_(t,e,i,n,s,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,s,o,a,l,h,c,u,d,m,p,x,f){a*=d[0],l*=d[1];let g=i-a,_=n-l,y=s+h>t?t-h:s,E=o+c>e?e-c:o,C=p[3]+y*d[0]+p[1],S=p[0]+E*d[1]+p[2],v=g-p[3],b=_-p[0];(x||u!==0)&&(Ri[0]=v,Si[0]=v,Ri[1]=b,ri[1]=b,ri[0]=v+C,si[0]=ri[0],si[1]=b+S,Si[1]=si[1]);let M;return u!==0?(M=bt(St(),i,n,1,1,u,-i,-n),ht(M,Ri),ht(M,ri),ht(M,si),ht(M,Si),Nt(Math.min(Ri[0],ri[0],si[0],Si[0]),Math.min(Ri[1],ri[1],si[1],Si[1]),Math.max(Ri[0],ri[0],si[0],Si[0]),Math.max(Ri[1],ri[1],si[1],Si[1]),Yn)):Nt(Math.min(v,v+C),Math.min(b,b+S),Math.max(v,v+C),Math.max(b,b+S),Yn),m&&(g=Math.round(g),_=Math.round(_)),{drawImageX:g,drawImageY:_,drawImageW:y,drawImageH:E,originX:h,originY:c,declutterBox:{minX:Yn[0],minY:Yn[1],maxX:Yn[2],maxY:Yn[3],value:f},canvasTransform:M,scale:d}}replayImageOrLabel_(t,e,i,n,s,o,a){let l=!!(o||a),h=n.declutterBox,c=t.canvas,u=a?a[2]*n.scale[0]/2:0;return h.minX-u<=c.width/e&&h.maxX+u>=0&&h.minY-u<=c.height/e&&h.maxY+u>=0&&(l&&this.replayTextBackground_(t,Ri,ri,si,Si,o,a),Uu(t,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){if(this.alignFill_){let e=ht(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){let s=this.textStates[e],o=this.createLabel(t,e,n,i),a=this.strokeStates[i],l=this.pixelRatio,h=_d(Array.isArray(t)?t[0]:t,s.textAlign||Ti),c=Wn[s.textBaseline||ji],u=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],m=h*d+2*(.5-h)*u,p=c*o.height/l+2*(.5-c)*u;return{label:o,anchorX:m,anchorY:p}}execute_(t,e,i,n,s,o,a,l){let h;this.pixelCoordinates_&&Dt(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=oe(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Ec(this.renderedTransform_,i));let c=0,u=n.length,d=0,m,p,x,f,g,_,y,E,C,S,v,b,M=0,O=0,D=null,G=null,N=this.coordinateCache_,tt=this.viewRotation_,B=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,L={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:tt},T=this.instructions!=n||this.overlaps?0:200,I,A,P,Y;for(;c<u;){let w=n[c];switch(w[0]){case X.BEGIN_GEOMETRY:I=w[1],Y=w[3],I.getGeometry()?a!==void 0&&!at(a,Y.getExtent())?c=w[2]+1:++c:c=w[2];break;case X.BEGIN_PATH:M>T&&(this.fill_(t),M=0),O>T&&(t.stroke(),O=0),!M&&!O&&(t.beginPath(),f=NaN,g=NaN),++c;break;case X.CIRCLE:d=w[1];let V=h[d],Z=h[d+1],Jt=h[d+2],$t=h[d+3],gt=Jt-V,Ge=$t-Z,tn=Math.sqrt(gt*gt+Ge*Ge);t.moveTo(V+tn,Z),t.arc(V,Z,tn,0,2*Math.PI,!0),++c;break;case X.CLOSE_PATH:t.closePath(),++c;break;case X.CUSTOM:d=w[1],m=w[2];let es=w[3],en=w[4],is=w.length==6?w[5]:void 0;L.geometry=es,L.feature=I,c in N||(N[c]=[]);let oi=N[c];is?is(h,d,m,2,oi):(oi[0]=h[d],oi[1]=h[d+1],oi.length=2),en(oi,L),++c;break;case X.DRAW_IMAGE:d=w[1],m=w[2],E=w[3],p=w[4],x=w[5];let Qn=w[6],ai=w[7],ns=w[8],rs=w[9],ss=w[10],nn=w[11],Go=w[12],Pt=w[13],Qt=w[14],fe=w[15];if(!E&&w.length>=20){C=w[19],S=w[20],v=w[21],b=w[22];let jt=this.drawLabelWithPointPlacement_(C,S,v,b);E=jt.label,w[3]=E;let on=w[23];p=(jt.anchorX-on)*this.pixelRatio,w[4]=p;let te=w[24];x=(jt.anchorY-te)*this.pixelRatio,w[5]=x,Qn=E.height,w[6]=Qn,Pt=E.width,w[13]=Pt}let Xe;w.length>25&&(Xe=w[25]);let rn,Ai,li;w.length>17?(rn=w[16],Ai=w[17],li=w[18]):(rn=Qe,Ai=!1,li=!1),ss&&B?nn+=tt:!ss&&!B&&(nn-=tt);let sn=0;for(;d<m;d+=2){if(Xe&&Xe[sn++]<Pt/this.pixelRatio)continue;let jt=this.calculateImageOrLabelDimensions_(E.width,E.height,h[d],h[d+1],Pt,Qn,p,x,ns,rs,nn,Go,s,rn,Ai||li,I),on=[t,e,E,jt,ai,Ai?D:null,li?G:null];if(l){if(Qt==="none")continue;if(Qt==="obstacle"){l.insert(jt.declutterBox);continue}else{let te,We;if(fe){let Kt=m-d;if(!fe[Kt]){fe[Kt]=on;continue}if(te=fe[Kt],delete fe[Kt],We=pd(te),l.collides(We))continue}if(l.collides(jt.declutterBox))continue;te&&(l.insert(We),this.replayImageOrLabel_.apply(this,te)),l.insert(jt.declutterBox)}}this.replayImageOrLabel_.apply(this,on)}++c;break;case X.DRAW_CHARS:let os=w[1],wt=w[2],Xo=w[3],zg=w[4];b=w[5];let Yg=w[6],ec=w[7],ic=w[8];v=w[9];let Wo=w[10];C=w[11],S=w[12];let nc=[w[13],w[13]],zo=this.textStates[S],tr=zo.font,er=[zo.scale[0]*ec,zo.scale[1]*ec],ir;tr in this.widths_?ir=this.widths_[tr]:(ir={},this.widths_[tr]=ir);let rc=js(h,os,wt,2),sc=Math.abs(er[0])*Na(tr,C,ir);if(zg||sc<=rc){let jt=this.textStates[S].textAlign,on=(rc-sc)*Wn[jt],te=gd(h,os,wt,2,C,on,Yg,Math.abs(er[0]),Na,tr,ir,B?0:this.viewRotation_);t:if(te){let We=[],Kt,as,ls,Ot,ee;if(v)for(Kt=0,as=te.length;Kt<as;++Kt){ee=te[Kt],ls=ee[4],Ot=this.createLabel(ls,S,"",v),p=ee[2]+(er[0]<0?-Wo:Wo),x=Xo*Ot.height+(.5-Xo)*2*Wo*er[1]/er[0]-ic;let ze=this.calculateImageOrLabelDimensions_(Ot.width,Ot.height,ee[0],ee[1],Ot.width,Ot.height,p,x,0,0,ee[3],nc,!1,Qe,!1,I);if(l&&l.collides(ze.declutterBox))break t;We.push([t,e,Ot,ze,1,null,null])}if(b)for(Kt=0,as=te.length;Kt<as;++Kt){ee=te[Kt],ls=ee[4],Ot=this.createLabel(ls,S,b,""),p=ee[2],x=Xo*Ot.height-ic;let ze=this.calculateImageOrLabelDimensions_(Ot.width,Ot.height,ee[0],ee[1],Ot.width,Ot.height,p,x,0,0,ee[3],nc,!1,Qe,!1,I);if(l&&l.collides(ze.declutterBox))break t;We.push([t,e,Ot,ze,1,null,null])}l&&l.load(We.map(pd));for(let ze=0,Bg=We.length;ze<Bg;++ze)this.replayImageOrLabel_.apply(this,We[ze])}}++c;break;case X.END_GEOMETRY:if(o!==void 0){I=w[1];let jt=o(I,Y);if(jt)return jt}++c;break;case X.FILL:T?M++:this.fill_(t),++c;break;case X.MOVE_TO_LINE_TO:for(d=w[1],m=w[2],A=h[d],P=h[d+1],_=A+.5|0,y=P+.5|0,(_!==f||y!==g)&&(t.moveTo(A,P),f=_,g=y),d+=2;d<m;d+=2)A=h[d],P=h[d+1],_=A+.5|0,y=P+.5|0,(d==m-2||_!==f||y!==g)&&(t.lineTo(A,P),f=_,g=y);++c;break;case X.SET_FILL_STYLE:D=w,this.alignFill_=w[2],M&&(this.fill_(t),M=0,O&&(t.stroke(),O=0)),t.fillStyle=w[1],++c;break;case X.SET_STROKE_STYLE:G=w,O&&(t.stroke(),O=0),this.setStrokeStyle_(t,w),++c;break;case X.STROKE:T?O++:t.stroke(),++c;break;default:++c;break}}M&&this.fill_(t),O&&t.stroke()}execute(t,e,i,n,s,o){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,e,i,n,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,s)}},xd=Cl});function Pm(r){if(Rl[r]!==void 0)return Rl[r];let t=r*2+1,e=r*r,i=new Array(e+1);for(let s=0;s<=r;++s)for(let o=0;o<=r;++o){let a=s*s+o*o;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((r+s)*t+(r+o))*4+3),s>0&&l.push(((r-s)*t+(r+o))*4+3),o>0&&(l.push(((r+s)*t+(r-o))*4+3),s>0&&l.push(((r-s)*t+(r-o))*4+3))}let n=[];for(let s=0,o=i.length;s<o;++s)i[s]&&n.push(...i[s]);return Rl[r]=n,n}var Tl,Sl,Rl,Il,Ed=R(()=>{yd();$();_e();It();Se();mt();Xi();Tl=["Polygon","Circle","LineString","Image","Text","Default"],Sl=class{constructor(t,e,i,n,s,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=St(),this.createExecutors_(s)}clip(t,e){let i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(let e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);let n=t[e];for(let s in n){let o=n[s];i[s]=new xd(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(let e in this.executorsByZIndex_){let i=this.executorsByZIndex_[e];for(let n=0,s=t.length;n<s;++n)if(t[n]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,s,o){n=Math.round(n);let a=n*2+1,l=bt(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=ct(a,a));let c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):h||c.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=xt(),Mi(u,t),_n(u,e*(this.renderBuffer_+n),u));let d=Pm(n),m;function p(C,S){let v=c.getImageData(0,0,a,a).data;for(let b=0,M=d.length;b<M;b++)if(v[d[b]]>0){if(!o||m!=="Image"&&m!=="Text"||o.includes(C)){let O=(d[b]-3)/4,D=n-O%a,G=n-(O/a|0),N=s(C,S,D*D+G*G);if(N)return N}c.clearRect(0,0,a,a);break}}let x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(pe);let f,g,_,y,E;for(f=x.length-1;f>=0;--f){let C=x[f].toString();for(_=this.executorsByZIndex_[C],g=Tl.length-1;g>=0;--g)if(m=Tl[g],y=_[m],y!==void 0&&(E=y.executeHitDetection(c,l,i,p,u),E))return E}}getClipCoords(t){let e=this.maxExtent_;if(!e)return null;let i=e[0],n=e[1],s=e[2],o=e[3],a=[i,n,i,o,s,o,s,n];return oe(a,0,8,2,t,a),a}isEmpty(){return Ue(this.executorsByZIndex_)}execute(t,e,i,n,s,o,a){let l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(pe),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||Tl;let h,c,u,d,m,p;for(a&&l.reverse(),h=0,c=l.length;h<c;++h){let x=l[h].toString();for(m=this.executorsByZIndex_[x],u=0,d=o.length;u<d;++u){let f=o[u];p=m[f],p!==void 0&&p.execute(t,e,i,n,s,a)}}this.maxExtent_&&t.restore()}},Rl={};Il=Sl});var Tt,ao=R(()=>{Tt={ANIMATING:0,INTERACTING:1}});var Ll,lo,vl=R(()=>{sl();Ar();_e();ei();mt();$();Xi();vn();Ll=class extends ro{constructor(t,e,i,n,s,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=St()}drawImages_(t,e,i,n){if(!this.image_)return;let s=oe(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,u=s.length;c<u;c+=2){let d=s[c]-this.imageAnchorX_,m=s[c+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let p=d+this.imageAnchorX_,x=m+this.imageAnchorY_;bt(a,p,x,1,1,h,-p,-x),o.setTransform.apply(o,a),o.translate(p,x),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,m,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let s=oe(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){let l=s[e]+this.textOffsetX_,h=s[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,h-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,h),this.textFillState_&&o.fillText(this.text_,l,h))}}moveToLineTo_(t,e,i,n,s){let o=this.context_,a=oe(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let h=2;h<l;h+=2)o.lineTo(a[h],a[h+1]);return s&&o.closePath(),i}drawRings_(t,e,i,n){for(let s=0,o=i.length;s<o;++s)e=this.moveToLineTo_(t,e,i[s],n,!0);return e}drawCircle(t){if(!!at(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=lu(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],s=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,e){let i=e.getGeometryFunction()(t);!i||!at(this.extent_,i.getExtent())||(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){let e=t.getGeometriesArray();for(let i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!at(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){let e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getExtent();if(!!at(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let i=this.context_,n=t.getFlatCoordinates(),s=0,o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,h=o.length;l<h;++l)s=this.moveToLineTo_(n,s,o[l],a,!1);i.stroke()}if(this.text_!==""){let i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!at(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!at(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,s=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=s.length;a<l;++a){let h=s[a];n=this.drawRings_(i,n,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){let e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),Dt(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:Ti;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{let i=t.getColor();this.fillState_={fillStyle:Bt(i||Ut)}}if(!e)this.strokeState_=null;else{let i=e.getColor(),n=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),c=s||He;this.strokeState_={lineCap:n!==void 0?n:Ui,lineDash:this.pixelRatio_===1?c:c.map(u=>u*this.pixelRatio_),lineDashOffset:(o||qe)*this.pixelRatio_,lineJoin:a!==void 0?a:Ae,lineWidth:(l!==void 0?l:ti)*this.pixelRatio_,miterLimit:h!==void 0?h:Je,strokeStyle:Bt(i||$e)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}let i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{let e=t.getFill();if(!e)this.textFillState_=null;else{let m=e.getColor();this.textFillState_={fillStyle:Bt(m||Ut)}}let i=t.getStroke();if(!i)this.textStrokeState_=null;else{let m=i.getColor(),p=i.getLineCap(),x=i.getLineDash(),f=i.getLineDashOffset(),g=i.getLineJoin(),_=i.getWidth(),y=i.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:Ui,lineDash:x||He,lineDashOffset:f||qe,lineJoin:g!==void 0?g:Ae,lineWidth:_!==void 0?_:ti,miterLimit:y!==void 0?y:Je,strokeStyle:Bt(m||$e)}}let n=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),c=t.getText(),u=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:n!==void 0?n:Js,textAlign:u!==void 0?u:Ti,textBaseline:d!==void 0?d:ji},this.text_=c!==void 0?Array.isArray(c)?c.reduce((m,p,x)=>m+=x%2?" ":p,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}},lo=Ll});var Cd=R(()=>{tl()});function Td(r,t,e,i,n,s,o){let a=r[0]*Ce,l=r[1]*Ce,h=ct(a,l);h.imageSmoothingEnabled=!1;let c=h.canvas,u=new lo(h,Ce,n,null,o),d=e.length,m=Math.floor((256*256*256-1)/d),p={};for(let f=1;f<=d;++f){let g=e[f-1],_=g.getStyleFunction()||i;if(!i)continue;let y=_(g,s);if(!y)continue;Array.isArray(y)||(y=[y]);let C="#"+("000000"+(f*m).toString(16)).slice(-6);for(let S=0,v=y.length;S<v;++S){let b=y[S],M=b.getGeometryFunction()(g);if(!M||!at(n,M.getExtent()))continue;let O=b.clone(),D=O.getFill();D&&D.setColor(C);let G=O.getStroke();G&&(G.setColor(C),G.setLineDash(null)),O.setText(void 0);let N=b.getImage();if(N&&N.getOpacity()!==0){let L=N.getImageSize();if(!L)continue;let T=ct(L[0],L[1],void 0,{alpha:!1}),I=T.canvas;T.fillStyle=C,T.fillRect(0,0,I.width,I.height),O.setImage(new Gr({img:I,imgSize:L,anchor:N.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:N.getOrigin(),opacity:1,size:N.getSize(),scale:N.getScale(),rotation:N.getRotation(),rotateWithView:N.getRotateWithView()}))}let tt=O.getZIndex()||0,B=p[tt];B||(B={},p[tt]=B,B.Polygon=[],B.Circle=[],B.LineString=[],B.Point=[]),B[M.getType().replace("Multi","")].push(M,O)}}let x=Object.keys(p).map(Number).sort(pe);for(let f=0,g=x.length;f<g;++f){let _=p[x[f]];for(let y in _){let E=_[y];for(let C=0,S=E.length;C<S;C+=2){u.setStyle(E[C+1]);for(let v=0,b=t.length;v<b;++v)u.setTransform(t[v]),u.drawGeometry(E[C])}}}return h.getImageData(0,0,c.width,c.height)}function Rd(r,t,e){let i=[];if(e){let n=Math.floor(Math.round(r[0])*Ce),s=Math.floor(Math.round(r[1])*Ce),o=(z(n,0,e.width-1)+z(s,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],c=e.data[o+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/t.length);c&&c%u===0&&i.push(t[c/u-1])}return i}var Ce,Sd=R(()=>{vl();Cd();lt();It();$();mt();Ce=.5});function Ld(r,t){return parseInt(U(r),10)-parseInt(U(t),10)}function ho(r,t){let e=co(r,t);return e*e}function co(r,t){return Om*r/t}function Dm(r,t,e,i,n){let s=e.getFill(),o=e.getStroke();if(s||o){let l=r.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i)}let a=e.getText();if(a&&a.getText()){let l=(n||r).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function wl(r,t,e,i,n,s,o){let a=!1,l=e.getImage();if(l){let h=l.getImageState();h==q.LOADED||h==q.ERROR?l.unlistenImageChange(n):(h==q.IDLE&&l.load(),l.listenImageChange(n),a=!0)}return Fm(r,t,e,i,s,o),a}function Fm(r,t,e,i,n,s){let o=e.getGeometryFunction()(t);if(!o)return;let a=o.simplifyTransformed(i,n);if(e.getRenderer())vd(r,a,e,t);else{let h=Id[a.getType()];h(r,a,e,t,s)}}function vd(r,t,e,i){if(t.getType()=="GeometryCollection"){let s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)vd(r,s[o],e,i);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function km(r,t,e,i,n){let s=t.getGeometriesArray(),o,a;for(o=0,a=s.length;o<a;++o){let l=Id[s[o].getType()];l(r,s[o],e,i,n)}}function Nm(r,t,e,i,n){let s=e.getStroke();if(s){let a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i)}let o=e.getText();if(o&&o.getText()){let a=(n||r).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function Gm(r,t,e,i,n){let s=e.getStroke();if(s){let a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i)}let o=e.getText();if(o&&o.getText()){let a=(n||r).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function Xm(r,t,e,i,n){let s=e.getFill(),o=e.getStroke();if(o||s){let l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i)}let a=e.getText();if(a&&a.getText()){let l=(n||r).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Wm(r,t,e,i,n){let s=e.getImage(),o=e.getText(),a;if(s){if(s.getImageState()!=q.LOADED)return;let l=r;if(n){let c=s.getDeclutterMode();if(c!=="none")if(l=n,c==="obstacle"){let u=r.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawPoint(t,i)}else o&&o.getText()&&(a={})}let h=l.getBuilder(e.getZIndex(),"Image");h.setImageStyle(s,a),h.drawPoint(t,i)}if(o&&o.getText()){let l=r;n&&(l=n);let h=l.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(t,i)}}function zm(r,t,e,i,n){let s=e.getImage(),o=e.getText(),a;if(s){if(s.getImageState()!=q.LOADED)return;let l=r;if(n){let c=s.getDeclutterMode();if(c!=="none")if(l=n,c==="obstacle"){let u=r.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}let h=l.getBuilder(e.getZIndex(),"Image");h.setImageStyle(s,a),h.drawMultiPoint(t,i)}if(o&&o.getText()){let l=r;n&&(l=n);let h=l.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(t,i)}}function Ym(r,t,e,i,n){let s=e.getFill(),o=e.getStroke();if(s||o){let l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i)}let a=e.getText();if(a&&a.getText()){let l=(n||r).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}var Om,Id,Al=R(()=>{yi();ot();Om=.5,Id={Point:Wm,LineString:Nm,Polygon:Ym,MultiPoint:zm,MultiLineString:Gm,MultiPolygon:Xm,GeometryCollection:km,Circle:Dm}});var bl,wd,Ad=R(()=>{ud();El();Ed();ao();Sd();_e();$();It();Al();mt();Et();ot();fi();bl=class extends oo{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=xt(),this.wrappedRenderedExtent_=xt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){let n=e.extent,s=e.viewState,o=s.center,a=s.resolution,l=s.projection,h=s.rotation,c=l.getExtent(),u=this.getLayer().getSource(),d=e.pixelRatio,m=e.viewHints,p=!(m[Tt.ANIMATING]||m[Tt.INTERACTING]),x=this.compositionContext_,f=Math.round(e.size[0]*d),g=Math.round(e.size[1]*d),_=u.getWrapX()&&l.canWrapX(),y=_?H(c):null,E=_?Math.ceil((n[2]-c[2])/y)+1:1,C=_?Math.floor((n[0]-c[0])/y):0;do{let S=this.getRenderTransform(o,a,h,d,f,g,C*y);t.execute(x,1,S,h,p,void 0,i)}while(++C<E)}setupCompositionContext_(){if(this.opacity_!==1){let t=ct(this.context.canvas.width,this.context.canvas.height,yl);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){let t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Pn(this.compositionContext_),yl.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){let i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];Cc(this.pixelTransform,1/i,1/i),pn(this.inversePixelTransform,this.pixelTransform);let s=ys(this.pixelTransform);this.useContainer(e,s,this.getBackground(t));let o=this.context,a=o.canvas,l=this.replayGroup_,h=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!h||h.isEmpty()))return null;let c=Math.round(t.size[0]*i),u=Math.round(t.size[1]*i);a.width!=c||a.height!=u?(a.width=c,a.height=u,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,c,u),this.preRender(o,t);let d=t.viewState,m=d.projection;this.opacity_=n.opacity,this.setupCompositionContext_();let p=!1,x=!0;if(n.extent&&this.clipping){let f=se(n.extent,m);x=at(f,t.extent),p=x&&!kt(f,t.extent),p&&this.clipUnrotated(this.compositionContext_,t,f)}return x&&this.renderWorlds(l,t),p&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let i=[this.context.canvas.width,this.context.canvas.height];ht(this.pixelTransform,i);let n=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,h=this.getLayer(),c=[],u=i[0]*Ce,d=i[1]*Ce;c.push(this.getRenderTransform(n,s,o,Ce,u,d,0).slice());let m=h.getSource(),p=a.getExtent();if(m.getWrapX()&&a.canWrapX()&&!kt(p,l)){let x=l[0],f=H(p),g=0,_;for(;x<p[0];)--g,_=f*g,c.push(this.getRenderTransform(n,s,o,Ce,u,d,_).slice()),x+=f;for(g=0,x=l[2];x>p[2];)++g,_=f*g,c.push(this.getRenderTransform(n,s,o,Ce,u,d,_).slice()),x-=f}this.hitDetectionImageData_=Td(i,c,this.renderedFeatures_,h.getStyleFunction(),l,s,o)}e(Rd(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,i,n,s){if(!this.replayGroup_)return;let o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),h={},c=function(m,p,x){let f=U(m),g=h[f];if(g){if(g!==!0&&x<g.distanceSq){if(x===0)return h[f]=!0,s.splice(s.lastIndexOf(g),1),n(m,l,p);g.geometry=p,g.distanceSq=x}}else{if(x===0)return h[f]=!0,n(m,l,p);s.push(h[f]={feature:m,layer:l,geometry:p,distanceSq:x,callback:n})}},u,d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(m=>u=m.forEachFeatureAtCoordinate(t,o,a,i,c,m===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(p=>p.value):null)),u}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){let e=this.getLayer(),i=e.getSource();if(!i)return!1;let n=t.viewHints[Tt.ANIMATING],s=t.viewHints[Tt.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&n||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let l=t.extent,h=t.viewState,c=h.projection,u=h.resolution,d=t.pixelRatio,m=e.getRevision(),p=e.getRenderBuffer(),x=e.getRenderOrder();x===void 0&&(x=Ld);let f=h.center.slice(),g=_n(l,p*u),_=g.slice(),y=[g.slice()],E=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!kt(E,t.extent)){let L=H(E),T=Math.max(H(g)/2,L);g[0]=E[0]-T,g[2]=E[2]+T,bs(f,c);let I=hr(y[0],c);I[0]<E[0]&&I[2]<E[2]?y.push([I[0]+L,I[1],I[2]+L,I[3]]):I[0]>E[0]&&I[2]>E[2]&&y.push([I[0]-L,I[1],I[2]-L,I[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==m&&this.renderedRenderOrder_==x&&kt(this.wrappedRenderedExtent_,g))return Dt(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=f,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let C=new gl(co(u,d),g,u,d),S;this.getLayer().getDeclutter()&&(S=new gl(co(u,d),g,u,d));let v=Ni(),b;if(v){for(let L=0,T=y.length;L<T;++L){let I=y[L],A=Gi(I,c);i.loadFeatures(A,fa(u,c),v)}b=Ee(v,c)}else for(let L=0,T=y.length;L<T;++L)i.loadFeatures(y[L],u,c);let M=ho(u,d),O=!0,D=function(L){let T,I=L.getStyleFunction()||e.getStyleFunction();if(I&&(T=I(L,u)),T){let A=this.renderFeature(L,M,T,C,b,S);O=O&&!A}}.bind(this),G=Gi(g,c),N=i.getFeaturesInExtent(G);x&&N.sort(x);for(let L=0,T=N.length;L<T;++L)D(N[L]);this.renderedFeatures_=N,this.ready=O;let tt=C.finish(),B=new Il(g,u,d,i.getOverlaps(),tt,e.getRenderBuffer());return S&&(this.declutterExecutorGroup=new Il(g,u,d,i.getOverlaps(),S.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=m,this.renderedRenderOrder_=x,this.renderedExtent_=_,this.wrappedRenderedExtent_=g,this.renderedCenter_=f,this.renderedProjection_=c,this.replayGroup_=B,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,h=i.length;l<h;++l)a=wl(n,t,i[l],e,this.boundHandleStyleImageChange_,s,o)||a;else a=wl(n,t,i,e,this.boundHandleStyleImageChange_,s,o);return a}},wd=bl});var Ml,bd,Md=R(()=>{id();Ad();Ml=class extends ed{constructor(t){super(t)}createRenderer(){return new wd(this)}},bd=Ml});var Pd,Pl,Ol,Od=R(()=>{Pd=us(Za(),1);$();ot();Se();Pl=class{constructor(t){this.rbush_=new Pd.default(t),this.items_={}}insert(t,e){let i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[U(e)]=i}load(t,e){let i=new Array(e.length);for(let n=0,s=e.length;n<s;n++){let o=t[n],a=e[n],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[n]=l,this.items_[U(a)]=l}this.rbush_.load(i)}remove(t){let e=U(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){let i=this.items_[U(e)],n=[i.minX,i.minY,i.maxX,i.maxY];xe(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){let e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(n){return n.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,s=t.length;n<s;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return Ue(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let e=this.rbush_.toJSON();return Nt(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(let e in t.items_)this.items_[e]=t.items_[e]}},Ol=Pl});function Dd(r){return r?Array.isArray(r)?function(t){return r}:typeof r=="function"?r:function(t){return[r]}:null}var Dl,uo,Fl=R(()=>{Ft();ot();Et();Dl=class extends it{constructor(t){super(),this.projection=et(t.projection),this.attributions_=Dd(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;let e=this;this.viewPromise_=new Promise(function(i,n){e.viewResolver=i,e.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return K()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Dd(t),this.changed()}setState(t){this.state_=t,this.changed()}};uo=Dl});var ae,Fd=R(()=>{ae={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}});function kd(r,t){return[[-1/0,-1/0,1/0,1/0]]}var Nd=R(()=>{Et()});function Um(r,t,e,i,n,s,o){let a=new XMLHttpRequest;a.open("GET",typeof r=="function"?r(e,i,n):r,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Bm,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){let h=t.getType(),c;h=="json"||h=="text"?c=a.responseText:h=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):h=="arraybuffer"&&(c=a.response),c?s(t.readFeatures(c,{extent:e,featureProjection:n}),t.readProjection(c)):o()}else o()},a.onerror=o,a.send()}function kl(r,t){return function(e,i,n,s,o){let a=this;Um(r,t,e,i,n,function(l,h){a.addFeatures(l),s!==void 0&&s(l)},o||Vt)}}var Bm,Gd=R(()=>{At();Bm=!1});var Pe,Nl,Xd,Wd=R(()=>{ci();rr();ge();st();ln();Od();Fl();Fd();At();Nd();_t();$();mt();ot();Se();Zt();Gd();Pe=class extends dt{constructor(t,e,i){super(t),this.feature=e,this.features=i}},Nl=class extends uo{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Vt,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(W(this.format_,7),this.loader_=kl(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:kd;let e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new Ol:null,this.loadedExtentsRtree_=new Ol,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,n;Array.isArray(t.features)?n=t.features:t.features&&(i=t.features,n=i.getArray()),!e&&i===void 0&&(i=new pt(n)),n!==void 0&&this.addFeaturesInternal(n),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let e=U(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);let i=t.getGeometry();if(i){let n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Pe(ae.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[j(e,F.CHANGE,this.handleFeatureChange_,this),j(e,me.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0,n=e.getId();return n!==void 0&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(W(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let e=[],i=[],n=[];for(let s=0,o=t.length;s<o;s++){let a=t[s],l=U(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){let a=i[s],l=U(a);this.setupChangeEvents_(l,a);let h=a.getGeometry();if(h){let c=h.getExtent();e.push(c),n.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(ae.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new Pe(ae.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(ae.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(ae.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(Rt.ADD,function(i){e||(e=!0,this.addFeature(i.element),e=!1)}.bind(this)),t.addEventListener(Rt.REMOVE,function(i){e||(e=!0,this.removeFeature(i.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(let i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(J);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let i=function(n){this.removeFeatureInternal(n)}.bind(this);this.featuresRtree_.forEach(i);for(let n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let e=new Pe(ae.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){let i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(n){if(n.getGeometry().intersectsCoordinate(t))return e(n)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){let s=e(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Ue(this.nullGeometryFeatures_)||bi(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);let n=Ac(t,e);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){let i=t[0],n=t[1],s=null,o=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0];return e=e||Ye,this.featuresRtree_.forEachInExtent(l,function(h){if(e(h)){let c=h.getGeometry(),u=a;if(a=c.closestPointXY(i,n,o,a),a<u){s=h;let d=Math.sqrt(a);l[0]=i-d,l[1]=n-d,l[2]=i+d,l[3]=n+d}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){let e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let e=t.target,i=U(e),n=e.getGeometry();if(!n)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{let o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}let s=e.getId();if(s!==void 0){let o=s.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Pe(ae.CHANGEFEATURE,e))}hasFeature(t){let e=t.getId();return e!==void 0?e in this.idIndex_:U(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ue(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){let n=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let o=0,a=s.length;o<a;++o){let l=s[o];n.forEachInExtent(l,function(c){return kt(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Pe(ae.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,function(c){--this.loadingExtentsCount_,this.dispatchEvent(new Pe(ae.FEATURESLOADEND,void 0,c))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Pe(ae.FEATURESLOADERROR))}.bind(this)),n.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let e=this.loadedExtentsRtree_,i;e.forEachInExtent(t,function(n){if(xe(n.extent,t))return i=n,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;let e=U(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let e=U(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(J),delete this.featureChangeKeys_[e];let n=t.getId();return n!==void 0&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Pe(ae.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(let i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){W(this.format_,7),this.url_=t,this.setLoader(kl(t,this.format_))}},Xd=Nl});function zd(r){if(!(r.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");let t=r.inversePixelTransform[0],e=r.frameState,i=yc(r.inversePixelTransform.slice(),e.coordinateToPixelTransform),n=ho(e.viewState.resolution,t),s,o=Ni();return o&&(s=Ee(o,e.viewState.projection)),new lo(r.context,t,e.extent,i,e.viewState.rotation,n,s)}var Yd=R(()=>{vl();_e();Al();Et()});function Bd(r,t,e){let i=[],n=r(0),s=r(1),o=t(n),a=t(s),l=[s,n],h=[a,o],c=[1,0],u={},d=1e5,m,p,x,f,g,_;for(;--d>0&&c.length>0;)x=c.pop(),n=l.pop(),o=h.pop(),_=x.toString(),_ in u||(i.push(o[0],o[1]),u[_]=!0),f=c.pop(),s=l.pop(),a=h.pop(),g=(x+f)/2,m=r(g),p=t(m),vs(p[0],p[1],o[0],o[1],a[0],a[1])<e?(i.push(a[0],a[1]),_=f.toString(),u[_]=!0):(c.push(f,g,g,x),h.push(a,p,p,o),l.push(s,m,m,n));return i}function Ud(r,t,e,i,n){let s=et("EPSG:4326");return Bd(function(o){return[r,t+(e-t)*o]},zt(s,i),n)}function jd(r,t,e,i,n){let s=et("EPSG:4326");return Bd(function(o){return[t+(e-t)*o,r]},zt(s,i),n)}var Kd=R(()=>{Et();lt()});var jm,Km,Gl,Vd,Zd=R(()=>{ci();bn();Zo();Lr();Ou();Ea();Ks();to();za();Md();Wd();$();lt();fi();Et();Yd();Kd();jm=new xi({color:"rgba(0,0,0,0.2)"}),Km=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],Gl=class extends bd{constructor(t){t=t||{};let e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=t.targetSize!==void 0?t.targetSize:100,this.maxLines_=t.maxLines!==void 0?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=t.strokeStyle!==void 0?t.strokeStyle:jm,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=t.lonLabelFormatter==null?ra.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=t.latLabelFormatter==null?ra.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=t.lonLabelPosition==null?0:t.lonLabelPosition,this.latLabelPosition_=t.latLabelPosition==null?1:t.latLabelPosition,this.lonLabelStyleBase_=new ii({text:t.lonLabelStyle!==void 0?t.lonLabelStyle.clone():new Dr({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Ze({color:"rgba(0,0,0,1)"}),stroke:new xi({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=function(i){let n=i.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(n),this.lonLabelStyleBase_}.bind(this),this.latLabelStyleBase_=new ii({text:t.latLabelStyle!==void 0?t.latLabelStyle.clone():new Dr({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Ze({color:"rgba(0,0,0,1)"}),stroke:new xi({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=function(i){let n=i.get("graticule_label");return this.latLabelStyleBase_.getText().setText(n),this.latLabelStyleBase_}.bind(this),this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(Yt.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=t.intervals!==void 0?t.intervals:Km,this.setSource(new Xd({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new pt,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new ii({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let i=t.slice();return this.projection_&&this.getSource().getWrapX()&&hr(i,this.projection_),this.loadedExtent_&&(Sc(this.loadedExtent_,i,e)?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]}loaderFunction(t,e,i){this.loadedExtent_=t;let n=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=Le(s,t);if(this.renderedExtent_&&xe(this.renderedExtent_,o)&&this.renderedResolution_===e||(this.renderedExtent_=o,this.renderedResolution_=e,Pi(o)))return;let a=Gt(o),l=e*e/4;(!this.projection_||!ye(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(o,a,e,l);let c=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);let u;for(;c>this.featurePool_.length;)u=new ps,this.featurePool_.push(u);let d=n.getFeaturesCollection();d.clear();let m=0,p,x;for(p=0,x=this.meridians_.length;p<x;++p)u=this.featurePool_[m++],u.setGeometry(this.meridians_[p]),u.setStyle(this.lineStyle_),d.push(u);for(p=0,x=this.parallels_.length;p<x;++p)u=this.featurePool_[m++],u.setGeometry(this.parallels_[p]),u.setStyle(this.lineStyle_),d.push(u)}addMeridian_(t,e,i,n,s,o){let a=this.getMeridian_(t,e,i,n,o);if(at(a.getExtent(),s)){if(this.meridiansLabels_){let l=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new Sr([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(t,e,i,n,s,o){let a=this.getParallel_(t,e,i,n,o);if(at(a.getExtent(),s)){if(this.parallelsLabels_){let l=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new Sr([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(t){let e=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,n=t.frameState.size,s=t.frameState.extent,o=Gt(s),a=s;if(e){let p=n[0]*i,x=n[1]*i;a=[o[0]-p/2,o[1]-x/2,o[0]+p/2,o[1]+x/2]}let l=0,h=0,c=this.latLabelPosition_<.5,u=this.projection_.getExtent(),d=H(u);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!kt(u,s)){l=Math.floor((s[0]-u[0])/d),h=Math.ceil((s[2]-u[2])/d);let p=Math.abs(e)>Math.PI/2;c=c!==p}let m=zd(t);for(let p=l;p<=h;++p){let x=this.meridians_.length+this.parallels_.length,f,g,_,y;if(this.meridiansLabels_)for(g=0,_=this.meridiansLabels_.length;g<_;++g){let E=this.meridians_[g];if(!e&&p===0)y=this.getMeridianPoint_(E,s,g);else{let C=E.clone();C.translate(p*d,0),C.rotate(-e,o),y=this.getMeridianPoint_(C,a,g),y.rotate(e,o)}f=this.featurePool_[x++],f.setGeometry(y),f.set("graticule_label",this.meridiansLabels_[g].text),m.drawFeature(f,this.lonLabelStyle_(f))}if(this.parallelsLabels_&&(p===l&&c||p===h&&!c))for(g=0,_=this.parallels_.length;g<_;++g){let E=this.parallels_[g];if(!e&&p===0)y=this.getParallelPoint_(E,s,g);else{let C=E.clone();C.translate(p*d,0),C.rotate(-e,o),y=this.getParallelPoint_(C,a,g),y.rotate(e,o)}f=this.featurePool_[x++],f.setGeometry(y),f.set("graticule_label",this.parallelsLabels_[g].text),m.drawFeature(f,this.latLabelStyle_(f))}}}createGraticule_(t,e,i,n){let s=this.getInterval_(i);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1,a=this.projection_.getExtent(),l=H(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!kt(a,t)&&(H(t)>=l?(t[0]=a[0],t[2]=a[2]):o=!0);let h=[z(e[0],this.minX_,this.maxX_),z(e[1],this.minY_,this.maxY_)],c=this.toLonLatTransform_(h);isNaN(c[1])&&(c[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let u=z(c[0],this.minLon_,this.maxLon_),d=z(c[1],this.minLat_,this.maxLat_),m=this.maxLines_,p,x,f,g,_=t;o||(_=[z(t[0],this.minX_,this.maxX_),z(t[1],this.minY_,this.maxY_),z(t[2],this.minX_,this.maxX_),z(t[3],this.minY_,this.maxY_)]);let y=lr(_,this.toLonLatTransform_,void 0,8),E=y[3],C=y[2],S=y[1],v=y[0];if(o||(Ht(_,this.bottomLeft_)&&(v=this.minLon_,S=this.minLat_),Ht(_,this.bottomRight_)&&(C=this.maxLon_,S=this.minLat_),Ht(_,this.topLeft_)&&(v=this.minLon_,E=this.maxLat_),Ht(_,this.topRight_)&&(C=this.maxLon_,E=this.maxLat_),E=z(E,d,this.maxLat_),C=z(C,u,this.maxLon_),S=z(S,this.minLat_,d),v=z(v,this.minLon_,u)),u=Math.floor(u/s)*s,g=z(u,this.minLon_,this.maxLon_),x=this.addMeridian_(g,S,E,n,t,0),p=0,o)for(;(g-=s)>=v&&p++<m;)x=this.addMeridian_(g,S,E,n,t,x);else for(;g!=this.minLon_&&p++<m;)g=Math.max(g-s,this.minLon_),x=this.addMeridian_(g,S,E,n,t,x);if(g=z(u,this.minLon_,this.maxLon_),p=0,o)for(;(g+=s)<=C&&p++<m;)x=this.addMeridian_(g,S,E,n,t,x);else for(;g!=this.maxLon_&&p++<m;)g=Math.min(g+s,this.maxLon_),x=this.addMeridian_(g,S,E,n,t,x);for(this.meridians_.length=x,this.meridiansLabels_&&(this.meridiansLabels_.length=x),d=Math.floor(d/s)*s,f=z(d,this.minLat_,this.maxLat_),x=this.addParallel_(f,v,C,n,t,0),p=0;f!=this.minLat_&&p++<m;)f=Math.max(f-s,this.minLat_),x=this.addParallel_(f,v,C,n,t,x);for(f=z(d,this.minLat_,this.maxLat_),p=0;f!=this.maxLat_&&p++<m;)f=Math.min(f+s,this.maxLat_),x=this.addParallel_(f,v,C,n,t,x);this.parallels_.length=x,this.parallelsLabels_&&(this.parallelsLabels_.length=x)}getInterval_(t){let e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1],n=-1,s=Math.pow(this.targetSize_*t,2),o=[],a=[];for(let l=0,h=this.intervals_.length;l<h;++l){let c=z(this.intervals_[l]/2,0,90),u=z(i,-90+c,90-c);if(o[0]=e-c,o[1]=u-c,a[0]=e+c,a[1]=u+c,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;n=this.intervals_[l]}return n}getMeridian_(t,e,i,n,s){let o=Ud(t,e,i,this.projection_,n),a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new wa(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(t,e,i){let n=t.getFlatCoordinates(),s=1,o=n.length-1;n[s]>n[o]&&(s=o,o=1);let a=Math.max(e[1],n[s]),l=Math.min(e[3],n[o]),h=z(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,l),u=[n[s-1]+(n[o-1]-n[s-1])*(h-n[s])/(n[o]-n[s]),h],d=this.meridiansLabels_[i].geom;return d.setCoordinates(u),d}getMeridians(){return this.meridians_}getParallel_(t,e,i,n,s){let o=jd(t,e,i,this.projection_,n),a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new wa(o,"XY"),a}getParallelPoint_(t,e,i){let n=t.getFlatCoordinates(),s=0,o=n.length-2;n[s]>n[o]&&(s=o,o=0);let a=Math.max(e[0],n[s]),l=Math.min(e[2],n[o]),h=z(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,l),c=n[s+1]+(n[o+1]-n[s+1])*(h-n[s])/(n[o]-n[s]),u=[h,c],d=this.parallelsLabels_[i].geom;return d.setCoordinates(u),d}getParallels(){return this.parallels_}updateProjectionInfo_(t){let e=et("EPSG:4326"),i=t.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];let n=zt(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{let o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,h){h=h||2;let c=n(a,l,h);for(let u=0,d=c.length;u<d;u+=h)c[u]<o&&(c[u]+=360);return c}}this.fromLonLatTransform_=zt(e,t);let s=lr([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Gt(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}},Vd=Gl});var Xl,Hd,qd=R(()=>{io();yi();Xl=class extends Gn{constructor(t,e,i,n,s){let o=s!==void 0?q.IDLE:q.LOADED;super(t,e,i,o),this.loader_=s!==void 0?s:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=q.ERROR):this.state=q.LOADED,this.changed()}load(){this.state==q.IDLE&&(this.state=q.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}},Hd=Xl});var k,Oe=R(()=>{k={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}});function Wl(r){return Math.pow(r,3)}function le(r){return 1-Wl(1-r)}function Jd(r){return 3*r*r-2*r*r*r}function $d(r){return r}var Ii=R(()=>{});var zl,De,Bn=R(()=>{cn();st();Oe();ot();Ii();zl=class extends Ie{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(F.CHANGE)}release(){this.state===k.ERROR&&this.setState(k.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==k.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==k.LOADED){t.interimTile=null;break}else t.getState()==k.LOADING?e=t:t.getState()==k.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==k.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){K()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;let n=e-i+1e3/60;return n>=this.transition_?1:Wl(n/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}},De=zl});function Vm(){let r=ct(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}var Yl,Un,fo=R(()=>{Bn();Oe();It();no();Yl=class extends De{constructor(t,e,i,n,s,o){super(t,e,o),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=k.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=k.ERROR,this.unlistenImage_(),this.image_=Vm(),this.changed()}handleImageLoad_(){let t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=k.LOADED:this.state=k.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==k.ERROR&&(this.state=k.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==k.IDLE&&(this.state=k.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Fr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};Un=Yl});var Bl,go,Ul=R(()=>{Bl=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;let t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;let n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;let s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},go=Bl});function Zm(r,t){Nn.expire()}var jl,Qd,tf=R(()=>{nr();At();ot();_e();$();qa();Vi();fi();jl=class extends hi{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){K()}calculateMatrices2D(t){let e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;bt(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),pn(n,i)}forEachFeatureAtCoordinate(t,e,i,n,s,o,a,l){let h,c=e.viewState;function u(E,C,S,v){return s.call(o,C,E?S:null,v)}let d=c.projection,m=bs(t.slice(),d),p=[[0,0]];if(d.canWrapX()&&n){let E=d.getExtent(),C=H(E);p.push([-C,0],[C,0])}let x=e.layerStatesArray,f=x.length,g=[],_=[];for(let E=0;E<p.length;E++)for(let C=f-1;C>=0;--C){let S=x[C],v=S.layer;if(v.hasRenderer()&&kn(S,c)&&a.call(l,v)){let b=v.getRenderer(),M=v.getSource();if(b&&M){let O=M.getWrapX()?m:t,D=u.bind(null,S.managed);_[0]=O[0]+p[E][0],_[1]=O[1]+p[E][1],h=b.forEachFeatureAtCoordinate(_,e,i,D,g)}if(h)return h}}if(g.length===0)return;let y=1/g.length;return g.forEach((E,C)=>E.distanceSq+=C*y),g.sort((E,C)=>E.distanceSq-C.distanceSq),g.some(E=>h=E.callback(E.feature,E.layer,E.geometry)),h}hasFeatureAtCoordinate(t,e,i,n,s,o){return this.forEachFeatureAtCoordinate(t,e,i,n,Ye,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){K()}scheduleExpireIconCache(t){Nn.canExpireCache()&&t.postRenderFunctions.push(Zm)}};Qd=jl});var Kl,ef,nf=R(()=>{tf();ln();_l();bn();Bi();ei();Vi();Zt();It();Kl=class extends Qd{constructor(t){super(t),this.fontChangeListenerKey_=j(we,me.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");let e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Ci+" ol-layers";let i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){let i=this.getMap();if(i.hasListener(t)){let n=new so(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){J(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Yt.PRECOMPOSE,t);let e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;let n=[],s=null;for(let o=0,a=e.length;o<a;++o){let l=e[o];t.layerIndex=o;let h=l.layer,c=h.getSourceState();if(!kn(l,i)||c!="ready"&&c!="undefined"){h.unrender();continue}let u=h.render(t,s);!u||(u!==s&&(this.children_.push(u),s=u),"getDeclutter"in h&&n.push(h))}for(let o=n.length-1;o>=0;--o)n[o].renderDeclutter(t);Gu(this.element_,this.children_),this.dispatchRenderEvent(Yt.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}},ef=Kl});var Te,Vl,Br,Ur,rf=R(()=>{Ua();ci();rr();ge();st();ln();_t();Se();$();ot();Zt();Te=class extends dt{constructor(t,e){super(t),this.layer=e}},Vl={LAYERS:"layers"},Br=class extends eo{constructor(t){t=t||{};let e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Vl.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new pt(i.slice(),{unique:!0}):W(typeof i.getArray=="function",43):i=new pt(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(J),this.layersListenerKeys_.length=0;let t=this.getLayers();this.layersListenerKeys_.push(j(t,Rt.ADD,this.handleLayersAdd_,this),j(t,Rt.REMOVE,this.handleLayersRemove_,this));for(let i in this.listenerKeys_)this.listenerKeys_[i].forEach(J);Re(this.listenerKeys_);let e=t.getArray();for(let i=0,n=e.length;i<n;i++){let s=e[i];this.registerLayerListeners_(s),this.dispatchEvent(new Te("addlayer",s))}this.changed()}registerLayerListeners_(t){let e=[j(t,me.PROPERTYCHANGE,this.handleLayerChange_,this),j(t,F.CHANGE,this.handleLayerChange_,this)];t instanceof Br&&e.push(j(t,"addlayer",this.handleLayerGroupAdd_,this),j(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[U(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Te("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Te("removelayer",t.layer))}handleLayersAdd_(t){let e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Te("addlayer",e)),this.changed()}handleLayersRemove_(t){let e=t.element,i=U(e);this.listenerKeys_[i].forEach(J),delete this.listenerKeys_[i],this.dispatchEvent(new Te("removelayer",e)),this.changed()}getLayers(){return this.get(Vl.LAYERS)}setLayers(t){let e=this.getLayers();if(e){let i=e.getArray();for(let n=0,s=i.length;n<s;++n)this.dispatchEvent(new Te("removelayer",i[n]))}this.set(Vl.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){let e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});let n=this.getLayerState(),s=n.zIndex;!t&&n.zIndex===void 0&&(s=0);for(let o=i,a=e.length;o<a;o++){let l=e[o];l.opacity*=n.opacity,l.visible=l.visible&&n.visible,l.maxResolution=Math.min(l.maxResolution,n.maxResolution),l.minResolution=Math.max(l.minResolution,n.minResolution),l.minZoom=Math.max(l.minZoom,n.minZoom),l.maxZoom=Math.min(l.maxZoom,n.maxZoom),n.extent!==void 0&&(l.extent!==void 0?l.extent=Le(l.extent,n.extent):l.extent=n.extent),l.zIndex===void 0&&(l.zIndex=s)}return e}getSourceState(){return"ready"}},Ur=Br});var Zl,Fe,mo=R(()=>{ge();Zl=class extends dt{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}},Fe=Zl});var Hl,he,po=R(()=>{mo();Hl=class extends Fe{constructor(t,e,i,n,s,o){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},he=Hl});var nt,jr=R(()=>{st();nt={SINGLECLICK:"singleclick",CLICK:F.CLICK,DBLCLICK:F.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}});var Kr,ql=R(()=>{Kr={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}});var Jl,_o,$l=R(()=>{st();po();jr();ql();cn();je();At();Zt();Jl=class extends Ie{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;let i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=j(i,Kr.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=j(i,Kr.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(F.TOUCHMOVE,this.boundHandleTouchMove_,xs?{passive:!1}:!1)}emulateClick_(t){let e=new he(nt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new he(nt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;let i=new he(nt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(t){let e=t,i=e.pointerId;if(e.type==nt.POINTERUP||e.type==nt.POINTERCANCEL){delete this.trackedTouches_[i];for(let n in this.trackedTouches_)if(this.trackedTouches_[n].target!==e.target){delete this.trackedTouches_[n];break}}else(e.type==nt.POINTERDOWN||e.type==nt.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);let e=new he(nt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(J),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);let e=new he(nt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(let i in t){let n=t[i];this.down_[i]=typeof n=="function"?Vt:n}if(this.dragListenerKeys_.length===0){let i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(j(i,nt.POINTERMOVE,this.handlePointerMove_,this),j(i,nt.POINTERUP,this.handlePointerUp_,this),j(this.element_,nt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(j(this.element_.getRootNode(),nt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;let e=new he(nt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;let e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new he(nt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){let e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(J(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(F.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(J(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(J),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},_o=Jl});var ce,xo=R(()=>{ce={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}});var Lt,sf=R(()=>{Lt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}});var Vr,Ql,of,af=R(()=>{_t();Se();Vr=1/0,Ql=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Re(this.queuedElements_)}dequeue(){let t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));let n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){W(!(this.keyFunction_(t)in this.queuedElements_),31);let e=this.priorityFunction_(t);return e!=Vr?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){let e=this.elements_,i=this.priorities_,n=e.length,s=e[t],o=i[t],a=t;for(;t<n>>1;){let l=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),c=h<n&&i[h]<i[l]?h:l;e[t]=e[c],i[t]=i[c],t=c}e[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,e){let i=this.elements_,n=this.priorities_,s=i[e],o=n[e];for(;e>t;){let a=this.getParentIndex_(e);if(n[a]>o)i[e]=i[a],n[e]=n[a],e=a;else break}i[e]=s,n[e]=o}reprioritize(){let t=this.priorityFunction_,e=this.elements_,i=this.priorities_,n=0,s=e.length,o,a,l;for(a=0;a<s;++a)o=e[a],l=t(o),l==Vr?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=l,e[n++]=o);e.length=n,i.length=n,this.heapify_()}},of=Ql});function lf(r,t,e,i,n){if(!r||!(e in r.wantedTiles))return Vr;if(!r.wantedTiles[e][t.getKey()])return Vr;let s=r.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(n)+Math.sqrt(o*o+a*a)/n}var th,yo,eh=R(()=>{st();af();Oe();th=class extends of{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){let e=super.enqueue(t);return e&&t[0].addEventListener(F.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){let e=t.target,i=e.getState();if(i===k.LOADED||i===k.ERROR||i===k.EMPTY){i!==k.ERROR&&e.removeEventListener(F.CHANGE,this.boundHandleTileChange_);let n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0,n,s,o;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),n=s.getState(),n===k.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}},yo=th});var ue,hf=R(()=>{ue={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}});function ih(r,t,e){return function(i,n,s,o,a){if(!i)return;if(!n&&!t)return i;let l=t?0:s[0]*n,h=t?0:s[1]*n,c=a?a[0]:0,u=a?a[1]:0,d=r[0]+l/2+c,m=r[2]-l/2+c,p=r[1]+h/2+u,x=r[3]-h/2+u;d>m&&(d=(m+d)/2,m=d),p>x&&(p=(x+p)/2,x=p);let f=z(i[0],d,m),g=z(i[1],p,x);if(o&&e&&n){let _=30*n;f+=-_*Math.log(1+Math.max(0,d-i[0])/_)+_*Math.log(1+Math.max(0,i[0]-m)/_),g+=-_*Math.log(1+Math.max(0,p-i[1])/_)+_*Math.log(1+Math.max(0,i[1]-x)/_)}return[f,g]}}function cf(r){return r}var uf=R(()=>{lt()});function nh(r,t,e,i){let n=H(t)/e[0],s=yt(t)/e[1];return i?Math.min(r,Math.max(n,s)):Math.min(r,Math.min(n,s))}function rh(r,t,e){let i=Math.min(r,t),n=50;return i*=Math.log(1+n*Math.max(0,r/t-1))/n+1,e&&(i=Math.max(i,e),i/=Math.log(1+n*Math.max(0,e/r-1))/n+1),z(i,e/2,t*2)}function df(r,t,e,i){return t=t!==void 0?t:!0,function(n,s,o,a){if(n!==void 0){let l=r[0],h=r[r.length-1],c=e?nh(l,e,o,i):l;if(a)return t?rh(n,c,h):z(n,h,c);let u=Math.min(c,n),d=Math.floor(hn(r,u,s));return r[d]>c&&d<r.length-1?r[d+1]:r[d]}else return}}function ff(r,t,e,i,n,s){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(o,a,l,h){if(o!==void 0){let c=n?nh(t,n,l,s):t;if(h)return i?rh(o,c,e):z(o,e,c);let u=1e-9,d=Math.ceil(Math.log(t/c)/Math.log(r)-u),m=-a*(.5-u)+.5,p=Math.min(c,o),x=Math.floor(Math.log(t/p)/Math.log(r)+m),f=Math.max(d,x),g=t/Math.pow(r,f);return z(g,e,c)}else return}}function sh(r,t,e,i,n){return e=e!==void 0?e:!0,function(s,o,a,l){if(s!==void 0){let h=i?nh(r,i,a,n):r;return!e||!l?z(s,t,h):rh(s,h,t)}else return}}var gf=R(()=>{lt();$();mt()});function jn(r){if(r!==void 0)return 0}function oh(r){if(r!==void 0)return r}function mf(r){let t=2*Math.PI/r;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function pf(r){return r=r||Wt(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=r?0:t}}var Eo=R(()=>{lt()});function Co(r,t){setTimeout(function(){r(t)},0)}function Hm(r){if(r.extent!==void 0){let e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return ih(r.extent,r.constrainOnlyCenter,e)}let t=pr(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){let e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,ih(e,!1,!1)}return cf}function qm(r){let t,e,i,o=r.minZoom!==void 0?r.minZoom:ah,a=r.maxZoom!==void 0?r.maxZoom:28,l=r.zoomFactor!==void 0?r.zoomFactor:2,h=r.multiWorld!==void 0?r.multiWorld:!1,c=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,u=r.showFullExtent!==void 0?r.showFullExtent:!1,d=pr(r.projection,"EPSG:3857"),m=d.getExtent(),p=r.constrainOnlyCenter,x=r.extent;if(!h&&!x&&d.isGlobal()&&(p=!1,x=m),r.resolutions!==void 0){let f=r.resolutions;e=f[o],i=f[a]!==void 0?f[a]:f[f.length-1],r.constrainResolution?t=df(f,c,!p&&x,u):t=sh(e,i,c,!p&&x,u)}else{let g=(m?Math.max(H(m),yt(m)):360*Xt.degrees/d.getMetersPerUnit())/256/Math.pow(2,ah),_=g/Math.pow(2,28-ah);e=r.maxResolution,e!==void 0?o=0:e=g/Math.pow(l,o),i=r.minResolution,i===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?i=e/Math.pow(l,a):i=g/Math.pow(l,a):i=_),a=o+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,a-o),r.constrainResolution?t=ff(l,e,i,c,!p&&x,u):t=sh(e,i,c,!p&&x,u)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:o,zoomFactor:l}}function Jm(r){if(r.enableRotation!==void 0?r.enableRotation:!0){let e=r.constrainRotation;return e===void 0||e===!0?pf():e===!1?oh:typeof e=="number"?mf(e):oh}else return jn}function $m(r){return!(r.sourceCenter&&r.targetCenter&&!Fi(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function lh(r,t,e,i,n){let s=Math.cos(-n),o=Math.sin(-n),a=r[0]*s-r[1]*o,l=r[1]*s+r[0]*o;a+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,o=-o;let h=a*s-l*o,c=l*s+a*o;return[h,c]}var ah,hh,de,ch=R(()=>{Ft();ao();hf();Et();At();fi();_t();uf();lt();gf();Eo();Ii();$();mt();Us();ah=0,hh=class extends it{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=pr(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Os(),t.center&&(t.center=re(t.center,this.projection_)),t.extent&&(t.extent=se(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){let e=Object.assign({},t);for(let a in ue)delete e[a];this.setProperties(e,!0);let i=qm(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;let n=Hm(t),s=i.constraint,o=Jm(t);this.constraints_={center:n,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;let i=this.getCenter();if(i){let n=t||[0,0,0,0];e=e||[0,0,0,0];let s=this.getResolution(),o=s/2*(n[3]-e[3]+e[1]-n[1]),a=s/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){let e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let e=new Array(arguments.length);for(let i=0;i<e.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=re(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=re(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let n=0;for(;n<e&&!this.isDef();++n){let c=arguments[n];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(n===e){i&&Co(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,h=[];for(;n<e;++n){let c=arguments[n],u={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||Jd,callback:i};if(c.center&&(u.sourceCenter=o,u.targetCenter=c.center.slice(),o=u.targetCenter),c.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(c.zoom),a=u.targetResolution):c.resolution&&(u.sourceResolution=a,u.targetResolution=c.resolution,a=u.targetResolution),c.rotation!==void 0){u.sourceRotation=l;let d=qt(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}$m(u)?u.complete=!0:s+=u.duration,h.push(u)}this.animations_.push(h),this.setHint(Tt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Tt.ANIMATING]>0}getInteracting(){return this.hints_[Tt.INTERACTING]>0}cancelAnimations(){this.setHint(Tt.ANIMATING,-this.hints_[Tt.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){let n=this.animations_[e];if(n[0].callback&&Co(n[0].callback,!1),!t)for(let s=0,o=n.length;s<o;++s){let a=n[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let t=Date.now(),e=!1;for(let i=this.animations_.length-1;i>=0;--i){let n=this.animations_[i],s=!0;for(let o=0,a=n.length;o<a;++o){let l=n[o];if(l.complete)continue;let h=t-l.start,c=l.duration>0?h/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;let u=l.easing(c);if(l.sourceCenter){let d=l.sourceCenter[0],m=l.sourceCenter[1],p=l.targetCenter[0],x=l.targetCenter[1];this.nextCenter_=l.targetCenter;let f=d+u*(p-d),g=m+u*(x-m);this.targetCenter_=[f,g]}if(l.sourceResolution&&l.targetResolution){let d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){let m=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,m,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){let d=u===1?qt(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){let m=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(m,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Tt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let o=n[0].callback;o&&Co(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i,n=this.getCenterInternal();return n!==void 0&&(i=[n[0]-e[0],n[1]-e[1]],In(i,t-this.getRotation()),Uc(i,e)),i}calculateCenterZoom(t,e){let i,n=this.getCenterInternal(),s=this.getResolution();if(n!==void 0&&s!==void 0){let o=e[0]-t*(e[0]-n[0])/s,a=e[1]-t*(e[1]-n[1])/s;i=[o,a]}return i}getViewportSize_(t){let e=this.viewportSize_;if(t){let i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}else return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let t=this.getCenterInternal();return t&&Ln(t,this.getProjection())}getCenterInternal(){return this.get(ue.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){let e=this.calculateExtentInternal(t);return Gi(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();let e=this.getCenterInternal();W(e,1);let i=this.getResolution();W(i!==void 0,2);let n=this.getRotation();return W(n!==void 0,3),ar(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ue.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(se(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();let i=H(t)/e[0],n=yt(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;let e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(s){return e/Math.pow(t,s*n)}}getRotation(){return this.get(ue.ROTATION)}getValueForResolutionFunction(t){let e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/e;return function(o){return Math.log(i/o)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t),i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){let t=this.getProjection(),e=this.getResolution(),i=this.getRotation(),n=this.getCenterInternal(),s=this.padding_;if(s){let o=this.getViewportSizeMinusPadding_();n=lh(n,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let t,e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,n;if(this.resolutions_){let s=hn(this.resolutions_,t,1);e=s,i=this.resolutions_[s],s==this.resolutions_.length-1?n=2:n=i/this.resolutions_[s+1]}else i=this.maxResolution_,n=this.zoomFactor_;return e+Math.log(i/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let e=z(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,z(t-e,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(W(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){W(!Pi(t),25);let n=se(t,this.getProjection());i=Sa(n)}else if(t.getType()==="Circle"){let n=se(t.getExtent(),this.getProjection());i=Sa(n),i.rotate(this.getRotation(),Gt(n))}else{let n=Ni();n?i=t.clone().transform(n,this.getProjection()):i=t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){let e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride(),a=1/0,l=1/0,h=-1/0,c=-1/0;for(let u=0,d=s.length;u<d;u+=o){let m=s[u]*i-s[u+1]*n,p=s[u]*n+s[u+1]*i;a=Math.min(a,m),l=Math.min(l,p),h=Math.max(h,m),c=Math.max(c,p)}return[a,l,h,c]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());let n=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1,o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;let a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);let h=this.getRotation(),c=Math.sin(h),u=Math.cos(h),d=Gt(a);d[0]+=(n[1]-n[3])/2*l,d[1]+=(n[0]-n[2])/2*l;let m=d[0]*u-d[1]*c,p=d[1]*u+d[0]*c,x=this.getConstrainedCenter([m,p],l),f=e.callback?e.callback:Vt;e.duration!==void 0?this.animateInternal({resolution:l,center:x,duration:e.duration,easing:e.easing},f):(this.targetResolution_=l,this.targetCenter_=x,this.applyTargetState_(!1,!0),Co(f,!0))}centerOn(t,e,i){this.centerOnInternal(re(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(lh(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s,o=this.padding_;if(o&&t){let a=this.getViewportSizeMinusPadding_(-i),l=lh(t,n,[a[0]/2+o[3],a[1]/2+o[0]],e,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){let e=Ln(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){let e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&re(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){let i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=re(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){let i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&re(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){let i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,n,s));this.get(ue.ROTATION)!==n&&this.set(ue.ROTATION,n),this.get(ue.RESOLUTION)!==o&&(this.set(ue.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ue.CENTER)||!Fi(this.get(ue.CENTER),a))&&this.set(ue.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;let n=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,n,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Fi(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:le,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Tt.INTERACTING,1)}endInteraction(t,e,i){i=i&&re(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.setHint(Tt.INTERACTING,-1),this.resolveConstraints(t,e,i)}getConstrainedCenter(t,e){let i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){let i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;let i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};de=hh});var xf={};cs(xf,{default:()=>Hi});var uh,Hi,Zr=R(()=>{Ft();xo();At();Zt();It();uh=class extends it{constructor(t){super();let e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Yi(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Yi(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)J(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Vt&&this.listenerKeys.push(j(t,ce.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}},Hi=uh});var dh,yf,Ef=R(()=>{Zr();st();Bi();mt();Vi();It();dh=class extends Hi{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",n=t.expandClassName!==void 0?t.expandClassName:e+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;let a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(F.CLICK,this.handleClick_.bind(this),!1);let h=e+" "+Ci+" "+On+(this.collapsed_&&this.collapsible_?" "+Oa:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){let e={},i=[],n=!0,s=t.layerStatesArray;for(let o=0,a=s.length;o<a;++o){let l=s[o];if(!kn(l,t.viewState))continue;let h=l.layer.getSource();if(!h)continue;let c=h.getAttributions();if(!c)continue;let u=c(t);if(!!u)if(n=n&&h.getAttributionsCollapsible()!==!1,Array.isArray(u))for(let d=0,m=u.length;d<m;++d)u[d]in e||(i.push(u[d]),e[u[d]]=!0);else u in e||(i.push(u),e[u]=!0)}return this.overrideCollapsible_||this.setCollapsible(n),i}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Dt(e,this.renderedAttributions_)){Hs(this.ulElement_);for(let n=0,s=e.length;n<s;++n){let o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Oa),this.collapsed_?Pa(this.collapseLabel_,this.label_):Pa(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},yf=dh});var fh,Cf,Tf=R(()=>{Zr();st();Bi();Ii();fh=class extends Hi{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});let e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"\u21E7",n=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));let s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(F.CLICK,this.handleClick_.bind(this),!1);let a=e+" "+Ci+" "+On,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(br)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let e=this.getMap().getView();if(!e)return;let i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:le}):e.setRotation(0))}render(t){let e=t.frameState;if(!e)return;let i=e.viewState.rotation;if(i!=this.rotation_){let n="rotate("+i+"rad)";if(this.autoHide_){let s=this.element.classList.contains(br);!s&&i===0?this.element.classList.add(br):s&&i!==0&&this.element.classList.remove(br)}this.label_.style.transform=n}this.rotation_=i}},Cf=fh});var gh,Rf,Sf=R(()=>{Zr();st();Bi();Ii();gh=class extends Hi{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});let e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,n=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=n,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(F.CLICK,this.handleClick_.bind(this,i),!1);let u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=h,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(F.CLICK,this.handleClick_.bind(this,-i),!1);let d=e+" "+Ci+" "+On,m=this.element;m.className=d,m.appendChild(c),m.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){let i=this.getMap().getView();if(!i)return;let n=i.getZoom();if(n!==void 0){let s=i.getConstrainedZoom(n+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:le})):i.setZoom(s)}}},Rf=gh});function If(r){r=r||{};let t=new pt;return(r.zoom!==void 0?r.zoom:!0)&&t.push(new Rf(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&t.push(new Cf(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&t.push(new yf(r.attributionOptions)),t}var Lf=R(()=>{Ef();ci();Tf();Sf()});var mh,vf=R(()=>{mh={ACTIVE:"active"}});function wf(r,t,e){let i=r.getCenterInternal();if(i){let n=[i[0]+t[0],i[1]+t[1]];r.animateInternal({duration:e!==void 0?e:250,easing:$d,center:r.getConstrainedCenter(n)})}}function Kn(r,t,e,i){let n=r.getZoom();if(n===void 0)return;let s=r.getConstrainedZoom(n+t),o=r.getResolutionForZoom(s);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:o,anchor:e,duration:i!==void 0?i:250,easing:le})}var ph,ke,Vn=R(()=>{Ft();vf();Ii();ph=class extends it{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(mh.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(mh.ACTIVE,t)}setMap(t){this.map_=t}};ke=ph});var _h,Af,bf=R(()=>{Vn();jr();_h=class extends ke{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==nt.DBLCLICK){let i=t.originalEvent,n=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=n.getView();Kn(a,o,s,this.duration_),i.preventDefault(),e=!0}return!e}},Af=_h});function Zn(r){let t=r.length,e=0,i=0;for(let n=0;n<t;n++)e+=r[n].clientX,i+=r[n].clientY;return[e/t,i/t]}var xh,Ne,Hn=R(()=>{Vn();jr();xh=class extends ke{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==nt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==nt.POINTERUP){let i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==nt.POINTERDOWN){let i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==nt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};Ne=xh});function Hr(r){let t=arguments;return function(e){let i=!0;for(let n=0,s=t.length;n<s&&(i=i&&t[n](e),!!i);++n);return i}}var Mf,Qm,To,Pf,Ro,So,Of,Io,Lo,Df,Li=R(()=>{At();je();_t();Mf=function(r){let t=r.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Qm=function(r){let t=r.map.getTargetElement(),e=r.map.getOwnerDocument().activeElement;return t.contains(e)},To=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?Qm(r):!0},Pf=Ye,Ro=function(r){let t=r.originalEvent;return t.button==0&&!(mc&&pc&&t.ctrlKey)},So=function(r){let t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Of=function(r){let t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Io=function(r){let t=r.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Lo=function(r){let t=r.originalEvent;return W(t!==void 0,56),t.pointerType=="mouse"},Df=function(r){let t=r.originalEvent;return W(t!==void 0,56),t.isPrimary&&t.button===0}});var yh,Ff,kf=R(()=>{Hn();At();Li();Ii();fi();yh=class extends Ne{constructor(t){super({stopDown:Be}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let e=t.condition?t.condition:Hr(So,Df);this.condition_=t.onFocusOnly?Hr(To,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());let e=this.targetPointers,i=Zn(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){let n=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=t.map.getView();jc(n,o.getResolution()),In(n,o.getRotation()),o.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){let e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(s),a[1]-n*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:le})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){let i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1}},Ff=yh});var Eh,Nf,Gf=R(()=>{Hn();At();Li();Eo();Eh=class extends Ne{constructor(t){t=t||{},super({stopDown:Be}),this.condition_=t.condition?t.condition:Mf,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Lo(t))return;let e=t.map,i=e.getView();if(i.getConstraints().rotation===jn)return;let n=e.getSize(),s=t.pixel,o=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(this.lastAngle_!==void 0){let a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Lo(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Lo(t)&&Ro(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},Nf=Eh});var Ch,Xf,Wf=R(()=>{nr();Us();Ch=class extends hi{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){let t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Lu([n])}getGeometry(){return this.geometry_}},Xf=Ch});var vo,qr,Th,zf,Yf=R(()=>{ge();Hn();Wf();Li();vo={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},qr=class extends dt{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}},Th=class extends Ne{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Xf(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Ro,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){let n=i[0]-e[0],s=i[1]-e[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new qr(vo.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);let e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new qr(e?vo.BOXEND:vo.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new qr(vo.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}},zf=Th});var Rh,Bf,Uf=R(()=>{Yf();Ii();Li();Rh=class extends zf{constructor(t){t=t||{};let e=t.condition?t.condition:Of;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){let i=this.getMap().getView(),n=this.getGeometry();if(this.out_){let s=i.rotatedExtentForGeometry(n),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;n=n.clone(),n.scale(a*a)}i.fitInternal(n,{duration:this.duration_,easing:le})}},Bf=Rh});var vi,jf=R(()=>{vi={LEFT:37,UP:38,RIGHT:39,DOWN:40}});var Sh,Kf,Vf=R(()=>{st();Vn();jf();Li();fi();Sh=class extends ke{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return So(e)&&Io(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==F.KEYDOWN){let i=t.originalEvent,n=i.keyCode;if(this.condition_(t)&&(n==vi.DOWN||n==vi.LEFT||n==vi.RIGHT||n==vi.UP)){let o=t.map.getView(),a=o.getResolution()*this.pixelDelta_,l=0,h=0;n==vi.DOWN?h=-a:n==vi.LEFT?l=-a:n==vi.RIGHT?l=a:h=a;let c=[l,h];In(c,o.getRotation()),wf(o,c,this.duration_),i.preventDefault(),e=!0}}return!e}},Kf=Sh});var Ih,Zf,Hf=R(()=>{st();Vn();Li();Ih=class extends ke{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:Io,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==F.KEYDOWN||t.type==F.KEYPRESS){let i=t.originalEvent,n=i.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){let s=t.map,o=n=="+".charCodeAt(0)?this.delta_:-this.delta_,a=s.getView();Kn(a,o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},Zf=Ih});var Lh,qf,Jf=R(()=>{st();Vn();je();Li();lt();Lh=class extends ke{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;let e=t.condition?t.condition:Pf;this.condition_=t.onFocusOnly?Hr(To,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==F.WHEEL)return!0;let i=t.map,n=t.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==F.WHEEL&&(s=n.deltaY,gc&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=_s),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;let o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");let a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;let l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){let e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-z(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Kn(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},qf=Lh});var vh,$f,Qf=R(()=>{Hn();At();Eo();vh=class extends Ne{constructor(t){t=t||{};let e=t;e.stopDown||(e.stopDown=Be),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0,i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(this.lastAngle_!==void 0){let c=s-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=c}this.lastAngle_=s;let o=t.map,a=o.getView();if(a.getConstraints().rotation===jn)return;let l=o.getViewport().getBoundingClientRect(),h=Zn(this.targetPointers);h[0]-=l.left,h[1]-=l.top,this.anchor_=o.getCoordinateFromPixelInternal(h),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}},$f=vh});var wh,tg,eg=R(()=>{Hn();At();wh=class extends Ne{constructor(t){t=t||{};let e=t;e.stopDown||(e.stopDown=Be),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1,i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,o=i.clientY-n.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;let l=t.map,h=l.getView();e!=1&&(this.lastScaleDelta_=e);let c=l.getViewport().getBoundingClientRect(),u=Zn(this.targetPointers);u[0]-=c.left,u[1]-=c.top,this.anchor_=l.getCoordinateFromPixelInternal(u),l.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){let i=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}else return!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}},tg=wh});function ig(r){r=r||{};let t=new pt,e=new go(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&t.push(new Nf),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&t.push(new Af({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&t.push(new Ff({onFocusOnly:r.onFocusOnly,kinetic:e})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&t.push(new $f),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&t.push(new tg({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(t.push(new Kf),t.push(new Zf({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&t.push(new qf({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&t.push(new Bf({duration:r.zoomDuration})),t}var ng=R(()=>{ci();bf();kf();Gf();Uf();Vf();Hf();Ul();Jf();Qf();eg()});function rg(r){if(r instanceof Ki){r.setMapInternal(null);return}r instanceof Ur&&r.getLayers().forEach(rg)}function sg(r,t){if(r instanceof Ki){r.setMapInternal(t);return}if(r instanceof Ur){let e=r.getLayers().getArray();for(let i=0,n=e.length;i<n;++i)sg(e[i],t)}}function tp(r){let t=null;r.keyboardEventTarget!==void 0&&(t=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);let e={},i=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Ur({layers:r.layers});e[Lt.LAYERGROUP]=i,e[Lt.TARGET]=r.target,e[Lt.VIEW]=r.view instanceof de?r.view:new de;let n;r.controls!==void 0&&(Array.isArray(r.controls)?n=new pt(r.controls.slice()):(W(typeof r.controls.getArray=="function",47),n=r.controls));let s;r.interactions!==void 0&&(Array.isArray(r.interactions)?s=new pt(r.interactions.slice()):(W(typeof r.interactions.getArray=="function",48),s=r.interactions));let o;return r.overlays!==void 0?Array.isArray(r.overlays)?o=new pt(r.overlays.slice()):(W(typeof r.overlays.getArray=="function",49),o=r.overlays):o=new pt,{controls:n,interactions:s,keyboardEventTarget:t,overlays:o,values:e}}var Ah,wo,og=R(()=>{Ft();ci();rr();nf();st();Vi();rf();po();$l();jr();mo();xo();sf();ln();ql();bn();eh();ch();ao();je();At();_e();_t();$();Lf();ng();Et();ot();Ei();Zt();It();Ah=class extends it{constructor(t){super(),t=t||{},this.on,this.once,this.un;let e=tp(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:_s,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=St(),this.pixelToCoordinateTransform_=St(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||If(),this.interactions=e.interactions||ig({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new yo(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Lt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Lt.VIEW,this.handleViewChanged_),this.addChangeListener(Lt.SIZE,this.handleSizeChanged_),this.addChangeListener(Lt.TARGET,this.handleTargetChanged_),this.setProperties(e.values);let i=this;t.view&&!(t.view instanceof de)&&t.view.then(function(n){i.setView(new de(n))}),this.controls.addEventListener(Rt.ADD,function(n){n.element.setMap(this)}.bind(this)),this.controls.addEventListener(Rt.REMOVE,function(n){n.element.setMap(null)}.bind(this)),this.interactions.addEventListener(Rt.ADD,function(n){n.element.setMap(this)}.bind(this)),this.interactions.addEventListener(Rt.REMOVE,function(n){n.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(Rt.ADD,function(n){this.addOverlayInternal_(n.element)}.bind(this)),this.overlays_.addEventListener(Rt.REMOVE,function(n){let s=n.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],n.element.setMap(null)}.bind(this)),this.controls.forEach(function(n){n.setMap(this)}.bind(this)),this.interactions.forEach(function(n){n.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){sg(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){let e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;let n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};let s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:Ye,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,a,e,null,o,null)}getFeaturesAtPixel(t,e){let i=[];return this.forEachFeatureAtPixel(t,function(n){i.push(n)},e),i}getAllLayers(){let t=[];function e(i){i.forEach(function(n){n instanceof Ur?e(n.getLayers()):t.push(n)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;let i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};let n=e.layerFilter!==void 0?e.layerFilter:Ye,s=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){let e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]}getTarget(){return this.get(Lt.TARGET)}getTargetElement(){let t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null}getCoordinateFromPixel(t){return Ln(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){let e=this.frameState_;return e?ht(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){let e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Lt.LAYERGROUP)}setLayers(t){let e=this.getLayerGroup();if(t instanceof pt){e.setLayers(t);return}let i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){let n=t[e];if(!n.visible)continue;let s=n.layer.getRenderer();if(s&&!s.ready)return!0;let o=n.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){let e=re(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){let e=this.frameState_;return e?ht(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Lt.SIZE)}getView(){return this.get(Lt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return lf(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;let i=new he(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;let e=t.originalEvent,i=e.type;if(i===Kr.POINTERDOWN||i===F.WHEEL||i===F.KEYDOWN){let n=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===n?n.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){let n=this.getInteractions().getArray().slice();for(let s=n.length-1;s>=0;s--){let o=n[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){let t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,s=n;if(t){let o=t.viewHints;if(o[Tt.ANIMATING]||o[Tt.INTERACTING]){let a=Date.now()-t.time>8;n=a?0:8,s=a?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Yt.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Yt.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Fe(ce.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Fe(ce.LOADSTART,this,t))));let i=this.postRenderFunctions_;for(let n=0,s=i.length;n<s;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,i=this.targetChangeHandlerKeys_.length;e<i;++e)J(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(F.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(F.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Yi(this.viewport_)}let t=this.getTargetElement();if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new ef(this)),this.mapBrowserEventHandler_=new _o(this,this.moveTolerance_);for(let n in nt)this.mapBrowserEventHandler_.addEventListener(nt[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(F.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(F.WHEEL,this.boundHandleBrowserEvent_,xs?{passive:!1}:!1);let e=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[j(i,F.KEYDOWN,this.handleBrowserEvent,this),j(i,F.KEYPRESS,this.handleBrowserEvent,this),j(e,F.RESIZE,this.updateSize,this)]}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(J(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(J(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=j(t,me.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=j(t,F.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(J),this.layerGroupPropertyListenerKeys_=null);let t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Te("addlayer",t)),this.layerGroupPropertyListenerKeys_=[j(t,me.PROPERTYCHANGE,this.render,this),j(t,F.CHANGE,this.render,this),j(t,"addlayer",this.handleLayerAdd_,this),j(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){let n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){rg(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){let e=this.getSize(),i=this.getView(),n=this.frameState_,s=null;if(e!==void 0&&Aa(e)&&i&&i.isDef()){let o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ar(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:U(this),renderTargets:{}},a.nextCenter&&a.nextResolution){let l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=ar(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!Pi(this.previousExtent_)&&!xe(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Fe(ce.MOVESTART,this,n)),this.previousExtent_=yn(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Tt.ANIMATING]&&!s.viewHints[Tt.INTERACTING]&&!xe(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Fe(ce.MOVEEND,this,s)),Cs(s.extent,this.previousExtent_))),this.dispatchEvent(new Fe(ce.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(ce.LOADSTART)||this.hasListener(ce.LOADEND)||this.hasListener(Yt.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){let e=this.getLayerGroup();e&&this.handleLayerRemove_(new Te("removelayer",e)),this.set(Lt.LAYERGROUP,t)}setSize(t){this.set(Lt.SIZE,t)}setTarget(t){this.set(Lt.TARGET,t)}setView(t){if(!t||t instanceof de){this.set(Lt.VIEW,t);return}this.set(Lt.VIEW,new de);let e=this;t.then(function(i){e.setView(new de(i))})}updateSize(){let t=this.getTargetElement(),e;if(t){let i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(n)&&!isNaN(s)&&(e=[n,s],!Aa(e)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){let t=this.getView();if(t){let e,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}};wo=Ah});var vt,bh,ag,lg=R(()=>{Ft();xo();Bi();$();Zt();It();vt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},bh=class extends it{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+Wu,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(vt.ELEMENT,this.handleElementChanged),this.addChangeListener(vt.MAP,this.handleMapChanged),this.addChangeListener(vt.OFFSET,this.handleOffsetChanged),this.addChangeListener(vt.POSITION,this.handlePositionChanged),this.addChangeListener(vt.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(vt.ELEMENT)}getId(){return this.id}getMap(){return this.get(vt.MAP)||null}getOffset(){return this.get(vt.OFFSET)}getPosition(){return this.get(vt.POSITION)}getPositioning(){return this.get(vt.POSITIONING)}handleElementChanged(){Hs(this.element);let t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Yi(this.element),J(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let t=this.getMap();if(t){this.mapPostrenderListenerKey=j(t,ce.POSTRENDER,this.render,this),this.updatePixelPosition();let e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(vt.ELEMENT,t)}setMap(t){this.set(vt.MAP,t)}setOffset(t){this.set(vt.OFFSET,t)}setPosition(t){this.set(vt.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){let e=this.getMap();if(!e||!e.getTargetElement()||!this.get(vt.POSITION))return;let i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),s=this.getRect(n,[ku(n),Nu(n)]);t=t||{};let o=t.margin===void 0?20:t.margin;if(!kt(i,s)){let a=s[0]-i[0],l=i[2]-s[2],h=s[1]-i[1],c=i[3]-s[3],u=[0,0];if(a<0?u[0]=a-o:l<0&&(u[0]=Math.abs(l)+o),h<0?u[1]=h-o:c<0&&(u[1]=Math.abs(c)+o),u[0]!==0||u[1]!==0){let d=e.getView().getCenterInternal(),m=e.getPixelFromCoordinateInternal(d);if(!m)return;let p=[m[0]+u[0],m[1]+u[1]],x=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(p),duration:x.duration,easing:x.easing})}}}getRect(t,e){let i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+e[0],s+e[1]]}setPositioning(t){this.set(vt.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){let t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}let i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(t,e){let i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",l="0%",h="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?h="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(h="-50%");let c=`translate(${l}, ${h}) translate(${o}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,i.transform=c)}getOptions(){return this.options}},ag=bh});var Mh,hg,cg=R(()=>{_t();Mh=class{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){let i=this.entries_[t];return W(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){let e=this.entries_[t];return W(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){let t=new Array(this.count_),e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){let t=new Array(this.count_),e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(!!this.containsKey(t))return this.entries_[t].value_}pop(){let t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){W(!(t in this.entries_),16);let i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}},hg=Mh});function Ph(r,t,e,i){return i!==void 0?(i[0]=r,i[1]=t,i[2]=e,i):[r,t,e]}function qi(r,t,e){return r+"/"+t+"/"+e}function Ao(r){return qi(r[0],r[1],r[2])}function ug(r){return r.split("/").map(Number)}function dg(r){return(r[1]<<r[0])+r[2]}function fg(r,t){let e=r[0],i=r[1],n=r[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;let s=t.getFullTileRange(e);return s?s.containsXY(i,n):!0}var Ji=R(()=>{});var Oh,qn,bo=R(()=>{cg();Ji();Oh=class extends hg{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let t=this.peekFirstKey(),i=ug(t)[0];this.forEach(function(n){n.tileCoord[0]!==i&&(this.remove(Ao(n.tileCoord)),n.release())}.bind(this))}},qn=Oh});function $i(r,t,e,i,n){return n!==void 0?(n.minX=r,n.maxX=t,n.minY=e,n.maxY=i,n):new Mo(r,t,e,i)}var Mo,Jn,Po=R(()=>{Mo=class{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}};Jn=Mo});var gg,Dh,mg,pg=R(()=>{Bn();It();ot();gg=[],Dh=class extends De{constructor(t,e,i,n){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){let e=U(t);return e in this.context_||(this.context_[e]=ct(1,1,gg)),this.context_[e]}hasContext(t){return U(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){let e=U(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(let t in this.context_){let e=this.context_[t];Pn(e),gg.push(e.canvas),delete this.context_[t]}super.release()}},mg=Dh});var Fh,_g,xg=R(()=>{Bn();Oe();Fh=class extends De{constructor(t,e,i,n,s,o){super(t,e,o),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==k.IDLE&&(this.setState(k.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(k.ERROR)}setFeatures(t){this.features_=t,this.setState(k.LOADED)}setLoader(t){this.loader_=t}},_g=Fh});var yg={};cs(yg,{AssertionError:()=>an,Collection:()=>pt,Disposable:()=>hi,Feature:()=>ps,Geolocation:()=>wu,Graticule:()=>Vd,Image:()=>Hu,ImageBase:()=>Gn,ImageCanvas:()=>Hd,ImageTile:()=>Un,Kinetic:()=>go,Map:()=>wo,MapBrowserEvent:()=>he,MapBrowserEventHandler:()=>_o,MapEvent:()=>Fe,Object:()=>it,Observable:()=>fn,Overlay:()=>ag,Tile:()=>De,TileCache:()=>qn,TileQueue:()=>yo,TileRange:()=>Jn,VERSION:()=>dc,VectorRenderTile:()=>mg,VectorTile:()=>_g,View:()=>de,getUid:()=>U});var kh=R(()=>{fs();ci();nr();Zo();Au();Zd();no();io();qd();fo();Ul();og();po();$l();mo();Ft();gs();lg();Bn();bo();eh();Po();pg();xg();ch();ot()});var Qh=oc((No,Ng)=>{(function(r,t){typeof No=="object"&&typeof Ng<"u"?t(No,(Zr(),ds(xf)),(Et(),ds(eu)),(Ps(),ds(Zc)),(kh(),ds(yg))):typeof define=="function"&&define.amd?define(["exports","ol/control/Control","ol/proj","ol/sphere","ol"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r["ol-print-layout-control"]={},r.ol.control.Control,r.ol.proj,r.ol.sphere,r.ol))})(No,function(r,t,e,i,n){"use strict";var s=Object.defineProperty,o=(L,T,I)=>T in L?s(L,T,{enumerable:!0,configurable:!0,writable:!0,value:I}):L[T]=I,a=(L,T,I)=>(o(L,typeof T!="symbol"?T+"":T,I),I);let l=(L=>L&&typeof L=="object"&&"default"in L?L:{default:L})(t),h="";class c{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}let u=c;class d{constructor(T){this.propagationStopped,this.defaultPrevented,this.type=T,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let m=d;function p(){}function x(L){for(let T in L)delete L[T]}class f extends u{constructor(T){super(),this.eventTarget_=T,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(T,I){if(!T||!I)return;let A=this.listeners_||(this.listeners_={}),P=A[T]||(A[T]=[]);P.includes(I)||P.push(I)}dispatchEvent(T){let I=typeof T=="string",A=I?T:T.type,P=this.listeners_&&this.listeners_[A];if(!P)return;let Y=I?new m(T):T;Y.target||(Y.target=this.eventTarget_||this);let w=this.dispatching_||(this.dispatching_={}),rt=this.pendingRemovals_||(this.pendingRemovals_={});A in w||(w[A]=0,rt[A]=0),++w[A];let V;for(let Z=0,Jt=P.length;Z<Jt;++Z)if("handleEvent"in P[Z]?V=P[Z].handleEvent(Y):V=P[Z].call(this,Y),V===!1||Y.propagationStopped){V=!1;break}if(--w[A]===0){let Z=rt[A];for(delete rt[A];Z--;)this.removeEventListener(A,p);delete w[A]}return V}disposeInternal(){this.listeners_&&x(this.listeners_)}getListeners(T){return this.listeners_&&this.listeners_[T]||void 0}hasListener(T){return this.listeners_?T?T in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(T,I){let A=this.listeners_&&this.listeners_[T];if(A){let P=A.indexOf(I);P!==-1&&(this.pendingRemovals_&&T in this.pendingRemovals_?(A[P]=p,++this.pendingRemovals_[T]):(A.splice(P,1),A.length===0&&delete this.listeners_[T]))}}}let g=f,_={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function y(L,T,I,A,P){if(A&&A!==L&&(I=I.bind(A)),P){let w=I;I=function(){L.removeEventListener(T,I),w.apply(this,arguments)}}let Y={target:L,type:T,listener:I};return L.addEventListener(T,I),Y}function E(L,T,I,A){return y(L,T,I,A,!0)}function C(L){L&&L.target&&(L.target.removeEventListener(L.type,L.listener),x(L))}class S extends g{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(_.CHANGE)}getRevision(){return this.revision_}onInternal(T,I){if(Array.isArray(T)){let A=T.length,P=new Array(A);for(let Y=0;Y<A;++Y)P[Y]=y(this,T[Y],I);return P}else return y(this,T,I)}onceInternal(T,I){let A;if(Array.isArray(T)){let P=T.length;A=new Array(P);for(let Y=0;Y<P;++Y)A[Y]=E(this,T[Y],I)}else A=E(this,T,I);return I.ol_key=A,A}unInternal(T,I){let A=I.ol_key;if(A)v(A);else if(Array.isArray(T))for(let P=0,Y=T.length;P<Y;++P)this.removeEventListener(T[P],I);else this.removeEventListener(T,I)}}S.prototype.on,S.prototype.once,S.prototype.un;function v(L){if(Array.isArray(L))for(let T=0,I=L.length;T<I;++T)C(L[T]);else C(L)}class b extends m{constructor(T,I,A){super(T),this.key=I,this.oldValue=A}}var M=(L=>(L.PORTRAIT="portrait",L.LANDSCAPE="landscape",L))(M||{});let O={A4:"A4",A3:"A3",A2:"A2",A1:"A1",A0:"A0",LETTER:"LETTER",TABLOID:"TABLOID",BROADSHEET:"BROADSHEET"},D=25.4,G={A4:{short:210,long:297},A3:{short:297,long:420},A2:{short:420,long:594},A1:{short:594,long:841},A0:{short:841,long:1189},LETTER:{short:8.5*D,long:11*D},TABLOID:{short:11*D,long:17*D},BROADSHEET:{short:17*D,long:22*D}},N={BBOX:"bbox",FORMAT:"format",ORIENTATION:"orientation",MARGIN:"margin"};class tt extends l.default{constructor(T={}){let{format:I=O.A4,orientation:A="portrait",margin:P={top:2,bottom:2,left:2,right:2}}=T,{element:Y,printArea:w}=rt();super({element:Y,render:V=>{this.onRender(V)}}),a(this,"printArea"),a(this,"evtKeyMarginChange"),a(this,"_map"),this.printArea=w,this.set(N.ORIENTATION,A),this.set(N.FORMAT,I),this.setMargin(new B(P)),this.set(N.BBOX,null);function rt(){let V=document.createElement("div");V.className="paper-format";let Z=document.createElement("div");return Z.className="print-area",Z.id="print-area",V.appendChild(Z),{element:V,printArea:Z}}}getOrientation(){return this.get(N.ORIENTATION)}setOrientation(T){if(T.toUpperCase()in M)this.set(N.ORIENTATION,T),this.setElementSize(),this.getMap()&&(this.getMap().renderSync(),this.handleBboxChange()),this.changed();else throw new Error(`orientation must be one of: ${Object.values(M)}`)}getFormat(){return this.get(N.FORMAT)}setFormat(T){if(T.toUpperCase()in O)this.set(N.FORMAT,T.toUpperCase()),this.setElementSize(),this.getMap()&&(this.getMap().renderSync(),this.handleBboxChange()),this.changed();else throw new Error(`format must be on of: ${Object.values(O)}`)}getMargin(){return this.get(N.MARGIN)}setMargin(T){this.evtKeyMarginChange&&v(this.evtKeyMarginChange),this.evtKeyMarginChange=T.on("propertychange",()=>{this.setElementSize(),this.getMap()&&(this.getMap().renderSync(),this.handleBboxChange()),this.hasListener("change:margin")&&this.dispatchEvent(new b("change:margin",N.MARGIN,null)),this.hasListener("propertychange")&&this.dispatchEvent(new b("propertychange",N.MARGIN,null)),this.changed()}),this.set(N.MARGIN,T),this.setElementSize(),this.getMap()&&(this.getMap().renderSync(),this.handleBboxChange()),this.changed()}getBbox(){return this.getMap()?(this.getMap().renderSync(),this.get("bbox")):null}getBboxAsLonLat(){return this.getBbox()?e.transformExtent(this.getBbox(),"EPSG:3857","EPSG:4326"):null}computeBbox(){if(!this.getMap())return null;let{left:T,top:I,right:A,bottom:P}=this.printArea.getBoundingClientRect(),{x:Y,y:w}=this.getMap().getViewport().getBoundingClientRect(),rt=T-Y,V=I-w,Z=A-Y,Jt=P-w,$t=this.getMap().getCoordinateFromPixel([rt,Jt]),gt=this.getMap().getCoordinateFromPixel([Z,V]);return[...$t,...gt]}getScaleDenominator(){if(this.getBboxAsLonLat()==null)return null;let T=this.getBboxAsLonLat(),I=T.slice(0,2),A=T.slice(2,4),P=i.getDistance(I,A),{width:Y}=this.getPrintBoxSizeInMM(),w=Y/1e3;return P/w}getPrintBoxSizeInDots(T=192){let{width:I,height:A}=this.getPrintBoxSizeInMM(),P=I/D,Y=A/D;return{width:Math.round(P*T),height:Math.round(Y*T)}}getPrintBoxSizeInMM(){let{short:T,long:I}=G[this.getFormat()],A=(this.getMargin().getLeft()+this.getMargin().getRight())*10,P=(this.getMargin().getTop()+this.getMargin().getBottom())*10;return this.getOrientation()==="portrait"?{width:T-A,height:I-P}:{width:I-A,height:T-P}}getPrintMarginsInPx(){let{width:T,height:I}=this.element.getBoundingClientRect(),{long:A}=G[this.getFormat()],P=this.getOrientation()==="portrait"?I/(A/10):T/(A/10),Y={top:0,bottom:0,left:0,right:0},w=this.getMargin().getProperties(),rt;for(rt in w)Y[rt]=w[rt]*P;return Y}getScreenMapAspectRatio(){var T;if(!((T=this.getMap())!=null&&T.getSize()))return 1;let[I,A]=this.getMap().getSize();return A===0?Number.MAX_SAFE_INTEGER:I/A}getPaperMapAspectRatio(){let{long:T,short:I}=G[this.getFormat()];return this.getOrientation()==="portrait"?I/T:T/I}getRestrictingDimension(){return this.getScreenMapAspectRatio()<this.getPaperMapAspectRatio()?"width":"height"}setElementSize(){this.getRestrictingDimension()==="width"?(this.element.style.height="",this.element.style.width="80%"):(this.element.style.height="80%",this.element.style.width="");let{long:T,short:I}=G[this.getFormat()],A=I/T;this.element.style.aspectRatio=String(this.getOrientation()==="portrait"?A:1/A),this.printArea.style.top=`${this.getPrintMarginsInPx().top}px`,this.printArea.style.bottom=`${this.getPrintMarginsInPx().bottom}px`,this.printArea.style.left=`${this.getPrintMarginsInPx().left}px`,this.printArea.style.right=`${this.getPrintMarginsInPx().right}px`}handleBboxChange(){this.set(N.BBOX,this.computeBbox()),this.changed()}onRender(T){if(!this._map||this._map!==this.getMap()){this._map=this.getMap();let I=this.getMap().getView().on("change",this.handleBboxChange.bind(this)),A=this.getMap().on("change:size",()=>{this.setElementSize(),this.handleBboxChange()});this.getMap().getControls().once("remove",P=>{P.element===this&&(this._map.getView().un("change",I.listener),this._map.un("change:size",A.listener),this._map=null)}),this.setElementSize(),this.set(N.BBOX,this.computeBbox(),!0),this.dispatchEvent("change")}}}class B extends n.Object{constructor(T={}){super();let{top:I=0,bottom:A=0,left:P=0,right:Y=0}=T;this.set("top",I),this.set("bottom",A),this.set("left",P),this.set("right",Y)}getProperties(){return super.getProperties()}getTop(){return this.get("top")}setTop(T){T=Math.max(0,Number(T)),this.set("top",T),this.changed()}getBottom(){return this.get("bottom")}setBottom(T){T=Math.max(0,Number(T)),this.set("bottom",T),this.changed()}getLeft(){return this.get("left")}setLeft(T){T=Math.max(0,Number(T)),this.set("left",T),this.changed()}getRight(){return this.get("right")}setRight(T){T=Math.max(0,Number(T)),this.set("right",T),this.changed()}}window.ol&&window.ol.control&&(window.ol.control.PrintLayout=tt,window.ol.control.PrintLayout.Margin=B,window.PAPER_FORMAT=O,window.ORIENTATION=M),r.Margin=B,r.ORIENTATION=M,r.PAPER_FORMAT=O,r.PrintLayout=tt,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})});kh();El();fo();st();Bn();Oe();$();Et();lt();var ep=10,Eg=.25,Nh=class{constructor(t,e,i,n,s,o){this.sourceProj_=t,this.targetProj_=e;let a={},l=zt(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){let y=_[0]+"/"+_[1];return a[y]||(a[y]=l(_)),a[y]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&H(n)==H(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?H(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?H(this.targetProj_.getExtent()):null;let h=ie(i),c=Tn(i),u=Cn(i),d=En(i),m=this.transformInv_(h),p=this.transformInv_(c),x=this.transformInv_(u),f=this.transformInv_(d),g=ep+(o?Math.max(0,Math.ceil(Math.log2(or(i)/(o*o*256*256)))):0);if(this.addQuad_(h,c,u,d,m,p,x,f,g),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(y,E,C){_=Math.min(_,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(function(y){if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-_>this.sourceWorldWidth_/2){let E=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];E[0][0]-_>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-_>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-_>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);let C=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-C<this.sourceWorldWidth_/2&&(y.source=E)}}.bind(this))}a={}}addTriangle_(t,e,i,n,s,o){this.triangles_.push({source:[n,s,o],target:[t,e,i]})}addQuad_(t,e,i,n,s,o,a,l,h){let c=qo([s,o,a,l]),u=this.sourceWorldWidth_?H(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,m=this.sourceProj_.canWrapX()&&u>.5&&u<1,p=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let f=qo([t,e,i,n]);p=H(f)/this.targetWorldWidth_>Eg||p}!m&&this.sourceProj_.isGlobal()&&u&&(p=u>Eg||p)}if(!p&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!at(c,this.maxSourceExtent_))return;let x=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(h>0)p=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(h>0){if(!p){let f=[(t[0]+i[0])/2,(t[1]+i[1])/2],g=this.transformInv_(f),_;m?_=(qt(s[0],d)+qt(a[0],d))/2-qt(g[0],d):_=(s[0]+a[0])/2-g[0];let y=(s[1]+a[1])/2-g[1];p=_*_+y*y>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){let f=[(e[0]+i[0])/2,(e[1]+i[1])/2],g=this.transformInv_(f),_=[(n[0]+t[0])/2,(n[1]+t[1])/2],y=this.transformInv_(_);this.addQuad_(t,e,f,_,s,o,g,y,h-1),this.addQuad_(_,f,i,n,y,g,a,l,h-1)}else{let f=[(t[0]+e[0])/2,(t[1]+e[1])/2],g=this.transformInv_(f),_=[(i[0]+n[0])/2,(i[1]+n[1])/2],y=this.transformInv_(_);this.addQuad_(t,f,_,n,s,g,y,l,h-1),this.addQuad_(f,e,i,_,g,o,a,y,h-1)}return}}if(m){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(t,i,n,s,a,l),(x&14)==0&&this.addTriangle_(t,i,e,s,a,o),x&&((x&13)==0&&this.addTriangle_(e,n,t,o,l,s),(x&7)==0&&this.addTriangle_(e,n,i,o,l,a))}calculateSourceExtent(){let t=xt();return this.triangles_.forEach(function(e,i,n){let s=e.source;Mi(t,s[0]),Mi(t,s[1]),Mi(t,s[2])}),t}getTriangles(){return this.triangles_}},Cg=Nh;$();It();Et();lt();var Gh,Wh=[];function Tg(r,t,e,i,n){r.beginPath(),r.moveTo(0,0),r.lineTo(t,e),r.lineTo(i,n),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(t,i)+1,Math.max(e,n)),r.restore()}function Xh(r,t){return Math.abs(r[t*4]-210)>2||Math.abs(r[t*4+3]-.75*255)>2}function ip(){if(Gh===void 0){let r=document.createElement("canvas").getContext("2d");r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Tg(r,4,5,4,0),Tg(r,4,5,0,5);let t=r.getImageData(0,0,3,3).data;Gh=Xh(t,0)||Xh(t,4)||Xh(t,8)}return Gh}function Rg(r,t,e,i){let n=ki(e,t,r),s=Fs(t,i,e),o=t.getMetersPerUnit();o!==void 0&&(s*=o);let a=r.getMetersPerUnit();a!==void 0&&(s/=a);let l=r.getExtent();if(!l||Ht(l,n)){let h=Fs(r,s,n)/s;isFinite(h)&&h>0&&(s/=h)}return s}function Sg(r,t,e,i){let n=Gt(e),s=Rg(r,t,n,i);return(!isFinite(s)||s<=0)&&Ts(e,function(o){return s=Rg(r,t,o,i),isFinite(s)&&s>0}),s}function Ig(r,t,e,i,n,s,o,a,l,h,c,u){let d=ct(Math.round(e*r),Math.round(e*t),Wh);if(u||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(e,e);function m(E){return Math.round(E*e)/e}d.globalCompositeOperation="lighter";let p=xt();l.forEach(function(E,C,S){Ic(p,E.extent)});let x=H(p),f=yt(p),g=ct(Math.round(e*x/i),Math.round(e*f/i));u||(g.imageSmoothingEnabled=!1);let _=e/i;l.forEach(function(E,C,S){let v=E.extent[0]-p[0],b=-(E.extent[3]-p[3]),M=H(E.extent),O=yt(E.extent);E.image.width>0&&E.image.height>0&&g.drawImage(E.image,h,h,E.image.width-2*h,E.image.height-2*h,v*_,b*_,M*_,O*_)});let y=ie(o);return a.getTriangles().forEach(function(E,C,S){let v=E.source,b=E.target,M=v[0][0],O=v[0][1],D=v[1][0],G=v[1][1],N=v[2][0],tt=v[2][1],B=m((b[0][0]-y[0])/s),L=m(-(b[0][1]-y[1])/s),T=m((b[1][0]-y[0])/s),I=m(-(b[1][1]-y[1])/s),A=m((b[2][0]-y[0])/s),P=m(-(b[2][1]-y[1])/s),Y=M,w=O;M=0,O=0,D-=Y,G-=w,N-=Y,tt-=w;let rt=[[D,G,0,0,T-B],[N,tt,0,0,A-B],[0,0,D,G,I-L],[0,0,N,tt,P-L]],V=Yc(rt);if(!!V){if(d.save(),d.beginPath(),ip()||!u){d.moveTo(T,I);let Z=4,Jt=B-T,$t=L-I;for(let gt=0;gt<Z;gt++)d.lineTo(T+m((gt+1)*Jt/Z),I+m(gt*$t/(Z-1))),gt!=Z-1&&d.lineTo(T+m((gt+1)*Jt/Z),I+m((gt+1)*$t/(Z-1)));d.lineTo(A,P)}else d.moveTo(T,I),d.lineTo(B,L),d.lineTo(A,P);d.clip(),d.transform(V[0],V[2],V[1],V[3],B,L),d.translate(p[0]-Y,p[3]-w),d.scale(i/e,-i/e),d.drawImage(g.canvas,0,0),d.restore()}}),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(E,C,S){let v=E.target,b=(v[0][0]-y[0])/s,M=-(v[0][1]-y[1])/s,O=(v[1][0]-y[0])/s,D=-(v[1][1]-y[1])/s,G=(v[2][0]-y[0])/s,N=-(v[2][1]-y[1])/s;d.beginPath(),d.moveTo(O,D),d.lineTo(b,M),d.lineTo(G,N),d.closePath(),d.stroke()}),d.restore()),d.canvas}lt();$();Zt();It();var zh=class extends De{constructor(t,e,i,n,s,o,a,l,h,c,u,d){super(s,k.IDLE,{interpolate:!!d}),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let m=n.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent(),x=this.sourceTileGrid_.getExtent(),f=p?Le(m,p):m;if(or(f)===0){this.state=k.EMPTY;return}let g=t.getExtent();g&&(x?x=Le(x,g):x=g);let _=n.getResolution(this.wrappedTileCoord_[0]),y=Sg(t,i,f,_);if(!isFinite(y)||y<=0){this.state=k.EMPTY;return}let E=c!==void 0?c:.5;if(this.triangulation_=new Cg(t,i,f,x,y*E,_),this.triangulation_.getTriangles().length===0){this.state=k.EMPTY;return}this.sourceZ_=e.getZForResolution(y);let C=this.triangulation_.calculateSourceExtent();if(x&&(t.canWrapX()?(C[1]=z(C[1],x[1],x[3]),C[3]=z(C[3],x[1],x[3])):C=Le(C,x)),!or(C))this.state=k.EMPTY;else{let S=e.getTileRangeForExtentAndZ(C,this.sourceZ_);for(let v=S.minX;v<=S.maxX;v++)for(let b=S.minY;b<=S.maxY;b++){let M=h(this.sourceZ_,v,b,a);M&&this.sourceTiles_.push(M)}this.sourceTiles_.length===0&&(this.state=k.EMPTY)}}getImage(){return this.canvas_}reproject_(){let t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==k.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=k.ERROR;else{let e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Ig(n,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=k.LOADED}this.changed()}load(){if(this.state==k.IDLE){this.state=k.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){let s=e.getState();if(s==k.IDLE||s==k.LOADING){t++;let o=j(e,F.CHANGE,function(a){let l=e.getState();(l==k.LOADED||l==k.ERROR||l==k.EMPTY)&&(J(o),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,n){e.getState()==k.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(J),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Pn(this.canvas_.getContext("2d")),Wh.push(this.canvas_),this.canvas_=null),super.release()}},Jr=zh;Po();Oe();_e();$();Et();ot();mt();Ei();var Yh=class extends oo{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=xt(),this.tmpTileRange_=new Jn(0,0,0,0)}isDrawableTile(t){let e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==k.LOADED||i==k.EMPTY||i==k.ERROR&&!n}getTile(t,e,i,n){let s=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),h=a.getSource().getTile(t,e,i,s,o);return h.getState()==k.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(h)||(h=h.getInterimTile()),h}getData(t){let e=this.frameState;if(!e)return null;let i=this.getLayer(),n=ht(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Ht(s,n))return null;let o=e.pixelRatio,a=e.viewState.projection,l=e.viewState,h=i.getRenderSource(),c=h.getTileGridForProjection(l.projection),u=h.getTilePixelRatio(e.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){let m=c.getTileCoordForCoordAndZ(n,d),p=h.getTile(d,m[1],m[2],o,a);if(!(p instanceof Un||p instanceof Jr)||p instanceof Jr&&p.getState()===k.EMPTY)return null;if(p.getState()!==k.LOADED)continue;let x=c.getOrigin(d),f=Ct(c.getTileSize(d)),g=c.getResolution(d),_=Math.floor(u*((n[0]-x[0])/g-m[1]*f[0])),y=Math.floor(u*((x[1]-n[1])/g-m[2]*f[1])),E=Math.round(u*h.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),_+E,y+E)}return null}loadedTileCallback(t,e,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,e,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){let i=t.layerStatesArray[t.layerIndex],n=t.viewState,s=n.projection,o=n.resolution,a=n.center,l=n.rotation,h=t.pixelRatio,c=this.getLayer(),u=c.getSource(),d=u.getRevision(),m=u.getTileGridForProjection(s),p=m.getZForResolution(o,u.zDirection),x=m.getResolution(p),f=t.extent,g=t.viewState.resolution,_=u.getTilePixelRatio(h),y=Math.round(H(f)/g*h),E=Math.round(yt(f)/g*h),C=i.extent&&se(i.extent,s);C&&(f=Le(f,se(i.extent,s)));let S=x*y/2/_,v=x*E/2/_,b=[a[0]-S,a[1]-v,a[0]+S,a[1]+v],M=m.getTileRangeForExtentAndZ(f,p),O={};O[p]={};let D=this.createLoadedTileFinder(u,s,O),G=this.tmpExtent,N=this.tmpTileRange_;this.newTiles_=!1;let tt=l?Rs(n.center,g,l,t.size):void 0;for(let rt=M.minX;rt<=M.maxX;++rt)for(let V=M.minY;V<=M.maxY;++V){if(l&&!m.tileCoordIntersectsViewport([p,rt,V],tt))continue;let Z=this.getTile(p,rt,V,t);if(this.isDrawableTile(Z)){let gt=U(this);if(Z.getState()==k.LOADED){O[p][Z.tileCoord.toString()]=Z;let Ge=Z.inTransition(gt);Ge&&i.opacity!==1&&(Z.endTransition(gt),Ge=!1),!this.newTiles_&&(Ge||!this.renderedTiles.includes(Z))&&(this.newTiles_=!0)}if(Z.getAlpha(gt,t.time)===1)continue}let Jt=m.getTileCoordChildTileRange(Z.tileCoord,N,G),$t=!1;Jt&&($t=D(p+1,Jt)),$t||m.forEachTileCoordParentTileRange(Z.tileCoord,D,N,G)}let B=x/o*h/_;bt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,l,-y/2,-E/2);let L=ys(this.pixelTransform);this.useContainer(e,L,this.getBackground(t));let T=this.context,I=T.canvas;pn(this.inversePixelTransform,this.pixelTransform),bt(this.tempTransform,y/2,E/2,B,B,0,-y/2,-E/2),I.width!=y||I.height!=E?(I.width=y,I.height=E):this.containerReused||T.clearRect(0,0,y,E),C&&this.clipUnrotated(T,t,C),u.getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,t),this.renderedTiles.length=0;let A=Object.keys(O).map(Number);A.sort(pe);let P,Y,w;i.opacity===1&&(!this.containerReused||u.getOpaque(t.viewState.projection))?A=A.reverse():(P=[],Y=[]);for(let rt=A.length-1;rt>=0;--rt){let V=A[rt],Z=u.getTilePixelSize(V,h,s),$t=m.getResolution(V)/x,gt=Z[0]*$t*B,Ge=Z[1]*$t*B,tn=m.getTileCoordForCoordAndZ(ie(b),V),es=m.getTileCoordExtent(tn),en=ht(this.tempTransform,[_*(es[0]-b[0])/x,_*(b[3]-es[3])/x]),is=_*u.getGutterForProjection(s),oi=O[V];for(let Qn in oi){let ai=oi[Qn],ns=ai.tileCoord,rs=tn[1]-ns[1],ss=Math.round(en[0]-(rs-1)*gt),nn=tn[2]-ns[2],Go=Math.round(en[1]-(nn-1)*Ge),Pt=Math.round(en[0]-rs*gt),Qt=Math.round(en[1]-nn*Ge),fe=ss-Pt,Xe=Go-Qt,rn=p===V,Ai=rn&&ai.getAlpha(U(this),t.time)!==1,li=!1;if(!Ai)if(P){w=[Pt,Qt,Pt+fe,Qt,Pt+fe,Qt+Xe,Pt,Qt+Xe];for(let sn=0,os=P.length;sn<os;++sn)if(p!==V&&V<Y[sn]){let wt=P[sn];at([Pt,Qt,Pt+fe,Qt+Xe],[wt[0],wt[3],wt[4],wt[7]])&&(li||(T.save(),li=!0),T.beginPath(),T.moveTo(w[0],w[1]),T.lineTo(w[2],w[3]),T.lineTo(w[4],w[5]),T.lineTo(w[6],w[7]),T.moveTo(wt[6],wt[7]),T.lineTo(wt[4],wt[5]),T.lineTo(wt[2],wt[3]),T.lineTo(wt[0],wt[1]),T.clip())}P.push(w),Y.push(V)}else T.clearRect(Pt,Qt,fe,Xe);this.drawTileImage(ai,t,Pt,Qt,fe,Xe,is,rn),P&&!Ai?(li&&T.restore(),this.renderedTiles.unshift(ai)):this.renderedTiles.push(ai),this.updateUsedTiles(t.usedTiles,u,ai)}}return this.renderedRevision=d,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!xe(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=h,this.renderedProjection=s,this.manageTilePyramid(t,u,m,h,s,f,p,c.getPreload()),this.scheduleExpireCache(t,u),this.postRender(T,t),i.extent&&T.restore(),T.imageSmoothingEnabled=!0,L!==I.style.transform&&(I.style.transform=L),this.container}drawTileImage(t,e,i,n,s,o,a,l){let h=this.getTileImage(t);if(!h)return;let c=U(this),u=e.layerStatesArray[e.layerIndex],d=u.opacity*(l?t.getAlpha(c,e.time):1),m=d!==this.context.globalAlpha;m&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,n,s,o),m&&this.context.restore(),d!==u.opacity?e.animate=!0:l&&t.endTransition(c)}getImage(){let t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){let i=function(n,s,o){let a=U(n);a in o.usedTiles&&n.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){let n=U(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,s,o,a,l,h){let c=U(e);c in t.wantedTiles||(t.wantedTiles[c]={});let u=t.wantedTiles[c],d=t.tileQueue,m=i.getMinZoom(),p=t.viewState.rotation,x=p?Rs(t.viewState.center,t.viewState.resolution,p,t.size):void 0,f=0,g,_,y,E,C,S;for(S=m;S<=a;++S)for(_=i.getTileRangeForExtentAndZ(o,S,_),y=i.getResolution(S),E=_.minX;E<=_.maxX;++E)for(C=_.minY;C<=_.maxY;++C)p&&!i.tileCoordIntersectsViewport([S,E,C],x)||(a-S<=l?(++f,g=e.getTile(S,E,C,n,s),g.getState()==k.IDLE&&(u[g.getKey()]=!0,d.isKeyQueued(g.getKey())||d.enqueue([g,c,i.getTileCoordCenter(g.tileCoord),y])),h!==void 0&&h(g)):e.useTile(S,E,C,s));e.updateCacheSize(f,s)}},Lg=Yh;var $r={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};Po();_t();lt();$();Ji();Bs();mt();Ei();var np=[0,0,0],wi=5,Bh=class{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,W(cc(this.resolutions_,function(n,s){return s-n},!0),17);let e;if(!t.origins){for(let n=0,s=this.resolutions_.length-1;n<s;++n)if(!e)e=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,W(this.origins_.length==this.resolutions_.length,20));let i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ie(i)),W(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,W(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:256,W(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(n,s){let o=new Jn(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(i){let a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){let n=this.getTileRangeForExtentAndZ(t,e);for(let s=n.minX,o=n.maxX;s<=o;++s)for(let a=n.minY,l=n.maxY;a<=l;++a)i([e,s,a])}forEachTileCoordParentTileRange(t,e,i,n){let s,o,a,l=null,h=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,n);h>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=$i(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,h,i),e(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){let s=t[1]*2,o=t[2]*2;return $i(s,s+1,o,o+1,e)}let n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;let n=t[0],s=t[1],o=t[2];if(e===n)return $i(s,o,s,o,i);if(this.zoomFactor_){let l=Math.pow(this.zoomFactor_,e-n),h=Math.floor(s*l),c=Math.floor(o*l);if(e<n)return $i(h,h,c,c,i);let u=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return $i(h,u,c,d,i)}let a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeExtent(t,e,i){let n=this.getOrigin(t),s=this.getResolution(t),o=Ct(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*s,l=n[0]+(e.maxX+1)*o[0]*s,h=n[1]+e.minY*o[1]*s,c=n[1]+(e.maxY+1)*o[1]*s;return Nt(a,h,l,c,i)}getTileRangeForExtentAndZ(t,e,i){let n=np;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);let s=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),$i(s,n[1],o,n[2],i)}getTileCoordCenter(t){let e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Ct(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){let i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=Ct(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*n,a=i[1]-(t[2]+1)*s[1]*n,l=o+s[0]*n,h=a+s[1]*n;return Nt(o,a,l,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,s){let o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),h=Ct(this.getTileSize(o),this.tmpSize_),c=a*(t-l[0])/i/h[0],u=a*(l[1]-e)/i/h[1];return n?(c=dr(c,wi)-1,u=dr(u,wi)-1):(c=ur(c,wi),u=ur(u,wi)),Ph(o,c,u,s)}getTileCoordForXYAndZ_(t,e,i,n,s){let o=this.getOrigin(i),a=this.getResolution(i),l=Ct(this.getTileSize(i),this.tmpSize_),h=(t-o[0])/a/l[0],c=(o[1]-e)/a/l[1];return n?(h=dr(h,wi)-1,c=dr(c,wi)-1):(h=ur(h,wi),c=ur(c,wi)),Ph(i,h,c,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){let i=hn(this.resolutions_,t,e||0);return z(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Ta(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){let e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}},Uh=Bh;var Oo={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};ge();Fl();bo();Oe();ot();_t();Et();Ji();Et();$();Ei();function Do(r){let t=r.getDefaultTileGrid();return t||(t=sp(r),r.setDefaultTileGrid(t)),t}function vg(r,t,e){let i=t[0],n=r.getTileCoordCenter(t),s=Fo(e);if(Ht(s,n))return t;{let o=H(s),a=Math.ceil((s[0]-n[0])/o);return n[0]+=o*a,r.getTileCoordForCoordAndZ(n,i)}}function rp(r,t,e,i){i=i!==void 0?i:"top-left";let n=Ag(r,t,e);return new Uh({extent:r,origin:Lc(r,i),resolutions:n,tileSize:e})}function wg(r){let t=r||{},e=t.extent||et("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Ag(e,t.maxZoom,t.tileSize,t.maxResolution)};return new Uh(i)}function Ag(r,t,e,i){t=t!==void 0?t:42,e=Ct(e!==void 0?e:256);let n=yt(r),s=H(r);i=i>0?i:Math.max(s/e[0],n/e[1]);let o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function sp(r,t,e,i){let n=Fo(r);return rp(n,t,e,i)}function Fo(r){r=et(r);let t=r.getExtent();if(!t){let e=180*Xt.degrees/r.getMetersPerUnit();t=Nt(-e,-e,e,e)}return t}Ei();var jh=class extends uo{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;let e=[256,256];this.tileGrid&&Ct(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new qn(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){let i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){let s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,h;for(let c=i.minX;c<=i.maxX;++c)for(let u=i.minY;u<=i.maxY;++u)l=qi(e,c,u),h=!1,s.containsKey(l)&&(a=s.get(l),h=a.getState()===k.LOADED,h&&(h=n(a)!==!1)),h||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,i,n,s){return K()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Do(t)}getTileCacheForProjection(t){let e=this.getProjection();return W(e===null||ye(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){let n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),o=Ct(n.getTileSize(t),this.tmpSize);return s==1?o:Du(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();let i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=vg(i,t,e)),fg(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){let i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}},ko=class extends dt{constructor(t,e){super(t),this.tile=e}},bg=jh;Oe();_t();lt();Ji();function op(r,t){let e=/\{z\}/g,i=/\{x\}/g,n=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return r.replace(e,o[0].toString()).replace(i,o[1].toString()).replace(n,o[2].toString()).replace(s,function(){let h=o[0],c=t.getFullTileRange(h);return W(c,55),(c.getHeight()-o[2]-1).toString()})}}function Mg(r,t){let e=r.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=op(r[n],t);return ap(i)}function ap(r){return r.length===1?r[0]:function(t,e,i){if(t){let n=dg(t),s=qt(n,r.length);return r[s](t,e,i)}else return}}function Pg(r){let t=[],e=/\{([a-z])-([a-z])\}/.exec(r);if(e){let i=e[1].charCodeAt(0),n=e[2].charCodeAt(0),s;for(s=i;s<=n;++s)t.push(r.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(r),e){let i=parseInt(e[2],10);for(let n=parseInt(e[1],10);n<=i;n++)t.push(r.replace(e[0],n.toString()));return t}return t.push(r),t}Ji();ot();var Qr=class extends bg{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Qr.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){let e=t.target,i=U(e),n=e.getState(),s;n==k.LOADING?(this.tileLoadingKeys_[i]=!0,s=Oo.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==k.ERROR?Oo.TILELOADERROR:n==k.LOADED?Oo.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new ko(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){let e=Pg(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;let e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Mg(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){let n=qi(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}},Og=Qr;st();fo();bo();Oe();Et();Ji();ot();var Kh=class extends Og{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:lp,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Un,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){let i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(let n in this.tileCacheForProjection){let s=this.tileCacheForProjection[n];s.expireCache(s==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!ye(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!ye(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){let e=this.getProjection();if(this.tileGrid&&(!e||ye(e,t)))return this.tileGrid;{let i=U(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Do(t)),this.tileGridForProjection[i]}}getTileCacheForProjection(t){let e=this.getProjection();if(!e||ye(e,t))return this.tileCache;{let i=U(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new qn(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(t,e,i,n,s,o){let a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,s),h=l?this.tileUrlFunction(l,n,s):void 0,c=new this.tileClass(a,h!==void 0?k.IDLE:k.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(F.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,i,n,s){let o=this.getProjection();if(!o||!s||ye(o,s))return this.getTileInternal(t,e,i,n,o||s);{let a=this.getTileCacheForProjection(s),l=[t,e,i],h,c=Ao(l);a.containsKey(c)&&(h=a.get(c));let u=this.getKey();if(h&&h.key==u)return h;{let d=this.getTileGridForProjection(o),m=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),x=new Jr(o,d,s,m,l,p,this.getTilePixelRatio(n),this.getGutter(),function(f,g,_,y){return this.getTileInternal(f,g,_,y,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return x.key=u,h?(x.interimTile=h,x.refreshInterimChain(),a.replace(c,x)):a.set(c,x),x}}}getTileInternal(t,e,i,n,s){let o=null,a=qi(t,e,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,e,i,n,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){let h=o;o=this.createTile_(t,e,i,n,s,l),h.getState()==k.IDLE?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(let e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){let i=et(t);if(i){let n=U(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}clear(){super.clear();for(let t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};function lp(r,t){r.getImage().src=t}var Dg=Kh;Vi();var Vh=class extends Ki{constructor(t){t=t||{};let e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get($r.PRELOAD)}setPreload(t){this.set($r.PRELOAD,t)}getUseInterimTilesOnError(){return this.get($r.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set($r.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}},Fg=Vh;var Zh=class extends Fg{constructor(t){super(t)}createRenderer(){return new Lg(this)}},Hh=Zh;Et();var qh=class extends Dg{constructor(t){t=t||{};let e=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:wg({extent:Fo(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}},kg=qh;var hp='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Jh=class extends kg{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[hp];let i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",n=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}},$h=Jh;var $n=us(Qh());var ts={A0:{landscape:{right:15},portrait:{bottom:15}},A1:{landscape:{right:12},portrait:{bottom:12}},A2:{landscape:{right:7.5},portrait:{bottom:7.5}},A3:{landscape:{right:7},portrait:{bottom:7}},A4:{landscape:{right:5},portrait:{bottom:5}},LEGAL:{landscape:{right:5},portrait:{bottom:5}},TABLOID:{landscape:{right:7},portrait:{bottom:7}},LETTER:{landscape:{right:5},portrait:{bottom:5}}};function Gg(r="map",t=[8.68,49.41],e=15){return new wo({target:"map",view:new de({center:ua([8.68,49.41]),zoom:15}),layers:[new Hh({source:new $h})]})}function Xg(r){let t=new $n.PrintLayout({format:$n.PAPER_FORMAT.A4,orientation:$n.ORIENTATION.LANDSCAPE,margin:ts.A4.landscape});return r.addControl(t),t}var Qi=us(Qh());function tc(r,t){let e=document.getElementById(r);for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)){let n=document.createElement("option");n.text=t[i],e.appendChild(n)}}function Wg(r){tc("format",Qi.PAPER_FORMAT),document.getElementById("format").value=r.getFormat(),document.getElementById("format").addEventListener("change",t=>{let e=t.target.value,i=r.getOrientation();r.setFormat(e),r.setMargin(new Qi.Margin(ts[e][i]))}),tc("orientation",Qi.ORIENTATION),document.getElementById("orientation").value=r.getOrientation(),document.getElementById("orientation").addEventListener("change",t=>{let e=t.target.value,i=r.getFormat();r.setOrientation(e),r.setMargin(new Qi.Margin(ts[i][e]))}),document.getElementById("bbox").value=JSON.stringify(r.getBbox()),r.on("change:bbox",t=>{let e=t.target.getBbox();document.getElementById("bbox").value=JSON.stringify(e)}),document.getElementById("size").value=JSON.stringify(r.getPrintBoxSizeInDots(192)),r.on("change",t=>{let e=t.target.getPrintBoxSizeInDots(192);document.getElementById("size").value=JSON.stringify(e)})}var cp=Gg(),up=Xg(cp);Wg(up);
