function d(){let n=/[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}/i;return location.pathname.match(n)[0]}function c(n,e){document.getElementById(n).setAttribute("aria-busy",e)}function m(n,e){let o=document.getElementById(n);e?o.setAttribute("disabled","disabled"):o.removeAttribute("disabled")}function y(n,e){document.getElementById(n).setAttribute("href",e)}var s=class{static async poll(e,o=()=>!0,r=1e3,l=()=>{},a=()=>{},i=()=>{}){do{let t=await fetch(e);if(!t.ok)return await i(t),t;if(!o(t))await a(t),await s.wait(r);else return await l(t),t}while(!0)}static async wait(e=1e3){return new Promise(o=>{setTimeout(o,e)})}};async function f(n,e){function o(t){return t.status===200}async function r(t){document.getElementById(`${e}-status`).innerText="Generating, please wait\u2026"}async function l(t){let u=await t.json(),{status:w,href:b}=u;y(`${e}-download-button`,b),c(`${e}-download-button`,!1),m(`${e}-download-button`,!1),document.getElementById(`${e}-status`).innerText=w}function a(t){document.getElementById(`${t}-status`).innerHTML="Sorry! <br>Something went wrong while trying to generate the Result. Please try again later.",document.getElementById(`${t}-download-button`).style.display="none"}async function i(t){let u=await t.text();console.log(t.status,t.statusText,u),a(e)}try{return s.poll(n,o,1e3,l,r,i)}catch(t){return console.log(t),a(e),null}}function g(n){n.every(e=>e.status===200)?document.getElementById("main-message").innerText="Your results are ready for download!":n.some(e=>e.status===200)?document.getElementById("main-message").innerText="Sorry. Only some of your results could be generated for download.":document.getElementById("main-message").innerText="Your results should have been downloadable from here, but we are having troubles on our servers!"}var h=`/api/status/${d()}/digitized-data`;f(h,"vector-data").then(g);
