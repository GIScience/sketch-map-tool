function c(){let n=/[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}/i;return location.pathname.match(n)[0]}function d(n,t){document.getElementById(n).setAttribute("aria-busy",t)}function y(n,t){let o=document.getElementById(n);t?o.setAttribute("disabled","disabled"):o.removeAttribute("disabled")}function f(n,t){document.getElementById(n).setAttribute("href",t)}var s=class{static async poll(t,o=()=>!0,r=1e3,l=()=>{},a=()=>{},i=()=>{}){do{let e=await fetch(t);if(!e.ok)return await i(e),e;if(!o(e))await a(e),await s.wait(r);else return await l(e),e}while(!0)}static async wait(t=1e3){return new Promise(o=>{setTimeout(o,t)})}};async function m(n,t){function o(e){return e.status===200}async function r(e){document.getElementById(`${t}-status`).innerText="Generating, please wait\u2026"}async function l(e){let u=await e.json(),{status:w,href:p}=u;f(`${t}-download-button`,p),d(`${t}-download-button`,!1),y(`${t}-download-button`,!1),document.getElementById(`${t}-status`).innerText=w}function a(e){document.getElementById(`${e}-status`).innerHTML="Sorry! <br>Something went wrong while trying to generate the Result. Please try again later.",document.getElementById(`${e}-download-button`).style.display="none"}async function i(e){let u=await e.text();console.log(e.status,e.statusText,u),a(t)}try{return s.poll(n,o,1e3,l,r,i)}catch(e){return console.log(e),a(t),null}}function g(n){n.every(t=>t.status===200)?document.getElementById("main-message").innerText="Your results are ready for download!":n.some(t=>t.status===200)?document.getElementById("main-message").innerText="Sorry. Only some of your results could be generated for download.":document.getElementById("main-message").innerText="Your results should have been downloadable from here, but we are having troubles on our servers!"}var h=`/api/status/${c()}/sketch-map`,b=`/api/status/${c()}/quality-report`;Promise.all([m(h,"sketch-map"),m(b,"quality-report")]).then(g);
