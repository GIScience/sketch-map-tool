{% extends "base.html.jinja" %}

{% block head %}
<script type="module" src="{{ url_for("static", filename="bundles/digitize-results.js") }}"></script>
{% endblock head %}

{% block header_message %}
<div class="circle" style="display: inline-block;">2</div>{{ _('Paper to GIS:') }}
<span style="font-size: smaller">{{ _('Automatically Digitize Your Sketch&nbsp;Maps') }}</span>
{% endblock %}

{% block body %}
<div class="container-fluid horizontal step-arrows">
    <div>{{ _('Scan or photograph your marked Sketch&nbsp;Maps') }}</div>
    <div>{{ _('Upload your Sketch&nbsp;Maps') }}</div>
    <div class="active">{{ _('Download collected markings as geodata') }}</div>
</div>
<main class="container">
    <div id="main-message">
        <div class="sketchy h1 center-text pending">{{ _('Your results are being processed ...') }}
        </div>
        <div class="sketchy h1 center-text success hidden">{{ _('Your results are ready for download!') }}
        </div>
        <div class="sketchy h1 center-text partial-success hidden">{{ _('Sorry. Only some of your results could be generated for download.') }}
        </div>
        <div class="sketchy h1 center-text error hidden">{{ _('Your results should have been downloadable from here, but we are having troubles on our servers!') }}
        </div>
    </div>
    <br>
    <div class="grid">
        <div>
            <article id="raster-data" class="result">
                <header>
                    <img src="{{ url_for("static", filename="assets/images/digitize-results/raster-marking-icon.svg") }}" alt="{{ _('raster data icon') }}"><br>
                    <span class="brand-font sub-icon">{{ _('Raster') }}</span>
                </header>
                <h6>{{ _('Georeferenced map frames as GeoTiffs') }}</h6>
                <p class="pending">
                    {{ _(
                        'We are georeferencing the map frames of your Sketch Maps.<br>
                        Please be patient this can take 2-10 minutes.'
                    ) }}
                </p>
                <p class="success hidden">
                    {{ _(
                        'We have georeferenced the map frames of your Sketch Maps.<br>
                        You can download them as rasterized GeoTIFFs and use them for further analysis in your favorite GIS Software.'
                    ) }}
                </p>
                <p class="error hidden">
                    {{ _('Sorry! <br>Something went wrong while trying to generate the result.') }}
                </p>
                <a id="raster-data-download-button" href="#" download aria-busy="true" role="button" disabled="disabled">{{ _('Download ZIP') }}</a>
                <div id="raster-data-status" class="task-status"></div>

            </article>
        </div>
        <div>
            <article id="vector-data" class="result">
                <header>
                    <img src="{{ url_for("static", filename="assets/images/digitize-results/vector-marking-icon.svg") }}" alt="{{ _('vector data icon') }}"><br>
                    <span class="brand-font sub-icon">{{ _('Vector') }}</span>
                </header>
                <h6>{{ _('Georeferenced markings as GeoJSON') }}</h6>
                <p class="pending">
                    {{ _(
                        'We are extracting and georeferencing the color markings of your Sketch Maps.<br>
                        Please be patient this can take 2-10 minutes.'
                    ) }}
                </p>
                <p class="success hidden">
                    {{ _(
                        'We have extracted and georeferenced the color markings of your Sketch Maps.<br>
                        You can download them as vectorized polygons or points and use them for further
                        analysis in your favorite GIS Software.'
                    ) }}
                </p>
                <p class="error hidden">
                    {{ _('Sorry! <br>Something went wrong while trying to generate the Result.') }}
                </p>
                <p>
                    <a id="vector-data-download-button" href="#" download aria-busy="true" role="button" disabled="disabled">{{ _('Download Polygon GeoJSON') }}</a>
                </p>
                <a id="centroid-data-download-button" class="outline" href="#" download aria-busy="true" role="button" disabled="disabled">{{ _('Download Point GeoJSON') }}</a>
                <div id="vector-data-status" class="task-status"></div>
                <br>
                <!-- JS polling function expects a status span for every request type. -->
                <div id="centroid-data-status" style="display: none;"></div>
            </article>
        </div>
    </div>
</main>
{% endblock body %}
